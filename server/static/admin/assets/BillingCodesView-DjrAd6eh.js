import"./index-8V-xrl-L.js";import{N as e,O as t,b as a,r as l,w as i,f as s,A as n,o,C as r,D as d,u as c,a as u,y as m,E as g,z as v,H as p,J as f,c as b,F as y,G as _,I as x,q as I,_ as C,x as E,P as w,Q as D}from"./index-2uCPEpPG.js";import{f as h}from"./projects-QDzbZapS.js";import{f as N}from"./rates-Bm4DowW0.js";import{p as L,g as A,a as O,f as T,b as G}from"./dateUtils-kXVih0JO.js";import{r as k}from"./XMarkIcon-Bml7Cvcl.js";import{Y as j,h as R,G as B,V as S,S as Y}from"./transition-CMIuM6C3.js";import{_ as P}from"./ConfirmationModal-DUMFrYPd.js";const U=async t=>{try{let t="billing_codes";return await e(t)}catch(a){throw console.error("Error fetching billing codes:",a),a}},M={async deleteBillingCode(e){try{return t("billing_codes",e)}catch(a){throw console.error("Failed to delete billing code:",a),a}}}.deleteBillingCode,F={class:"fixed inset-0 overflow-hidden"},V={class:"absolute inset-0 overflow-hidden"},X={class:"pointer-events-none fixed inset-y-0 right-0 flex max-w-full pl-10 sm:pl-16"},z={class:"flex-1"},Q={class:"bg-sage-dark px-4 py-6 sm:px-6"},H={class:"flex items-start justify-between space-x-3"},J={class:"space-y-1"},$={class:"text-sm text-gray-100"},q={class:"flex h-7 items-center"},W={class:"space-y-6 py-6 sm:space-y-0 sm:divide-y sm:divide-gray-200 sm:py-0"},Z={class:"space-y-2 px-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:space-y-0 sm:px-6 sm:py-5"},K={class:"sm:col-span-2"},ee={class:"space-y-2 px-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:space-y-0 sm:px-6 sm:py-5"},te={class:"sm:col-span-2"},ae={key:0,class:"mt-2 text-sm font-mono text-gray-700 bg-gray-50 px-3 py-2 rounded-md border border-gray-200"},le={key:1,class:"mt-2 text-sm text-gray-400"},ie={class:"space-y-2 px-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:space-y-0 sm:px-6 sm:py-5"},se={class:"sm:col-span-2"},ne=["value"],oe={class:"space-y-2 px-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:space-y-0 sm:px-6 sm:py-5"},re={class:"sm:col-span-2"},de=["value"],ce={class:"space-y-2 px-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:space-y-0 sm:px-6 sm:py-5"},ue={class:"sm:col-span-2"},me=["value"],ge={class:"space-y-2 px-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:space-y-0 sm:px-6 sm:py-5"},ve={class:"sm:col-span-2"},pe=["value"],fe={class:"space-y-2 px-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:space-y-0 sm:px-6 sm:py-5"},be={class:"sm:col-span-2"},ye={key:0,class:"mt-2 text-sm text-gray-700 bg-gray-50 px-3 py-2 rounded-md"},_e={key:1,class:"mt-2 text-sm text-gray-400"},xe={class:"shrink-0 border-t border-gray-200 px-4 py-5 sm:px-6"},Ie={class:"flex justify-end space-x-3"},Ce={type:"submit",class:"inline-flex justify-center rounded-md bg-sage px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-sage-dark focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sage"},Ee={__name:"BillingCodeDrawer",props:{isOpen:{type:Boolean,default:!1},billingCodeData:{type:Object,default:()=>({})}},emits:["close","save","delete"],setup(e,{emit:t}){var C,E,w,D,T,G,P,U,M,Ee,we,De,he,Ne,Le,Ae,Oe;const Te=e,Ge=t,ke=()=>{Ge("close")},je=()=>{Be.value&&Se.value.id&&Ge("delete",Se.value)},Re=[{id:"BILLING_CODE_CATEGORY_DEVELOPMENT",name:"Development"},{id:"BILLING_CODE_CATEGORY_ANALYSIS",name:"Analysis"},{id:"BILLING_CODE_CATEGORY_AI",name:"AI & Machine Learning"},{id:"BILLING_CODE_CATEGORY_CONSULTING",name:"Consulting"},{id:"BILLING_CODE_CATEGORY_OPERATIONS",name:"Operations"},{id:"BILLING_CODE_CATEGORY_ADMINISTRATIVE",name:"Administrative"},{id:"BILLING_CODE_CATEGORY_SUPPORT",name:"Support"},{id:"BILLING_CODE_CATEGORY_DESIGN",name:"Design"},{id:"BILLING_CODE_CATEGORY_TESTING",name:"Testing & QA"},{id:"BILLING_CODE_CATEGORY_MANAGEMENT",name:"Project Management"},{id:"BILLING_CODE_CATEGORY_EXTERNAL_CLIENT",name:"External Client"}],Be=a(()=>{var e,t;return!!(null==(e=Te.billingCodeData)?void 0:e.ID)||!!(null==(t=Te.billingCodeData)?void 0:t.id)}),Se=l({id:(null==(C=Te.billingCodeData)?void 0:C.id)||(null==(E=Te.billingCodeData)?void 0:E.ID)||null,name:(null==(w=Te.billingCodeData)?void 0:w.name)||"",code:(null==(D=Te.billingCodeData)?void 0:D.code)||"",category:(null==(T=Te.billingCodeData)?void 0:T.category)||"BILLING_CODE_CATEGORY_EXTERNAL_CLIENT",projectId:(null==(G=Te.billingCodeData)?void 0:G.projectId)||(null==(P=Te.billingCodeData)?void 0:P.project)||"",rateId:(null==(U=Te.billingCodeData)?void 0:U.rateId)?Number(null==(M=Te.billingCodeData)?void 0:M.rateId):(null==(Ee=Te.billingCodeData)?void 0:Ee.rate_id)?Number(null==(we=Te.billingCodeData)?void 0:we.rate_id):0,active_start:L(null==(De=Te.billingCodeData)?void 0:De.active_start)||A(),active_end:L(null==(he=Te.billingCodeData)?void 0:he.active_end)||"",internal_rate_id:(null==(Ne=Te.billingCodeData)?void 0:Ne.internalRateId)?Number(null==(Le=Te.billingCodeData)?void 0:Le.internalRateId):(null==(Ae=Te.billingCodeData)?void 0:Ae.internal_rate_id)?Number(null==(Oe=Te.billingCodeData)?void 0:Oe.internal_rate_id):0});i(()=>Te.billingCodeData,e=>{e&&(Se.value={id:e.ID||e.id||null,name:e.name||"",code:e.code||"",category:e.category||"BILLING_CODE_CATEGORY_EXTERNAL_CLIENT",projectId:e.project||e.projectId||"",rateId:e.rate_id?Number(e.rate_id):e.rateId?Number(e.rateId):0,active_start:L(e.active_start)||A(),active_end:L(e.active_end)||"",internal_rate_id:e.internalRateId?Number(e.internalRateId):e.internal_rate_id?Number(e.internal_rate_id):0})},{deep:!0});const Ye=l([]),Pe=l([]),Ue=a(()=>Se.value.projectId&&Ye.value.length?Ye.value.find(e=>e.ID===Se.value.projectId):null);i(()=>Se.value.projectId,e=>{if(e&&Ye.value.length){const t=Ye.value.find(t=>t.ID===e);t&&(Se.value.active_start=L(t.active_start)||A(),Se.value.active_end=L(t.active_end)||"")}}),s(async()=>{try{const e=await h();Ye.value=e||[];const t=await N();if(Pe.value=t||[],Se.value.projectId&&Ye.value.length){const e=Ye.value.find(e=>e.ID===Se.value.projectId);e&&!Se.value.active_start&&(Se.value.active_start=L(e.active_start)||A(),Se.value.active_end=L(e.active_end)||"")}}catch(e){console.error("Failed to fetch data:",e)}});const Me=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),Fe=e=>{if(!e)return"Not set";try{const t=new Date(e);return isNaN(t.getTime())?"Invalid date":new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric"}).format(t)}catch(t){return"Invalid date"}},Ve=e=>{if(!e)return"XXXX";const t=e.toUpperCase().replace(/\bINC\b|\bLLC\b|\bCORP\b|\bLTD\b/g,"").replace(/[^A-Z\s]/g,"").trim().split(/\s+/).filter(e=>e.length>0);let a="";if(0===t.length)return"BCBC";if(1===t.length){const e=t[0];if(e.length>=4)a=e.substring(0,4);else for(a=e;a.length<4;)a+=e.substring(0,4-a.length)}else a=2===t.length?t[0].substring(0,2)+t[1].substring(0,2):t[0].substring(0,2)+t[1].substring(0,1)+t[2].substring(0,1);return a.substring(0,4)},Xe=()=>{if(!Se.value.name)return void alert("Please enter a billing code name");if(!Se.value.category)return void alert("Please select a category");if(!Se.value.projectId)return void alert("Please select a project");if(!Se.value.rateId)return void alert("Please select a rate");const e={...Se.value,code:Se.value.code||"",active_start:O(Se.value.active_start),active_end:O(Se.value.active_end),rateId:Number(Se.value.rateId),internal_rate_id:Number(Se.value.internal_rate_id||0)};Ge("save",e),ke()};return(t,a)=>(o(),n(c(Y),{as:"template",show:e.isOpen},{default:r(()=>[d(c(j),{class:"relative z-10",onClose:ke},{default:r(()=>[a[23]||(a[23]=u("div",{class:"fixed inset-0"},null,-1)),u("div",F,[u("div",V,[u("div",X,[d(c(R),{as:"template",enter:"transform transition ease-in-out duration-500 sm:duration-700","enter-from":"translate-x-full","enter-to":"translate-x-0",leave:"transform transition ease-in-out duration-500 sm:duration-700","leave-from":"translate-x-0","leave-to":"translate-x-full"},{default:r(()=>[d(c(B),{class:"pointer-events-auto w-screen max-w-2xl"},{default:r(()=>[u("form",{class:"flex h-full flex-col overflow-y-scroll bg-white shadow-xl",onSubmit:m(Xe,["prevent"])},[u("div",z,[u("div",Q,[u("div",H,[u("div",J,[d(c(S),{class:"text-base font-semibold text-white"},{default:r(()=>[g(v(Be.value?"Edit Billing Code":"New Billing Code"),1)]),_:1}),u("p",$,v(Be.value?"Update the billing code details below.":"Get started by filling in the information below to create a new billing code."),1)]),u("div",q,[u("button",{type:"button",class:"relative text-white hover:text-gray-200",onClick:ke},[a[5]||(a[5]=u("span",{class:"absolute -inset-2.5"},null,-1)),a[6]||(a[6]=u("span",{class:"sr-only"},"Close panel",-1)),d(c(k),{class:"h-6 w-6","aria-hidden":"true"})])])])]),u("div",W,[u("div",Z,[a[7]||(a[7]=u("div",null,[u("label",{for:"billing-code-name",class:"block text-sm/6 font-medium text-gray-900 sm:mt-1.5"},"Billing Code Name")],-1)),u("div",K,[p(u("input",{type:"text",name:"billing-code-name",id:"billing-code-name","onUpdate:modelValue":a[0]||(a[0]=e=>Se.value.name=e),class:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-sage sm:text-sm/6"},null,512),[[f,Se.value.name]])])]),u("div",ee,[a[10]||(a[10]=u("div",null,[u("label",{class:"block text-sm/6 font-medium text-gray-900 sm:mt-1.5"},"Billing Code ID")],-1)),u("div",te,[a[9]||(a[9]=u("p",{class:"text-sm text-gray-500 italic"}," Code is automatically generated based on the account name. ",-1)),Ue.value&&Ue.value.account?(o(),b("div",ae,[a[8]||(a[8]=g(" Will be generated as: ")),u("strong",null,v(Ve(Ue.value.account.name))+"_####",1)])):(o(),b("p",le," Select a project to preview the code format "))])]),u("div",ie,[a[12]||(a[12]=u("div",null,[u("label",{for:"billing-code-project",class:"block text-sm/6 font-medium text-gray-900 sm:mt-1.5"},"Project")],-1)),u("div",se,[p(u("select",{id:"billing-code-project",name:"billing-code-project","onUpdate:modelValue":a[1]||(a[1]=e=>Se.value.projectId=e),class:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6"},[a[11]||(a[11]=u("option",{value:""},"Select a project",-1)),(o(!0),b(y,null,_(Ye.value,e=>(o(),b("option",{key:e.ID,value:e.ID},v(e.name),9,ne))),128))],512),[[x,Se.value.projectId]])])]),u("div",oe,[a[14]||(a[14]=u("div",null,[u("label",{for:"billing-code-rate",class:"block text-sm/6 font-medium text-gray-900 sm:mt-1.5"},"Rate")],-1)),u("div",re,[p(u("select",{id:"billing-code-rate",name:"billing-code-rate","onUpdate:modelValue":a[2]||(a[2]=e=>Se.value.rateId=e),class:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-sage sm:text-sm/6"},[a[13]||(a[13]=u("option",{value:0},"Select a rate",-1)),(o(!0),b(y,null,_(Pe.value,e=>(o(),b("option",{key:e.ID,value:Number(e.ID)},v(e.name)+" ("+v(Me(e.amount))+") ",9,de))),128))],512),[[x,Se.value.rateId]])])]),u("div",ce,[a[16]||(a[16]=u("div",null,[u("label",{for:"billing-code-rate",class:"block text-sm/6 font-medium text-gray-900 sm:mt-1.5"},"Internal Rate")],-1)),u("div",ue,[p(u("select",{id:"billing-code-internal-rate",name:"billing-code-internal-rate","onUpdate:modelValue":a[3]||(a[3]=e=>Se.value.internal_rate_id=e),class:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-sage sm:text-sm/6"},[a[15]||(a[15]=u("option",{value:0},"Select an internal rate (optional)",-1)),(o(!0),b(y,null,_(Pe.value,e=>(o(),b("option",{key:e.ID,value:Number(e.ID)},v(e.name)+" ("+v(Me(e.amount))+") ",9,me))),128))],512),[[x,Se.value.internal_rate_id]])])]),u("div",ge,[a[18]||(a[18]=u("div",null,[u("label",{for:"billing-code-description",class:"block text-sm/6 font-medium text-gray-900 sm:mt-1.5"},"Category")],-1)),u("div",ve,[p(u("select",{id:"billing-code-description",name:"billing-code-description","onUpdate:modelValue":a[4]||(a[4]=e=>Se.value.category=e),class:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-sage sm:text-sm/6"},[a[17]||(a[17]=u("option",{value:""},"Select a category",-1)),(o(),b(y,null,_(Re,e=>u("option",{key:e.id,value:e.id},v(e.name),9,pe)),64))],512),[[x,Se.value.category]])])]),u("div",fe,[a[22]||(a[22]=u("div",null,[u("label",{class:"block text-sm/6 font-medium text-gray-900 sm:mt-1.5"},"Active Period")],-1)),u("div",be,[a[21]||(a[21]=u("p",{class:"text-sm text-gray-500 italic"}," Dates are automatically set to match the selected project's timeline. ",-1)),Ue.value?(o(),b("div",ye,[u("p",null,[a[19]||(a[19]=u("strong",null,"Start:",-1)),g(" "+v(Fe(Ue.value.active_start)),1)]),u("p",null,[a[20]||(a[20]=u("strong",null,"End:",-1)),g(" "+v(Fe(Ue.value.active_end)),1)])])):(o(),b("p",_e," Select a project to see the active period "))])])])]),u("div",xe,[u("div",Ie,[Be.value?(o(),b("button",{key:0,type:"button",class:"rounded-md bg-red-50 px-3 py-2 text-sm font-semibold text-red-700 shadow-sm ring-1 ring-inset ring-red-600/20 hover:bg-red-100",onClick:je}," Delete ")):I("",!0),u("button",{type:"button",class:"rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50",onClick:ke}," Cancel "),u("button",Ce,v(Be.value?"Update":"Create"),1)])])],32)]),_:1})]),_:1})])])])]),_:1})]),_:1},8,["show"]))}},we={class:"px-4 py-6 sm:px-6 lg:px-8"},De={class:"sm:flex sm:items-center"},he={class:"mt-4 sm:ml-16 sm:mt-0 sm:flex-none"},Ne={key:0,class:"flex flex-col items-center justify-center p-10 bg-white rounded-lg shadow mt-6"},Le={key:1,class:"flex flex-col items-center justify-center p-10 bg-white rounded-lg shadow mt-6"},Ae={class:"text-gray-dark mb-2"},Oe={key:2,class:"bg-white shadow rounded-lg mt-8"},Te={role:"list",class:"divide-y divide-gray-100"},Ge={class:"min-w-0 flex-1"},ke={class:"flex items-start gap-x-3"},je={class:"text-sm/6 font-semibold text-gray-900"},Re={class:"mt-0.5 whitespace-nowrap rounded-md px-1.5 py-0.5 text-xs font-medium bg-indigo-50 text-indigo-700 ring-1 ring-inset ring-indigo-600/20"},Be={class:"mt-1 flex items-center gap-x-2 text-xs/5 text-gray-500"},Se={class:"whitespace-nowrap"},Ye={class:"font-medium"},Pe={class:"whitespace-nowrap"},Ue={class:"font-medium"},Me={class:"whitespace-nowrap"},Fe={class:"font-medium"},Ve={key:0,class:"mt-1 flex items-center gap-x-2 text-xs/5 text-gray-500"},Xe={key:0,class:"whitespace-nowrap"},ze=["datetime"],Qe={key:1,viewBox:"0 0 2 2",class:"size-0.5 fill-current"},He={key:2,class:"whitespace-nowrap"},Je=["datetime"],$e={class:"flex flex-none items-center gap-x-4"},qe=["onClick"],We={key:0,class:"py-5 px-4"},Ze=C({__name:"BillingCodesView",setup(e){const t=l([]),i=l([]),n=l([]),r=l(!1),m=l(null),p=l(!1),f=l(null);l("");const x=l(!0),C=l(null),L=a(()=>t.value&&Array.isArray(t.value)?[...t.value].sort((e,t)=>{const a=B(e),l=B(t);return a&&!l?-1:!a&&l?1:0}):[]);s(async()=>{await A()});const A=async()=>{x.value=!0,C.value=null;try{const[e,a,l]=await Promise.all([U(),h(),N()]);t.value=e||[],i.value=a||[],n.value=l||[]}catch(e){console.error("Error loading data:",e),C.value="Failed to load billing codes. Please try again."}finally{x.value=!1}},O=e=>{if(!i.value||!Array.isArray(i.value))return"Unknown";const t=i.value.find(t=>t.ID===e);return t?t.name:"Unknown"},k=e=>{if(!n.value||!Array.isArray(n.value))return"Unknown";const t=n.value.find(t=>t.ID===e);return t?`${t.name} (${j(t.amount)})`:"Unknown"},j=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),R=e=>{if(!e)return"Unknown";const t={BILLING_CODE_CATEGORY_DEVELOPMENT:"Development",BILLING_CODE_CATEGORY_ANALYSIS:"Analysis",BILLING_CODE_CATEGORY_AI:"AI & Machine Learning",BILLING_CODE_CATEGORY_CONSULTING:"Consulting",BILLING_CODE_CATEGORY_OPERATIONS:"Operations",BILLING_CODE_CATEGORY_ADMINISTRATIVE:"Administrative",BILLING_CODE_CATEGORY_SUPPORT:"Support",BILLING_CODE_CATEGORY_DESIGN:"Design",BILLING_CODE_CATEGORY_TESTING:"Testing & QA",BILLING_CODE_CATEGORY_MANAGEMENT:"Project Management",BILLING_CODE_CATEGORY_EXTERNAL_CLIENT:"External Client"};if(t[e])return t[e];const a=e.replace("BILLING_CODE_CATEGORY_","").replace(/_/g," ").toLowerCase();return a.charAt(0).toUpperCase()+a.slice(1)},B=e=>{if(!e)return!1;const t=e.active_start?new Date(e.active_start):null,a=e.active_end?new Date(e.active_end):null,l=new Date;l.setUTCHours(0,0,0,0);return(!t||l>=t)&&(!a||l<=a)},S=(e=null)=>{m.value=e?{id:e.id,ID:e.ID,name:e.name,code:e.code||"",category:e.category,project:e.project,projectId:e.project,rate_id:e.rate_id,rateId:e.rate_id,active_start:e.active_start||G(),active_end:e.active_end||"",internal_rate_id:e.internal_rate_id||""}:null,r.value=!0},Y=()=>{r.value=!1,m.value=null},F=async e=>{try{if(t.value.some(t=>t.code===e.code&&t.ID!==e.id))return void alert("This billing code ID already exists. Please choose a different ID.");const a=void 0!==e.rateId?Number(e.rateId):void 0!==e.rate_id?Number(e.rate_id):0,l=void 0!==e.internal_rate_id?Number(e.internal_rate_id):0,i=new FormData;i.append("name",e.name||""),i.append("code",e.code||""),i.append("type",a===l?"RATE_TYPE_INTERNAL_PROJECT":"RATE_TYPE_EXTERNAL_CLIENT_BILLABLE"),i.append("category",e.category||""),e.projectId&&i.append("project_id",String(e.projectId)),i.append("rate_id",String(a)),i.append("internal_rate_id",String(l)),e.active_start&&i.append("active_start",e.active_start),e.active_end&&i.append("active_end",e.active_end),i.append("rounded_to","15");for(const[e,t]of i.entries());let s;s=e.id?await w("billing_codes",e.id,i):await D("billing_codes",i),await A(),Y()}catch(a){console.error("Error saving billing code:",a),alert("Failed to save billing code. Please try again.")}},V=e=>{e?(f.value={ID:e.ID||e.id,id:e.id||e.ID,name:e.name},p.value=!0,r.value=!1):console.error("No billing code provided for deletion")},X=async()=>{if(f.value)try{const e=f.value.ID||f.value.id;if(!e)return console.error("Invalid billing code ID for deletion:",f.value),void alert("Failed to delete billing code: Invalid ID");await M(e),await A(),p.value=!1,f.value=null}catch(e){console.error("Error deleting billing code:",e),alert("Failed to delete billing code. Please try again.")}};return(e,t)=>(o(),b("div",we,[u("div",De,[t[2]||(t[2]=u("div",{class:"sm:flex-auto"},[u("h1",{class:"text-base font-semibold leading-6 text-gray-900"},"Billing Codes"),u("p",{class:"mt-2 text-sm text-gray-700"}," A list of all billing codes associated with projects and rates. ")],-1)),u("div",he,[u("button",{type:"button",onClick:t[0]||(t[0]=e=>S()),class:"block rounded-md bg-sage px-3 py-2 text-center text-sm font-semibold text-white shadow-sm hover:bg-sage-dark focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sage"}," Create new billing code ")])]),x.value?(o(),b("div",Ne,t[3]||(t[3]=[u("i",{class:"fas fa-spinner fa-spin text-4xl text-teal mb-4"},null,-1),u("span",{class:"text-gray-dark"},"Loading billing codes...",-1)]))):C.value?(o(),b("div",Le,[t[5]||(t[5]=u("i",{class:"fas fa-exclamation-circle text-4xl text-red mb-4"},null,-1)),u("span",Ae,v(C.value),1),u("button",{onClick:A,class:"btn-secondary mt-4"},t[4]||(t[4]=[u("i",{class:"fas fa-sync mr-2"},null,-1),g(" Retry ")]))])):(o(),b("div",Oe,[u("ul",Te,[(o(!0),b(y,null,_(L.value,e=>(o(),b("li",{key:e.ID,class:"flex items-center justify-between gap-x-6 py-5 px-4 hover:bg-gray-50"},[u("div",Ge,[u("div",ke,[u("p",je,v(e.name),1),u("p",{class:E([B(e)?"text-green-700 bg-green-50 ring-green-600/20":"text-red-700 bg-red-50 ring-red-600/20","mt-0.5 whitespace-nowrap rounded-md px-1.5 py-0.5 text-xs font-medium ring-1 ring-inset"])},v(B(e)?"Active":"Inactive"),3),u("p",Re,v(R(e.category)),1)]),u("div",Be,[u("p",Se,[u("span",Ye,"Code: "+v(e.code),1)]),t[8]||(t[8]=u("svg",{viewBox:"0 0 2 2",class:"size-0.5 fill-current"},[u("circle",{cx:"1",cy:"1",r:"1"})],-1)),u("p",Pe,[t[6]||(t[6]=g(" Project: ")),u("span",Ue,v(O(e.project)),1)]),t[9]||(t[9]=u("svg",{viewBox:"0 0 2 2",class:"size-0.5 fill-current"},[u("circle",{cx:"1",cy:"1",r:"1"})],-1)),u("p",Me,[t[7]||(t[7]=g(" Rate: ")),u("span",Fe,v(k(e.rate_id)),1)])]),e.active_start||e.active_end?(o(),b("div",Ve,[e.active_start?(o(),b("p",Xe,[t[10]||(t[10]=g(" Active from ")),u("time",{datetime:e.active_start},v(c(T)(e.active_start)),9,ze)])):I("",!0),e.active_start&&e.active_end?(o(),b("svg",Qe,t[11]||(t[11]=[u("circle",{cx:"1",cy:"1",r:"1"},null,-1)]))):I("",!0),e.active_end?(o(),b("p",He,[t[12]||(t[12]=g(" to ")),u("time",{datetime:e.active_end},v(c(T)(e.active_end)),9,Je)])):I("",!0)])):I("",!0)]),u("div",$e,[u("button",{onClick:t=>S(e),class:"rounded-md bg-white px-2.5 py-1.5 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50"},t[13]||(t[13]=[u("i",{class:"fas fa-pencil-alt mr-1"},null,-1),g(" Edit ")]),8,qe)])]))),128)),0===L.value.length?(o(),b("li",We,t[14]||(t[14]=[u("div",{class:"flex flex-col items-center justify-center p-10"},[u("i",{class:"fas fa-tags text-5xl text-gray-300 mb-4"}),u("p",{class:"text-lg font-medium text-gray-dark"},"No billing codes found"),u("p",{class:"text-gray mb-4"},'Click "Create new billing code" to add one')],-1)]))):I("",!0)])])),d(Ee,{"is-open":r.value,"billing-code-data":m.value,onClose:Y,onSave:F,onDelete:V},null,8,["is-open","billing-code-data"]),d(P,{show:p.value,title:"Delete Billing Code",message:"Are you sure you want to delete this billing code? This action cannot be undone.",onConfirm:X,onCancel:t[1]||(t[1]=e=>p.value=!1)},null,8,["show"])]))}},[["__scopeId","data-v-b0757e40"]]);export{Ze as default};
