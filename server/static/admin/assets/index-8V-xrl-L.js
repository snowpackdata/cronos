const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-2uCPEpPG.js","assets/index-d8_Er7ma.css"])))=>i.map(i=>d[i]);
import{B as e,Y as o}from"./index-2uCPEpPG.js";const t=e.create({});t.interceptors.request.use(e=>{const o=localStorage.getItem("snowpack_token");return o&&(e.headers["x-access-token"]=o),e},e=>Promise.reject(e));let n=0;t.interceptors.response.use(e=>e,async e=>{const r=e.config;if(e.response&&(401===e.response.status||403===e.response.status)){if(n>=1)return localStorage.removeItem("snowpack_token"),window.location.pathname.includes("/login")||(window.location.href="/login"),n=0,Promise.reject(e);n++;try{const{refreshToken:e}=await o(async()=>{const{refreshToken:e}=await import("./index-2uCPEpPG.js").then(e=>e.Z);return{refreshToken:e}},__vite__mapDeps([0,1]));if(await e()){const e=localStorage.getItem("snowpack_token");if(e&&r.headers)return r.headers["x-access-token"]=e,n=0,t(r)}}catch(s){console.error("Token refresh failed:",s)}localStorage.removeItem("snowpack_token"),n=0,window.location.pathname.includes("/login")||(window.location.href="/login")}return Promise.reject(e)});export{t as a};
