import{h as e,r as a,b as t,w as l,c as s,q as i,a as n,y as r,x as o,z as d,H as m,E as u,J as c,I as p,u as y,K as g,M as f,L as v,o as x,_,f as b,D as A,F as h,G as E}from"./index-2uCPEpPG.js";import{f as w,u as I,c as S,d as L}from"./staff-BJndFo0_.js";import{_ as T}from"./ConfirmationModal-DUMFrYPd.js";import{_ as k}from"./StaffAvatar.vue_vue_type_script_setup_true_lang-ChSVjzSa.js";import"./transition-CMIuM6C3.js";const R={ACTIVE:"EMPLOYMENT_STATUS_ACTIVE",INACTIVE:"EMPLOYMENT_STATUS_INACTIVE",TERMINATED:"EMPLOYMENT_STATUS_TERMINATED"},V={FULLY_VARIABLE:"COMPENSATION_TYPE_FULLY_VARIABLE",SALARIED:"COMPENSATION_TYPE_SALARIED",BASE_PLUS_VARIABLE:"COMPENSATION_TYPE_BASE_PLUS_VARIABLE"},D={[R.ACTIVE]:"Active",[R.INACTIVE]:"Inactive",[R.TERMINATED]:"Terminated"},B={[V.FULLY_VARIABLE]:"Fully Variable",[V.SALARIED]:"Salaried",[V.BASE_PLUS_VARIABLE]:"Base + Variable"},N={[V.FULLY_VARIABLE]:"100% based on billable hours",[V.SALARIED]:"Fixed annual salary",[V.BASE_PLUS_VARIABLE]:"Base salary + client billables"},U={class:"absolute inset-0 overflow-hidden"},C={class:"pointer-events-none fixed inset-y-0 right-0 flex max-w-full pl-10 sm:pl-16"},F={class:"flex h-full flex-col overflow-y-auto bg-white shadow-xl"},M={class:"px-4 py-6 bg-gray-50 border-b border-gray-200 sm:px-6"},P={class:"flex items-start justify-between"},Y={class:"text-lg font-semibold leading-6 text-gray-900"},O={class:"flex-1 px-4 py-6 sm:px-6"},j={class:"border-b border-gray-200 pb-6"},z={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},H={class:"mt-4"},W={class:"mt-4"},$={class:"mt-2 flex items-center gap-4"},G={key:0,class:"flex-shrink-0"},J=["src"],q={key:1,class:"flex-shrink-0 h-16 w-16 rounded-full bg-sage-pale flex items-center justify-center border-2 border-gray-200"},K={class:"text-sage font-medium text-lg"},Q={class:"flex-1"},X={class:"mt-4"},Z={class:"mt-4"},ee=["value"],ae=["value"],te=["value"],le={class:"mt-4"},se={for:"is_active",class:"flex items-center"},ie={class:"border-b border-gray-200 pb-6"},ne={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},re={key:0},oe={class:"mt-4"},de={class:"border-b border-gray-200 pb-6"},me={class:"mb-4"},ue=["value"],ce=["value"],pe=["value"],ye={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},ge={key:0},fe={key:1},ve={key:2},xe={class:"mb-4"},_e={class:"block text-sm font-medium leading-6 text-gray-900 mb-2"},be={key:0,class:"text-sm text-gray-500"},Ae={class:"space-y-2"},he={class:"flex items-center"},Ee={class:"flex items-center"},we={key:0},Ie={for:"hourly_rate",class:"block text-sm font-medium leading-6 text-gray-900"},Se={key:0},Le={key:1},Te={class:"mt-1 text-sm text-gray-500"},ke={key:0},Re={key:1},Ve={key:1},De={class:"text-sm text-gray-500"},Be={key:0},Ne={key:1},Ue={class:"border-t border-gray-200 px-4 py-4 sm:px-6"},Ce={class:"flex justify-between"},Fe={class:"flex gap-3"},Me=["disabled"],Pe=_(e({__name:"StaffDrawer",props:{isOpen:{type:Boolean},staffData:{default:null}},emits:["close","save","delete"],setup(e,{emit:_}){const b=e,A=_,h=a({first_name:"",last_name:"",title:"",email:"",is_active:!0,employment_status:R.ACTIVE,start_date:"",end_date:"",capacity_weekly:40,compensation_type:V.FULLY_VARIABLE,is_salaried:!1,salary_annualized:0,base_salary:0,is_variable_hourly:!0,is_fixed_hourly:!1,hourly_rate:0,entry_pay_eligible_state:"ENTRY_STATE_PAID"}),E=a(null),w=a(null),I=a(null),S=e=>{const a=e.target;if(a.files&&a.files[0]){w.value=a.files[0];const e=new FileReader;e.onload=e=>{var a;I.value=null==(a=e.target)?void 0:a.result},e.readAsDataURL(a.files[0])}},L=()=>{var e,a;return(((null==(e=h.value.first_name)?void 0:e[0])||"")+((null==(a=h.value.last_name)?void 0:a[0])||"")).toUpperCase()},T=t({get:()=>h.value.hourly_rate||0,set:e=>{h.value.hourly_rate=Math.round(e)}}),k=t(()=>{var e;return!!(null==(e=b.staffData)?void 0:e.ID)}),D=t(()=>{var e,a;return!(!(null==(e=h.value.first_name)?void 0:e.trim())||!(null==(a=h.value.last_name)?void 0:a.trim()))});l(()=>h.value.employment_status,(e,a)=>{e===R.TERMINATED&&a!==R.TERMINATED?h.value.end_date||(h.value.end_date=(new Date).toISOString().split("T")[0]):e!==R.TERMINATED&&a===R.TERMINATED&&(h.value.end_date="")}),l(()=>b.staffData,e=>{var a;if(e){const t=e=>{if(!e)return"";const a=new Date(e);return isNaN(a.getTime())||a.getFullYear()<=1?"":a.toISOString().split("T")[0]};let l=t(e.end_date);e.employment_status!==R.TERMINATED||l||(l=(new Date).toISOString().split("T")[0]),h.value={...e,start_date:t(e.start_date),end_date:l,email:(null==(a=e.user)?void 0:a.email)||e.email||"",base_salary:e.compensation_type===V.BASE_PLUS_VARIABLE&&(e.base_salary||e.salary_annualized)||0,salary_annualized:e.compensation_type===V.SALARIED&&e.salary_annualized||0}}else h.value={first_name:"",last_name:"",title:"",email:"",is_active:!0,employment_status:R.ACTIVE,start_date:(new Date).toISOString().split("T")[0],end_date:"",capacity_weekly:40,compensation_type:V.FULLY_VARIABLE,is_salaried:!1,salary_annualized:0,base_salary:0,is_variable_hourly:!0,is_fixed_hourly:!1,hourly_rate:0,entry_pay_eligible_state:"ENTRY_STATE_PAID"}},{immediate:!0});const B=()=>{A("close")},Pe=()=>{if(!D.value)return;const e={...h.value,headshot:w.value,capacity_weekly:Number(h.value.capacity_weekly)||0,salary_annualized:Number(h.value.salary_annualized)||0,base_salary:Number(h.value.base_salary)||0,hourly_rate:Number(h.value.hourly_rate)||0,is_salaried:h.value.compensation_type===V.SALARIED,is_variable_hourly:(h.value.compensation_type===V.FULLY_VARIABLE||h.value.compensation_type===V.BASE_PLUS_VARIABLE)&&!h.value.is_fixed_hourly,is_fixed_hourly:(h.value.compensation_type===V.FULLY_VARIABLE||h.value.compensation_type===V.BASE_PLUS_VARIABLE)&&h.value.is_fixed_hourly};A("save",e)},Ye=()=>{var e;(null==(e=b.staffData)?void 0:e.ID)&&A("delete",b.staffData.ID)};return(e,a)=>{var t,l,_,A;return e.isOpen?(x(),s("div",{key:0,class:"fixed inset-0 z-50 overflow-hidden",onClick:B},[n("div",U,[n("div",C,[n("div",{class:o(["pointer-events-auto w-screen max-w-2xl transform transition duration-300 ease-in-out",e.isOpen?"translate-x-0":"translate-x-full"]),onClick:a[16]||(a[16]=r(()=>{},["stop"]))},[n("div",F,[n("div",M,[n("div",P,[n("h2",Y,d(k.value?"Edit Staff Member":"Add New Staff Member"),1),n("div",{class:"ml-3 flex h-7 items-center"},[n("button",{type:"button",class:"rounded-md bg-gray-50 text-gray-400 hover:text-gray-600 focus:ring-2 focus:ring-sage",onClick:B},a[17]||(a[17]=[n("span",{class:"sr-only"},"Close panel",-1),n("i",{class:"fas fa-times h-6 w-6","aria-hidden":"true"},null,-1)]))])])]),n("div",O,[n("form",{onSubmit:r(Pe,["prevent"]),class:"space-y-6"},[n("div",j,[a[29]||(a[29]=n("h3",{class:"text-base font-semibold leading-6 text-gray-900 mb-4"},"Basic Information",-1)),n("div",z,[n("div",null,[a[18]||(a[18]=n("label",{for:"first_name",class:"block text-sm font-medium leading-6 text-gray-900"},[u(" First Name "),n("span",{class:"text-red-500"},"*")],-1)),m(n("input",{type:"text",name:"first_name",id:"first_name","onUpdate:modelValue":a[0]||(a[0]=e=>h.value.first_name=e),required:"",class:"mt-2 block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-sage sm:text-sm sm:leading-6",placeholder:"John"},null,512),[[c,h.value.first_name]])]),n("div",null,[a[19]||(a[19]=n("label",{for:"last_name",class:"block text-sm font-medium leading-6 text-gray-900"},[u(" Last Name "),n("span",{class:"text-red-500"},"*")],-1)),m(n("input",{type:"text",name:"last_name",id:"last_name","onUpdate:modelValue":a[1]||(a[1]=e=>h.value.last_name=e),required:"",class:"mt-2 block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-sage sm:text-sm sm:leading-6",placeholder:"Doe"},null,512),[[c,h.value.last_name]])])]),n("div",H,[a[20]||(a[20]=n("label",{for:"title",class:"block text-sm font-medium leading-6 text-gray-900"}," Job Title ",-1)),m(n("input",{type:"text",name:"title",id:"title","onUpdate:modelValue":a[2]||(a[2]=e=>h.value.title=e),class:"mt-2 block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-sage sm:text-sm sm:leading-6",placeholder:"Senior Consultant"},null,512),[[c,h.value.title]])]),n("div",W,[a[22]||(a[22]=n("label",{for:"headshot",class:"block text-sm font-medium leading-6 text-gray-900"}," Headshot Photo ",-1)),n("div",$,[I.value||(null==(l=null==(t=b.staffData)?void 0:t.headshot_asset)?void 0:l.url)?(x(),s("div",G,[n("img",{src:I.value||(null==(A=null==(_=b.staffData)?void 0:_.headshot_asset)?void 0:A.url),alt:"Headshot preview",class:"h-16 w-16 rounded-full object-cover border-2 border-gray-200"},null,8,J)])):(x(),s("div",q,[n("span",K,d(L()),1)])),n("div",Q,[n("input",{type:"file",id:"headshot",ref_key:"headshotInput",ref:E,accept:"image/*",onChange:S,class:"block w-full text-sm text-gray-900 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-sage file:text-white hover:file:bg-sage-dark"},null,544),a[21]||(a[21]=n("p",{class:"mt-1 text-xs text-gray-500"},"PNG, JPG, GIF up to 10MB",-1))])])]),n("div",X,[a[23]||(a[23]=n("label",{for:"email",class:"block text-sm font-medium leading-6 text-gray-900"},[u(" Email Address "),n("span",{class:"text-sm text-gray-500"},"(Optional)")],-1)),m(n("input",{type:"email",name:"email",id:"email","onUpdate:modelValue":a[3]||(a[3]=e=>h.value.email=e),class:"mt-2 block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-sage sm:text-sm sm:leading-6",placeholder:"john.doe@snowpackdata.com"},null,512),[[c,h.value.email]]),a[24]||(a[24]=n("p",{class:"mt-1 text-sm text-gray-500"},"If not provided, will auto-generate from first/last name",-1))]),n("div",Z,[a[25]||(a[25]=n("label",{for:"employment_status",class:"block text-sm font-medium leading-6 text-gray-900"}," Employment Status ",-1)),m(n("select",{name:"employment_status",id:"employment_status","onUpdate:modelValue":a[4]||(a[4]=e=>h.value.employment_status=e),class:"mt-2 block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-sage sm:text-sm sm:leading-6"},[n("option",{value:y(R).ACTIVE},"Active (Currently Working)",8,ee),n("option",{value:y(R).INACTIVE},"Inactive (Available Contractor/Consultant)",8,ae),n("option",{value:y(R).TERMINATED},"Terminated (Former Employee)",8,te)],512),[[p,h.value.employment_status]]),a[26]||(a[26]=n("p",{class:"mt-1 text-sm text-gray-500"},"Current employment relationship status",-1))]),n("div",le,[n("label",se,[m(n("input",{type:"checkbox",name:"is_active",id:"is_active","onUpdate:modelValue":a[5]||(a[5]=e=>h.value.is_active=e),class:"h-4 w-4 rounded border-gray-300 text-sage focus:ring-sage"},null,512),[[g,h.value.is_active]]),a[27]||(a[27]=n("span",{class:"ml-2 text-sm font-medium text-gray-900"},"Active in System",-1))]),a[28]||(a[28]=n("p",{class:"mt-1 text-sm text-gray-500"},"Can access the system and log time entries",-1))])]),n("div",ie,[a[35]||(a[35]=n("h3",{class:"text-base font-semibold leading-6 text-gray-900 mb-4"},"Employment Details",-1)),n("div",ne,[n("div",null,[a[30]||(a[30]=n("label",{for:"start_date",class:"block text-sm font-medium leading-6 text-gray-900"}," Start Date ",-1)),m(n("input",{type:"date",name:"start_date",id:"start_date","onUpdate:modelValue":a[6]||(a[6]=e=>h.value.start_date=e),class:"mt-2 block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-sage sm:text-sm sm:leading-6"},null,512),[[c,h.value.start_date]])]),h.value.employment_status===y(R).TERMINATED?(x(),s("div",re,[a[31]||(a[31]=n("label",{for:"end_date",class:"block text-sm font-medium leading-6 text-gray-900"}," End Date ",-1)),m(n("input",{type:"date",name:"end_date",id:"end_date","onUpdate:modelValue":a[7]||(a[7]=e=>h.value.end_date=e),class:"mt-2 block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-sage sm:text-sm sm:leading-6"},null,512),[[c,h.value.end_date]]),a[32]||(a[32]=n("p",{class:"mt-1 text-sm text-gray-500"},"Date when employment ended",-1))])):i("",!0)]),n("div",oe,[a[33]||(a[33]=n("label",{for:"capacity_weekly",class:"block text-sm font-medium leading-6 text-gray-900"}," Weekly Capacity (Hours) ",-1)),m(n("input",{type:"number",name:"capacity_weekly",id:"capacity_weekly","onUpdate:modelValue":a[8]||(a[8]=e=>h.value.capacity_weekly=e),min:"0",max:"80",class:"mt-2 block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-sage sm:text-sm sm:leading-6",placeholder:"40"},null,512),[[c,h.value.capacity_weekly]]),a[34]||(a[34]=n("p",{class:"mt-1 text-sm text-gray-500"},"Available hours per week for assignments",-1))])]),n("div",de,[a[44]||(a[44]=n("h3",{class:"text-base font-semibold leading-6 text-gray-900 mb-4"},"Compensation",-1)),n("div",me,[a[36]||(a[36]=n("label",{for:"compensation_type",class:"block text-sm font-medium leading-6 text-gray-900"}," Compensation Model ",-1)),m(n("select",{name:"compensation_type",id:"compensation_type","onUpdate:modelValue":a[9]||(a[9]=e=>h.value.compensation_type=e),class:"mt-2 block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-sage sm:text-sm sm:leading-6"},[n("option",{value:y(V).FULLY_VARIABLE},"Fully Variable ("+d(y(N)[y(V).FULLY_VARIABLE])+")",9,ue),n("option",{value:y(V).SALARIED},"Salaried ("+d(y(N)[y(V).SALARIED])+")",9,ce),n("option",{value:y(V).BASE_PLUS_VARIABLE},"Base + Variable ("+d(y(N)[y(V).BASE_PLUS_VARIABLE])+")",9,pe)],512),[[p,h.value.compensation_type]]),a[37]||(a[37]=n("p",{class:"mt-1 text-sm text-gray-500"},"How this person's compensation is structured",-1))]),n("div",ye,[h.value.compensation_type===y(V).SALARIED?(x(),s("div",ge,[a[38]||(a[38]=n("label",{for:"salary_annualized",class:"block text-sm font-medium leading-6 text-gray-900"}," Annual Salary ($) ",-1)),m(n("input",{type:"number",name:"salary_annualized",id:"salary_annualized","onUpdate:modelValue":a[10]||(a[10]=e=>h.value.salary_annualized=e),min:"0",class:"mt-2 block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-sage sm:text-sm sm:leading-6",placeholder:"75000"},null,512),[[c,h.value.salary_annualized]])])):i("",!0),h.value.compensation_type===y(V).BASE_PLUS_VARIABLE?(x(),s("div",fe,[a[39]||(a[39]=n("label",{for:"base_salary",class:"block text-sm font-medium leading-6 text-gray-900"}," Base Salary ($) ",-1)),m(n("input",{type:"number",name:"base_salary",id:"base_salary","onUpdate:modelValue":a[11]||(a[11]=e=>h.value.base_salary=e),min:"0",class:"mt-2 block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-sage sm:text-sm sm:leading-6",placeholder:"50000"},null,512),[[c,h.value.base_salary]]),a[40]||(a[40]=n("p",{class:"mt-1 text-sm text-gray-500"},"Base annual salary before variable bonuses",-1))])):i("",!0),h.value.compensation_type===y(V).FULLY_VARIABLE||h.value.compensation_type===y(V).BASE_PLUS_VARIABLE?(x(),s("div",ve,[n("div",xe,[n("label",_e,[a[41]||(a[41]=u(" Hourly Rate Structure ")),h.value.compensation_type===y(V).BASE_PLUS_VARIABLE?(x(),s("span",be,"(for billable component)")):i("",!0)]),n("div",Ae,[n("label",he,[m(n("input",{type:"radio",name:"hourly_rate_type",value:!1,"onUpdate:modelValue":a[12]||(a[12]=e=>h.value.is_fixed_hourly=e),class:"h-4 w-4 border-gray-300 text-sage focus:ring-sage"},null,512),[[f,h.value.is_fixed_hourly]]),a[42]||(a[42]=n("span",{class:"ml-2 text-sm text-gray-700"},"Variable by Project (rate changes per project)",-1))]),n("label",Ee,[m(n("input",{type:"radio",name:"hourly_rate_type",value:!0,"onUpdate:modelValue":a[13]||(a[13]=e=>h.value.is_fixed_hourly=e),class:"h-4 w-4 border-gray-300 text-sage focus:ring-sage"},null,512),[[f,h.value.is_fixed_hourly]]),a[43]||(a[43]=n("span",{class:"ml-2 text-sm text-gray-700"},"Fixed Hourly Rate (same rate for all projects)",-1))])])]),h.value.is_fixed_hourly?(x(),s("div",we,[n("label",Ie,[h.value.compensation_type===y(V).FULLY_VARIABLE?(x(),s("span",Se,"Fixed Hourly Rate ($)")):(x(),s("span",Le,"Fixed Billable Rate ($)"))]),m(n("input",{type:"number",name:"hourly_rate",id:"hourly_rate","onUpdate:modelValue":a[14]||(a[14]=e=>T.value=e),min:"0",step:"0.01",class:"mt-2 block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-sage sm:text-sm sm:leading-6",placeholder:"50.00"},null,512),[[c,T.value]]),n("p",Te,[h.value.compensation_type===y(V).FULLY_VARIABLE?(x(),s("span",ke,"Fixed rate used for all projects")):(x(),s("span",Re,"Fixed billable rate used for all projects (in addition to base salary)"))])])):i("",!0),h.value.is_fixed_hourly?i("",!0):(x(),s("div",Ve,[n("p",De,[h.value.compensation_type===y(V).FULLY_VARIABLE?(x(),s("span",Be,"Hourly rates will be set per project/billing code")):(x(),s("span",Ne,"Billable rates will be set per project/billing code (in addition to base salary)"))])]))])):i("",!0)])]),n("div",null,[a[48]||(a[48]=n("h3",{class:"text-base font-semibold leading-6 text-gray-900 mb-4"},"Advanced Settings",-1)),n("div",null,[a[46]||(a[46]=n("label",{for:"entry_pay_eligible_state",class:"block text-sm font-medium leading-6 text-gray-900"}," Pay Eligible State ",-1)),m(n("select",{name:"entry_pay_eligible_state",id:"entry_pay_eligible_state","onUpdate:modelValue":a[15]||(a[15]=e=>h.value.entry_pay_eligible_state=e),class:"mt-2 block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-sage sm:text-sm sm:leading-6"},a[45]||(a[45]=[v('<option value="" data-v-f0e444ed>Select when employee gets paid...</option><option value="ENTRY_STATE_DRAFT" data-v-f0e444ed>When entries are in Draft</option><option value="ENTRY_STATE_APPROVED" data-v-f0e444ed>When entries are Approved</option><option value="ENTRY_STATE_SENT" data-v-f0e444ed>When entries are Sent to Client</option><option value="ENTRY_STATE_PAID" data-v-f0e444ed>When entries are Paid by Client</option>',5)]),512),[[p,h.value.entry_pay_eligible_state]]),a[47]||(a[47]=n("p",{class:"mt-1 text-sm text-gray-500"}," Defines at what stage of the billing process this employee becomes eligible for payment ",-1))])])],32)]),n("div",Ue,[n("div",Ce,[n("div",null,[k.value?(x(),s("button",{key:0,type:"button",onClick:Ye,class:"rounded-md bg-red-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-red-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-red-600"}," Delete Staff Member ")):i("",!0)]),n("div",Fe,[n("button",{type:"button",onClick:B,class:"rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50"}," Cancel "),n("button",{type:"button",onClick:Pe,disabled:!D.value,class:"rounded-md bg-sage px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-sage-dark focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sage disabled:opacity-50 disabled:cursor-not-allowed"},d(k.value?"Update":"Create")+" Staff Member ",9,Me)])])])])],2)])])])):i("",!0)}}}),[["__scopeId","data-v-f0e444ed"]]),Ye={class:"px-4 py-6 sm:px-6 lg:px-8"},Oe={class:"sm:flex sm:items-center"},je={class:"mt-4 sm:ml-16 sm:mt-0 sm:flex-none"},ze={class:"mt-6 flex gap-4"},He={class:"flex items-center gap-2"},We=["value"],$e=["value"],Ge=["value"],Je={class:"mt-8 flow-root"},qe={class:"-mx-4 -my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},Ke={class:"inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8"},Qe={class:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg"},Xe={class:"min-w-full divide-y divide-gray-300"},Ze={class:"divide-y divide-gray-200 bg-white"},ea={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm sm:pl-6"},aa={class:"flex items-center"},ta={class:"ml-3"},la={class:"font-medium text-gray-900"},sa={key:0,class:"text-gray-500"},ia={class:"whitespace-nowrap px-3 py-4 text-sm"},na={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-900"},ra={class:"whitespace-nowrap px-3 py-4 text-sm"},oa={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-900"},da={class:"flex items-center"},ma={class:"whitespace-nowrap px-3 py-4 text-sm"},ua={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6"},ca=["onClick"],pa={class:"sr-only"},ya={key:0},ga={colspan:"7",class:"py-12 text-center text-sm text-gray-500"},fa={class:"flex flex-col items-center"},va={class:"text-gray-500 mb-4"},xa=_(e({__name:"StaffView",setup(e){const l=a([]),r=a(!1),c=a(null),g=a(!1),f=a(null),v=a("all"),_=t(()=>"all"===v.value?l.value:l.value.filter(e=>(e.employment_status||R.ACTIVE)===v.value)),N=async()=>{try{const e=await w(),a=(null==e?void 0:e.map(e=>({...e,employment_status:e.employment_status||U(e.is_active),compensation_type:e.compensation_type||P(e.is_salaried)})))||[];l.value=a}catch(e){console.error("Failed to load staff:",e),l.value=[]}},U=e=>e?R.ACTIVE:R.TERMINATED;b(N);const C=e=>({ADMIN:"Administrator",STAFF:"Staff",CLIENT:"Client"}[e]||e),F=e=>{if(!e)return"Not set";return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})},M=e=>D[e]||e,P=e=>e?V.SALARIED:V.FULLY_VARIABLE,Y=e=>B[e]||e,O=e=>({[V.FULLY_VARIABLE]:"fa-chart-line",[V.SALARIED]:"fa-calendar-alt",[V.BASE_PLUS_VARIABLE]:"fa-plus-circle"}[e]||"fa-dollar-sign"),j=(e=null)=>{c.value=e,r.value=!0},z=()=>{r.value=!1,c.value=null},H=async e=>{try{c.value&&c.value.ID?await I(c.value.ID,e):await S(e),await N(),z()}catch(a){console.error("Failed to save staff member:",a),alert("Failed to save staff member. Please try again.")}},W=async()=>{if(f.value&&f.value.ID)try{await L(f.value.ID),await N(),g.value=!1,f.value=null,z()}catch(e){console.error("Failed to delete staff member:",e)}},$=e=>{const a=l.value.find(a=>a.ID===e);a&&(f.value=a,g.value=!0)};return(e,a)=>(x(),s("div",Ye,[n("div",Oe,[a[3]||(a[3]=n("div",{class:"sm:flex-auto"},[n("h1",{class:"text-base font-semibold leading-6 text-gray-900"},"Staff Management"),n("p",{class:"mt-2 text-sm text-gray-700"}," Manage your team members, their roles, capacity, and employment status. ")],-1)),n("div",je,[n("button",{type:"button",onClick:a[0]||(a[0]=e=>j()),class:"block rounded-md bg-sage px-3 py-2 text-center text-sm font-semibold text-white shadow-sm hover:bg-sage-dark focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sage"}," Add New Staff Member ")])]),n("div",ze,[n("div",He,[a[5]||(a[5]=n("label",{for:"employment-status-filter",class:"text-sm font-medium text-gray-700"},"Filter by Status:",-1)),m(n("select",{id:"employment-status-filter","onUpdate:modelValue":a[1]||(a[1]=e=>v.value=e),class:"rounded-md border-gray-300 py-1.5 text-sm focus:border-sage focus:ring-sage"},[a[4]||(a[4]=n("option",{value:"all"},"All Staff",-1)),n("option",{value:y(R).ACTIVE},"Active",8,We),n("option",{value:y(R).INACTIVE},"Inactive",8,$e),n("option",{value:y(R).TERMINATED},"Terminated",8,Ge)],512),[[p,v.value]])])]),n("div",Je,[n("div",qe,[n("div",Ke,[n("div",Qe,[n("table",Xe,[a[10]||(a[10]=n("thead",{class:"bg-gray-50"},[n("tr",null,[n("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6"},"Name"),n("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},"Status"),n("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},"Title"),n("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},"Role"),n("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},"Capacity"),n("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},"Employment"),n("th",{scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-6"},[n("span",{class:"sr-only"},"Edit")])])],-1)),n("tbody",Ze,[(x(!0),s(h,null,E(_.value,e=>{var t,l,r,m,c;return x(),s("tr",{key:e.ID,class:"hover:bg-gray-50"},[n("td",ea,[n("div",aa,[A(k,{employee:e,size:"sm"},null,8,["employee"]),n("div",ta,[n("div",la,d(e.first_name)+" "+d(e.last_name),1),e.start_date?(x(),s("div",sa,"Started "+d(F(e.start_date)),1)):i("",!0)])])]),n("td",ia,[n("span",{class:o([(c=e.employment_status||"in-seat",{[R.ACTIVE]:"bg-green-50 text-green-700 ring-green-600/20",[R.INACTIVE]:"bg-yellow-50 text-yellow-700 ring-yellow-600/20",[R.TERMINATED]:"bg-red-50 text-red-700 ring-red-600/20"}[c]||"bg-gray-50 text-gray-700 ring-gray-600/20"),"inline-flex items-center rounded-md px-2 py-1 text-xs font-medium ring-1 ring-inset"])},d(M(e.employment_status||"in-seat")),3)]),n("td",na,d(e.title||"â€”"),1),n("td",ra,[n("span",{class:o([(m=(null==(t=e.user)?void 0:t.role)||"STAFF",{ADMIN:"bg-red-50 text-red-700 ring-red-600/20",STAFF:"bg-blue-50 text-blue-700 ring-blue-600/20",CLIENT:"bg-green-50 text-green-700 ring-green-600/20"}[m]||"bg-gray-50 text-gray-700 ring-gray-600/20"),"inline-flex items-center rounded-md px-2 py-1 text-xs font-medium ring-1 ring-inset"])},d(C((null==(l=e.user)?void 0:l.role)||"STAFF")),3)]),n("td",oa,[n("div",da,[a[6]||(a[6]=n("i",{class:"fas fa-clock mr-1.5 text-gray-400"},null,-1)),u(" "+d(e.capacity_weekly||0)+"h/week ",1)])]),n("td",ma,[n("span",{class:o([(r=e.compensation_type||P(e.is_salaried),{[V.FULLY_VARIABLE]:"bg-purple-50 text-purple-700 ring-purple-600/20",[V.SALARIED]:"bg-blue-50 text-blue-700 ring-blue-600/20",[V.BASE_PLUS_VARIABLE]:"bg-indigo-50 text-indigo-700 ring-indigo-600/20"}[r]||"bg-gray-50 text-gray-700 ring-gray-600/20"),"inline-flex items-center rounded-md px-2 py-1 text-xs font-medium ring-1 ring-inset"])},[n("i",{class:o(["fas mr-1.5",O(e.compensation_type||P(e.is_salaried))])},null,2),u(" "+d(Y(e.compensation_type||P(e.is_salaried))),1)],2)]),n("td",ua,[n("button",{onClick:a=>j(e),class:"text-sage hover:text-sage-dark"},[a[7]||(a[7]=u(" Edit")),n("span",pa,", "+d(e.first_name)+" "+d(e.last_name),1)],8,ca)])])}),128)),0===_.value.length?(x(),s("tr",ya,[n("td",ga,[n("div",fa,[a[8]||(a[8]=n("i",{class:"fas fa-users text-4xl text-gray-300 mb-4"},null,-1)),a[9]||(a[9]=n("p",{class:"text-lg font-medium text-gray-900 mb-2"},"No staff members found",-1)),n("p",va,d("all"===v.value?'Click "Add New Staff Member" to add one':`No ${M(v.value)} staff members found`),1)])])])):i("",!0)])])])])])]),A(Pe,{"is-open":r.value,"staff-data":c.value,onClose:z,onSave:H,onDelete:$},null,8,["is-open","staff-data"]),A(T,{show:g.value,title:"Delete Staff Member",message:"Are you sure you want to delete this staff member? This action cannot be undone.",onConfirm:W,onCancel:a[2]||(a[2]=e=>g.value=!1)},null,8,["show"])]))}}),[["__scopeId","data-v-c0d0cf28"]]);export{xa as default};
