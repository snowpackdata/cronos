import{c as e,o as t,a as l,b as a,u as n,s as o,w as s,d as r,t as i,r as u,e as d,f as c,g as v,h as m,i as p,F as f,j as h,k as g,n as b,l as y,p as x,m as w,q as S,v as _,x as T,y as k,z as C,A as I,_ as E,B as O,C as R,D,E as M,G as A,H as N,I as z,J as P,K as j}from"./index-2uCPEpPG.js";import"./index-8V-xrl-L.js";import{o as F,a as L,i as $,u as V,w as B,t as U,b as H,A as Y,f as W,E as Z,c as q,T as K,d as J,N as G,e as X,g as Q,l as ee,n as te,O as le,k as ae,S as ne,h as oe,G as se,V as re,Y as ie}from"./transition-CMIuM6C3.js";import{r as ue}from"./XMarkIcon-Bml7Cvcl.js";import{f as de}from"./dateUtils-kXVih0JO.js";import{g as ce,a as ve,b as me,c as pe,u as fe,d as he}from"./timesheet-CKxTTCGp.js";function ge(a,n){return t(),e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"})])}function be(a,n){return t(),e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[l("path",{"fill-rule":"evenodd",d:"M16.704 4.153a.75.75 0 0 1 .143 1.052l-8 10.5a.75.75 0 0 1-1.127.075l-4.5-4.5a.75.75 0 0 1 1.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 0 1 1.05-.143Z","clip-rule":"evenodd"})])}function ye(a,n){return t(),e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[l("path",{"fill-rule":"evenodd",d:"M10.53 3.47a.75.75 0 0 0-1.06 0L6.22 6.72a.75.75 0 0 0 1.06 1.06L10 5.06l2.72 2.72a.75.75 0 1 0 1.06-1.06l-3.25-3.25Zm-4.31 9.81 3.25 3.25a.75.75 0 0 0 1.06 0l3.25-3.25a.75.75 0 1 0-1.06-1.06L10 14.94l-2.72-2.72a.75.75 0 0 0-1.06 1.06Z","clip-rule":"evenodd"})])}function xe(a,n){return t(),e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[l("path",{"fill-rule":"evenodd",d:"M8.485 2.495c.673-1.167 2.357-1.167 3.03 0l6.28 10.875c.673 1.167-.17 2.625-1.516 2.625H3.72c-1.347 0-2.189-1.458-1.515-2.625L8.485 2.495ZM10 5a.75.75 0 0 1 .75.75v3.5a.75.75 0 0 1-1.5 0v-3.5A.75.75 0 0 1 10 5Zm0 9a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z","clip-rule":"evenodd"})])}function we(a,n){return t(),e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[l("path",{d:"M11 5a3 3 0 1 1-6 0 3 3 0 0 1 6 0ZM2.046 15.253c-.058.468.172.92.57 1.175A9.953 9.953 0 0 0 8 18c1.982 0 3.83-.578 5.384-1.573.398-.254.628-.707.57-1.175a6.001 6.001 0 0 0-11.908 0ZM12.75 7.75a.75.75 0 0 0 0 1.5h5.5a.75.75 0 0 0 0-1.5h-5.5Z"})])}function Se(a,n){return t(),e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[l("path",{d:"M10 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6ZM3.465 14.493a1.23 1.23 0 0 0 .41 1.412A9.957 9.957 0 0 0 10 18c2.31 0 4.438-.784 6.131-2.1.43-.333.604-.903.408-1.41a7.002 7.002 0 0 0-13.074.003Z"})])}function _e(e,t,l){let a,n=l.initialDeps??[];return()=>{var o,s,r,i;let u;l.key&&(null==(o=l.debug)?void 0:o.call(l))&&(u=Date.now());const d=e();if(!(d.length!==n.length||d.some((e,t)=>n[t]!==e)))return a;let c;if(n=d,l.key&&(null==(s=l.debug)?void 0:s.call(l))&&(c=Date.now()),a=t(...d),l.key&&(null==(r=l.debug)?void 0:r.call(l))){const e=Math.round(100*(Date.now()-u))/100,t=Math.round(100*(Date.now()-c))/100,a=t/16,n=(e,t)=>{for(e=String(e);e.length<t;)e=" "+e;return e};console.info(`%câ± ${n(t,5)} /${n(e,5)} ms`,`\n            font-size: .6rem;\n            font-weight: bold;\n            color: hsl(${Math.max(0,Math.min(120-120*a,120))}deg 100% 31%);`,null==l?void 0:l.key)}return null==(i=null==l?void 0:l.onChange)||i.call(l,a),a}}function Te(e,t){if(void 0===e)throw new Error("Unexpected undefined");return e}const ke=(e,t,l)=>{let a;return function(...n){e.clearTimeout(a),a=e.setTimeout(()=>t.apply(this,n),l)}},Ce=e=>e,Ie=e=>{const t=Math.max(e.startIndex-e.overscan,0),l=Math.min(e.endIndex+e.overscan,e.count-1),a=[];for(let n=t;n<=l;n++)a.push(n);return a},Ee=(e,t)=>{const l=e.scrollElement;if(!l)return;const a=e.targetWindow;if(!a)return;const n=e=>{const{width:l,height:a}=e;t({width:Math.round(l),height:Math.round(a)})};if(n(l.getBoundingClientRect()),!a.ResizeObserver)return()=>{};const o=new a.ResizeObserver(t=>{const a=()=>{const e=t[0];if(null==e?void 0:e.borderBoxSize){const t=e.borderBoxSize[0];if(t)return void n({width:t.inlineSize,height:t.blockSize})}n(l.getBoundingClientRect())};e.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(a):a()});return o.observe(l,{box:"border-box"}),()=>{o.unobserve(l)}},Oe={passive:!0},Re="undefined"==typeof window||"onscrollend"in window,De=(e,t)=>{const l=e.scrollElement;if(!l)return;const a=e.targetWindow;if(!a)return;let n=0;const o=e.options.useScrollendEvent&&Re?()=>{}:ke(a,()=>{t(n,!1)},e.options.isScrollingResetDelay),s=a=>()=>{const{horizontal:s,isRtl:r}=e.options;n=s?l.scrollLeft*(r?-1:1):l.scrollTop,o(),t(n,a)},r=s(!0),i=s(!1);i(),l.addEventListener("scroll",r,Oe);const u=e.options.useScrollendEvent&&Re;return u&&l.addEventListener("scrollend",i,Oe),()=>{l.removeEventListener("scroll",r),u&&l.removeEventListener("scrollend",i)}},Me=(e,t,l)=>{if(null==t?void 0:t.borderBoxSize){const e=t.borderBoxSize[0];if(e){return Math.round(e[l.options.horizontal?"inlineSize":"blockSize"])}}return Math.round(e.getBoundingClientRect()[l.options.horizontal?"width":"height"])},Ae=(e,{adjustments:t=0,behavior:l},a)=>{var n,o;const s=e+t;null==(o=null==(n=a.scrollElement)?void 0:n.scrollTo)||o.call(n,{[a.options.horizontal?"left":"top"]:s,behavior:l})};class Ne{constructor(e){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let e=null;const t=()=>e||(this.targetWindow&&this.targetWindow.ResizeObserver?e=new this.targetWindow.ResizeObserver(e=>{e.forEach(e=>{const t=()=>{this._measureElement(e.target,e)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(t):t()})}):null);return{disconnect:()=>{var l;null==(l=t())||l.disconnect(),e=null},observe:e=>{var l;return null==(l=t())?void 0:l.observe(e,{box:"border-box"})},unobserve:e=>{var l;return null==(l=t())?void 0:l.unobserve(e)}}})(),this.range=null,this.setOptions=e=>{Object.entries(e).forEach(([t,l])=>{void 0===l&&delete e[t]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:Ce,rangeExtractor:Ie,onChange:()=>{},measureElement:Me,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!0,useAnimationFrameWithResizeObserver:!1,...e}},this.notify=e=>{var t,l;null==(l=(t=this.options).onChange)||l.call(t,this,e)},this.maybeNotify=_e(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),e=>{this.notify(e)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(e=>e()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var e;const t=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==t){if(this.cleanup(),!t)return void this.maybeNotify();this.scrollElement=t,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=(null==(e=this.scrollElement)?void 0:e.window)??null,this.elementsCache.forEach(e=>{this.observer.observe(e)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,e=>{this.scrollRect=e,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(e,t)=>{this.scrollAdjustments=0,this.scrollDirection=t?this.getScrollOffset()<e?"forward":"backward":null,this.scrollOffset=e,this.isScrolling=t,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??("function"==typeof this.options.initialOffset?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(e,t)=>{const l=new Map,a=new Map;for(let n=t-1;n>=0;n--){const t=e[n];if(l.has(t.lane))continue;const o=a.get(t.lane);if(null==o||t.end>o.end?a.set(t.lane,t):t.end<o.end&&l.set(t.lane,!0),l.size===this.options.lanes)break}return a.size===this.options.lanes?Array.from(a.values()).sort((e,t)=>e.end===t.end?e.index-t.index:e.end-t.end)[0]:void 0},this.getMeasurementOptions=_e(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(e,t,l,a,n)=>(this.pendingMeasuredCacheIndexes=[],{count:e,paddingStart:t,scrollMargin:l,getItemKey:a,enabled:n}),{key:!1}),this.getMeasurements=_e(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:e,paddingStart:t,scrollMargin:l,getItemKey:a,enabled:n},o)=>{if(!n)return this.measurementsCache=[],this.itemSizeCache.clear(),[];0===this.measurementsCache.length&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(e=>{this.itemSizeCache.set(e.key,e.size)}));const s=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const r=this.measurementsCache.slice(0,s);for(let i=s;i<e;i++){const e=a(i),n=1===this.options.lanes?r[i-1]:this.getFurthestMeasurement(r,i),s=n?n.end+this.options.gap:t+l,u=o.get(e),d="number"==typeof u?u:this.options.estimateSize(i),c=s+d,v=n?n.lane:i%this.options.lanes;r[i]={index:i,start:s,size:d,end:c,key:e,lane:v}}return this.measurementsCache=r,r},{key:!1,debug:()=>this.options.debug}),this.calculateRange=_e(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(e,t,l,a)=>this.range=e.length>0&&t>0?function({measurements:e,outerSize:t,scrollOffset:l,lanes:a}){const n=e.length-1,o=t=>e[t].start;let s=ze(0,n,o,l),r=s;for(;r<n&&e[r].end<l+t;)r++;a>1&&(s=Math.max(0,s-s%a),r=Math.min(n,r+(a-1-r%a)));return{startIndex:s,endIndex:r}}({measurements:e,outerSize:t,scrollOffset:l,lanes:a}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=_e(()=>{let e=null,t=null;const l=this.calculateRange();return l&&(e=l.startIndex,t=l.endIndex),[this.options.rangeExtractor,this.options.overscan,this.options.count,e,t]},(e,t,l,a,n)=>null===a||null===n?[]:e({startIndex:a,endIndex:n,overscan:t,count:l}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=e=>{const t=this.options.indexAttribute,l=e.getAttribute(t);return l?parseInt(l,10):(console.warn(`Missing attribute name '${t}={index}' on measured element.`),-1)},this._measureElement=(e,t)=>{const l=this.indexFromElement(e),a=this.measurementsCache[l];if(!a)return;const n=a.key,o=this.elementsCache.get(n);o!==e&&(o&&this.observer.unobserve(o),this.observer.observe(e),this.elementsCache.set(n,e)),e.isConnected&&this.resizeItem(l,this.options.measureElement(e,t,this))},this.resizeItem=(e,t)=>{const l=this.measurementsCache[e];if(!l)return;const a=t-(this.itemSizeCache.get(l.key)??l.size);0!==a&&((void 0!==this.shouldAdjustScrollPositionOnItemSizeChange?this.shouldAdjustScrollPositionOnItemSizeChange(l,a,this):l.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=a,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(l.index),this.itemSizeCache=new Map(this.itemSizeCache.set(l.key,t)),this.notify(!1))},this.measureElement=e=>{e?this._measureElement(e,void 0):this.elementsCache.forEach((e,t)=>{e.isConnected||(this.observer.unobserve(e),this.elementsCache.delete(t))})},this.getVirtualItems=_e(()=>[this.getVirtualIndexes(),this.getMeasurements()],(e,t)=>{const l=[];for(let a=0,n=e.length;a<n;a++){const n=t[e[a]];l.push(n)}return l},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=e=>{const t=this.getMeasurements();if(0!==t.length)return Te(t[ze(0,t.length-1,e=>Te(t[e]).start,e)])},this.getOffsetForAlignment=(e,t,l=0)=>{const a=this.getSize(),n=this.getScrollOffset();"auto"===t&&(t=e>=n+a?"end":"start"),"center"===t?e+=(l-a)/2:"end"===t&&(e-=a);const o=this.options.horizontal?"scrollWidth":"scrollHeight",s=(this.scrollElement?"document"in this.scrollElement?this.scrollElement.document.documentElement[o]:this.scrollElement[o]:0)-a;return Math.max(Math.min(s,e),0)},this.getOffsetForIndex=(e,t="auto")=>{e=Math.max(0,Math.min(e,this.options.count-1));const l=this.measurementsCache[e];if(!l)return;const a=this.getSize(),n=this.getScrollOffset();if("auto"===t)if(l.end>=n+a-this.options.scrollPaddingEnd)t="end";else{if(!(l.start<=n+this.options.scrollPaddingStart))return[n,t];t="start"}const o="end"===t?l.end+this.options.scrollPaddingEnd:l.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(o,t,l.size),t]},this.isDynamicMode=()=>this.elementsCache.size>0,this.cancelScrollToIndex=()=>{null!==this.scrollToIndexTimeoutId&&this.targetWindow&&(this.targetWindow.clearTimeout(this.scrollToIndexTimeoutId),this.scrollToIndexTimeoutId=null)},this.scrollToOffset=(e,{align:t="start",behavior:l}={})=>{this.cancelScrollToIndex(),"smooth"===l&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(e,t),{adjustments:void 0,behavior:l})},this.scrollToIndex=(e,{align:t="auto",behavior:l}={})=>{e=Math.max(0,Math.min(e,this.options.count-1)),this.cancelScrollToIndex(),"smooth"===l&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");const a=this.getOffsetForIndex(e,t);if(!a)return;const[n,o]=a;this._scrollToOffset(n,{adjustments:void 0,behavior:l}),"smooth"!==l&&this.isDynamicMode()&&this.targetWindow&&(this.scrollToIndexTimeoutId=this.targetWindow.setTimeout(()=>{this.scrollToIndexTimeoutId=null;if(this.elementsCache.has(this.options.getItemKey(e))){const[n]=Te(this.getOffsetForIndex(e,o));t=n,a=this.getScrollOffset(),Math.abs(t-a)<1||this.scrollToIndex(e,{align:o,behavior:l})}else this.scrollToIndex(e,{align:o,behavior:l});var t,a}))},this.scrollBy=(e,{behavior:t}={})=>{this.cancelScrollToIndex(),"smooth"===t&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+e,{adjustments:void 0,behavior:t})},this.getTotalSize=()=>{var e;const t=this.getMeasurements();let l;return l=0===t.length?this.options.paddingStart:1===this.options.lanes?(null==(e=t[t.length-1])?void 0:e.end)??0:Math.max(...t.slice(-this.options.lanes).map(e=>e.end)),Math.max(l-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(e,{adjustments:t,behavior:l})=>{this.options.scrollToFn(e,{behavior:l,adjustments:t},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(e)}}const ze=(e,t,l,a)=>{for(;e<=t;){const n=(e+t)/2|0,o=l(n);if(o<a)e=n+1;else{if(!(o>a))return n;t=n-1}}return e>0?e-1:0};function Pe(e){return function(e){const t=new Ne(n(e)),l=o(t),a=t._didMount();return s(()=>n(e).getScrollElement(),e=>{e&&t._willUpdate()},{immediate:!0}),s(()=>n(e),e=>{t.setOptions({...e,onChange:(t,a)=>{var n;i(l),null==(n=e.onChange)||n.call(e,t,a)}}),t._willUpdate(),i(l)},{immediate:!0}),r(a),l}(a(()=>({observeElementRect:Ee,observeElementOffset:De,scrollToFn:Ae,...n(e)})))}function je(e,t,l){let n=u(null==l?void 0:l.value),o=a(()=>void 0!==e.value);return[a(()=>o.value?e.value:n.value),function(e){return o.value||(n.value=e),null==t?void 0:t(e)}]}function Fe(){let e=function(){let e=F();return d(()=>e.dispose()),e}();return t=>{e.dispose(),e.nextFrame(t)}}function Le(e,t){if(e)return e;let l=null!=t?t:"button";return"string"==typeof l&&"button"===l.toLowerCase()?"button":void 0}function $e(e,t){let l=u(Le(e.value.type,e.value.as));return c(()=>{l.value=Le(e.value.type,e.value.as)}),v(()=>{var e;l.value||L(t)&&L(t)instanceof HTMLButtonElement&&(null==(e=L(t))||!e.hasAttribute("type"))&&(l.value="button")}),l}function Ve(e){return[e.screenX,e.screenY]}var Be,Ue=((Be=Ue||{})[Be.Left=0]="Left",Be[Be.Right=2]="Right",Be);var He,Ye=((He=Ye||{})[He.First=0]="First",He[He.Previous=1]="Previous",He[He.Next=2]="Next",He[He.Last=3]="Last",He[He.Specific=4]="Specific",He[He.Nothing=5]="Nothing",He);function We(e,t){let l=t.resolveItems();if(l.length<=0)return null;let a=t.resolveActiveIndex(),n=null!=a?a:-1;switch(e.focus){case 0:for(let e=0;e<l.length;++e)if(!t.resolveDisabled(l[e],e,l))return e;return a;case 1:-1===n&&(n=l.length);for(let e=n-1;e>=0;--e)if(!t.resolveDisabled(l[e],e,l))return e;return a;case 2:for(let e=n+1;e<l.length;++e)if(!t.resolveDisabled(l[e],e,l))return e;return a;case 3:for(let e=l.length-1;e>=0;--e)if(!t.resolveDisabled(l[e],e,l))return e;return a;case 4:for(let a=0;a<l.length;++a)if(t.resolveId(l[a],a,l)===e.id)return a;return a;case 5:return null;default:!function(e){throw new Error("Unexpected object: "+e)}(e)}}function Ze(e={},t=null,l=[]){for(let[a,n]of Object.entries(e))Ke(l,qe(t,a),n);return l}function qe(e,t){return e?e+"["+t+"]":t}function Ke(e,t,l){if(Array.isArray(l))for(let[a,n]of l.entries())Ke(e,qe(t,a.toString()),n);else l instanceof Date?e.push([t,l.toISOString()]):"boolean"==typeof l?e.push([t,l?"1":"0"]):"string"==typeof l?e.push([t,l]):"number"==typeof l?e.push([t,`${l}`]):null==l?e.push([t,""]):Ze(l,t,e)}var Je={};var Ge,Xe,Qe=((Xe=Qe||{})[Xe.Open=0]="Open",Xe[Xe.Closed=1]="Closed",Xe),et=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(et||{}),tt=((Ge=tt||{})[Ge.Pointer=0]="Pointer",Ge[Ge.Focus=1]="Focus",Ge[Ge.Other=2]="Other",Ge);let lt=Symbol("ComboboxContext");function at(e){let t=y(lt,null);if(null===t){let t=new Error(`<${e} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,at),t}return t}let nt=Symbol("VirtualContext"),ot=m({name:"VirtualProvider",setup(e,{slots:t}){let l=at("VirtualProvider"),n=a(()=>{let e=L(l.optionsRef);if(!e)return{start:0,end:0};let t=window.getComputedStyle(e);return{start:parseFloat(t.paddingBlockStart||t.paddingTop),end:parseFloat(t.paddingBlockEnd||t.paddingBottom)}}),o=Pe(a(()=>({scrollPaddingStart:n.value.start,scrollPaddingEnd:n.value.end,count:l.virtual.value.options.length,estimateSize:()=>40,getScrollElement:()=>L(l.optionsRef),overscan:12}))),r=a(()=>{var e;return null==(e=l.virtual.value)?void 0:e.options}),i=u(0);return s([r],()=>{i.value+=1}),x(nt,l.virtual.value?o:null),()=>[p("div",{style:{position:"relative",width:"100%",height:`${o.value.getTotalSize()}px`},ref:e=>{if(e){if("undefined"!=typeof process&&void 0!==Je.JEST_WORKER_ID||0===l.activationTrigger.value)return;null!==l.activeOptionIndex.value&&l.virtual.value.options.length>l.activeOptionIndex.value&&o.value.scrollToIndex(l.activeOptionIndex.value)}}},o.value.getVirtualItems().map(e=>w(t.default({option:l.virtual.value.options[e.index],open:0===l.comboboxState.value})[0],{key:`${i.value}-${e.index}`,"data-index":e.index,"aria-setsize":l.virtual.value.options.length,"aria-posinset":e.index+1,style:{position:"absolute",top:0,left:0,transform:`translateY(${e.start}px)`,overflowAnchor:"none"}})))]}}),st=m({name:"Combobox",emits:{"update:modelValue":e=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],nullable:!0,default:null},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},nullable:{type:Boolean,default:!1},multiple:{type:[Boolean],default:!1},immediate:{type:[Boolean],default:!1},virtual:{type:Object,default:null}},inheritAttrs:!1,setup(e,{slots:t,attrs:l,emit:n}){let o=u(1),r=u(null),i=u(null),d=u(null),v=u(null),m=u({static:!1,hold:!1}),b=u([]),y=u(null),w=u(2),S=u(!1);function _(e=e=>e){let t=null!==y.value?b.value[y.value]:null,l=e(b.value.slice()),a=l.length>0&&null!==l[0].dataRef.order.value?l.sort((e,t)=>e.dataRef.order.value-t.dataRef.order.value):le(l,e=>L(e.dataRef.domRef)),n=t?a.indexOf(t):null;return-1===n&&(n=null),{options:a,activeOptionIndex:n}}let T=a(()=>e.multiple?1:0),k=a(()=>e.nullable),[C,I]=je(a(()=>e.modelValue),e=>n("update:modelValue",e),a(()=>e.defaultValue)),E=a(()=>void 0===C.value?V(T.value,{1:[],0:void 0}):C.value),O=null,R=null;function D(e){return V(T.value,{0:()=>null==I?void 0:I(e),1:()=>{let t=h(A.value.value).slice(),l=h(e),a=t.findIndex(e=>A.compare(l,h(e)));return-1===a?t.push(l):t.splice(a,1),null==I?void 0:I(t)}})}let M=a(()=>{});s([M],([e],[t])=>{if(A.virtual.value&&e&&t&&null!==y.value){let l=e.indexOf(t[y.value]);y.value=-1!==l?l:null}});let A={comboboxState:o,value:E,mode:T,compare(t,l){if("string"==typeof e.by){let a=e.by;return(null==t?void 0:t[a])===(null==l?void 0:l[a])}return null===e.by?function(e,t){return e===t}(t,l):e.by(t,l)},calculateIndex:t=>A.virtual.value?null===e.by?A.virtual.value.options.indexOf(t):A.virtual.value.options.findIndex(e=>A.compare(e,t)):b.value.findIndex(e=>A.compare(e.dataRef.value,t)),defaultValue:a(()=>e.defaultValue),nullable:k,immediate:a(()=>!1),virtual:a(()=>null),inputRef:i,labelRef:r,buttonRef:d,optionsRef:v,disabled:a(()=>e.disabled),options:b,change(e){I(e)},activeOptionIndex:a(()=>{if(S.value&&null===y.value&&(A.virtual.value?A.virtual.value.options.length>0:b.value.length>0)){if(A.virtual.value){let e=A.virtual.value.options.findIndex(e=>{var t;return!(null!=(t=A.virtual.value)&&t.disabled(e))});if(-1!==e)return e}let e=b.value.findIndex(e=>!e.dataRef.disabled);if(-1!==e)return e}return y.value}),activationTrigger:w,optionsPropsRef:m,closeCombobox(){S.value=!1,!e.disabled&&1!==o.value&&(o.value=1,y.value=null)},openCombobox(){if(S.value=!0,!e.disabled&&0!==o.value){if(A.value.value){let e=A.calculateIndex(A.value.value);-1!==e&&(y.value=e)}o.value=0}},setActivationTrigger(e){w.value=e},goToOption(t,l,a){S.value=!1,null!==O&&cancelAnimationFrame(O),O=requestAnimationFrame(()=>{if(e.disabled||v.value&&!m.value.static&&1===o.value)return;if(A.virtual.value)return y.value=t===Ye.Specific?l:We({focus:t},{resolveItems:()=>A.virtual.value.options,resolveActiveIndex:()=>{var e,t;return null!=(t=null!=(e=A.activeOptionIndex.value)?e:A.virtual.value.options.findIndex(e=>{var t;return!(null!=(t=A.virtual.value)&&t.disabled(e))}))?t:null},resolveDisabled:e=>A.virtual.value.disabled(e),resolveId(){throw new Error("Function not implemented.")}}),void(w.value=null!=a?a:2);let n=_();if(null===n.activeOptionIndex){let e=n.options.findIndex(e=>!e.dataRef.disabled);-1!==e&&(n.activeOptionIndex=e)}let s=t===Ye.Specific?l:We({focus:t},{resolveItems:()=>n.options,resolveActiveIndex:()=>n.activeOptionIndex,resolveId:e=>e.id,resolveDisabled:e=>e.dataRef.disabled});y.value=s,w.value=null!=a?a:2,b.value=n.options})},selectOption(e){let t=b.value.find(t=>t.id===e);if(!t)return;let{dataRef:l}=t;D(l.value)},selectActiveOption(){if(null!==A.activeOptionIndex.value){if(A.virtual.value)D(A.virtual.value.options[A.activeOptionIndex.value]);else{let{dataRef:e}=b.value[A.activeOptionIndex.value];D(e.value)}A.goToOption(Ye.Specific,A.activeOptionIndex.value)}},registerOption(e,t){let l=g({id:e,dataRef:t});if(A.virtual.value)return void b.value.push(l);R&&cancelAnimationFrame(R);let a=_(e=>(e.push(l),e));null===y.value&&A.isSelected(t.value.value)&&(a.activeOptionIndex=a.options.indexOf(l)),b.value=a.options,y.value=a.activeOptionIndex,w.value=2,a.options.some(e=>!L(e.dataRef.domRef))&&(R=requestAnimationFrame(()=>{let e=_();b.value=e.options,y.value=e.activeOptionIndex}))},unregisterOption(e,t){if(null!==O&&cancelAnimationFrame(O),t&&(S.value=!0),A.virtual.value)return void(b.value=b.value.filter(t=>t.id!==e));let l=_(t=>{let l=t.findIndex(t=>t.id===e);return-1!==l&&t.splice(l,1),t});b.value=l.options,y.value=l.activeOptionIndex,w.value=2},isSelected:e=>V(T.value,{0:()=>A.compare(h(A.value.value),h(e)),1:()=>h(A.value.value).some(t=>A.compare(h(t),h(e)))}),isActive:e=>y.value===A.calculateIndex(e)};B([i,d,v],()=>A.closeCombobox(),a(()=>0===o.value)),x(lt,A),U(a(()=>V(o.value,{0:H.Open,1:H.Closed})));let N=a(()=>{var e;return null==(e=L(i))?void 0:e.closest("form")});return c(()=>{s([N],()=>{if(N.value&&void 0!==e.defaultValue)return N.value.addEventListener("reset",t),()=>{var e;null==(e=N.value)||e.removeEventListener("reset",t)};function t(){A.change(e.defaultValue)}},{immediate:!0})}),()=>{var a,n,s;let{name:r,disabled:i,form:u,...d}=e,c={open:0===o.value,disabled:i,activeIndex:A.activeOptionIndex.value,activeOption:null===A.activeOptionIndex.value?null:A.virtual.value?A.virtual.value.options[null!=(a=A.activeOptionIndex.value)?a:0]:null!=(s=null==(n=A.options.value[A.activeOptionIndex.value])?void 0:n.dataRef.value)?s:null,value:E.value};return p(f,[...null!=r&&null!=E.value?Ze({[r]:E.value}).map(([e,t])=>p(W,Z({features:q.Hidden,key:e,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:u,disabled:i,name:e,value:t}))):[],Y({theirProps:{...l,...K(d,["by","defaultValue","immediate","modelValue","multiple","nullable","onUpdate:modelValue","virtual"])},ourProps:{},slot:c,slots:t,attrs:l,name:"Combobox"})])}}}),rt=m({name:"ComboboxLabel",props:{as:{type:[Object,String],default:"label"},id:{type:String,default:null}},setup(e,{attrs:t,slots:l}){var a;let n=null!=(a=e.id)?a:`headlessui-combobox-label-${J()}`,o=at("ComboboxLabel");function s(){var e;null==(e=L(o.inputRef))||e.focus({preventScroll:!0})}return()=>{let a={open:0===o.comboboxState.value,disabled:o.disabled.value},{...r}=e,i={id:n,ref:o.labelRef,onClick:s};return Y({ourProps:i,theirProps:r,slot:a,attrs:t,slots:l,name:"ComboboxLabel"})}}}),it=m({name:"ComboboxButton",props:{as:{type:[Object,String],default:"button"},id:{type:String,default:null}},setup(e,{attrs:t,slots:l,expose:n}){var o;let s=null!=(o=e.id)?o:`headlessui-combobox-button-${J()}`,r=at("ComboboxButton");function i(e){r.disabled.value||(0===r.comboboxState.value?r.closeCombobox():(e.preventDefault(),r.openCombobox()),b(()=>{var e;return null==(e=L(r.inputRef))?void 0:e.focus({preventScroll:!0})}))}function u(e){switch(e.key){case X.ArrowDown:return e.preventDefault(),e.stopPropagation(),1===r.comboboxState.value&&r.openCombobox(),void b(()=>{var e;return null==(e=r.inputRef.value)?void 0:e.focus({preventScroll:!0})});case X.ArrowUp:return e.preventDefault(),e.stopPropagation(),1===r.comboboxState.value&&(r.openCombobox(),b(()=>{r.value.value||r.goToOption(Ye.Last)})),void b(()=>{var e;return null==(e=r.inputRef.value)?void 0:e.focus({preventScroll:!0})});case X.Escape:if(0!==r.comboboxState.value)return;return e.preventDefault(),r.optionsRef.value&&!r.optionsPropsRef.value.static&&e.stopPropagation(),r.closeCombobox(),void b(()=>{var e;return null==(e=r.inputRef.value)?void 0:e.focus({preventScroll:!0})})}}n({el:r.buttonRef,$el:r.buttonRef});let d=$e(a(()=>({as:e.as,type:t.type})),r.buttonRef);return()=>{var a,n;let o={open:0===r.comboboxState.value,disabled:r.disabled.value,value:r.value.value},{...c}=e,v={ref:r.buttonRef,id:s,type:d.value,tabindex:"-1","aria-haspopup":"listbox","aria-controls":null==(a=L(r.optionsRef))?void 0:a.id,"aria-expanded":0===r.comboboxState.value,"aria-labelledby":r.labelRef.value?[null==(n=L(r.labelRef))?void 0:n.id,s].join(" "):void 0,disabled:!0===r.disabled.value||void 0,onKeydown:u,onClick:i};return Y({ourProps:v,theirProps:c,slot:o,attrs:t,slots:l,name:"ComboboxButton"})}}}),ut=m({name:"ComboboxInput",props:{as:{type:[Object,String],default:"input"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},displayValue:{type:Function},defaultValue:{type:String,default:void 0},id:{type:String,default:null}},emits:{change:e=>!0},setup(e,{emit:t,attrs:l,slots:n,expose:o}){var r;let i=null!=(r=e.id)?r:`headlessui-combobox-input-${J()}`,d=at("ComboboxInput"),v=a(()=>$(L(d.inputRef))),m={value:!1};function p(){d.change(null);let e=L(d.optionsRef);e&&(e.scrollTop=0),d.goToOption(Ye.Nothing)}o({el:d.inputRef,$el:d.inputRef});let f=a(()=>{var t;let l=d.value.value;return L(d.inputRef)?void 0!==e.displayValue&&void 0!==l?null!=(t=e.displayValue(l))?t:"":"string"==typeof l?l:"":""});c(()=>{s([f,d.comboboxState,v],([e,t],[l,a])=>{if(m.value)return;let n=L(d.inputRef);n&&((0===a&&1===t||e!==l)&&(n.value=e),requestAnimationFrame(()=>{var e;if(m.value||!n||(null==(e=v.value)?void 0:e.activeElement)!==n)return;let{selectionStart:t,selectionEnd:l}=n;0===Math.abs((null!=l?l:0)-(null!=t?t:0))&&0===t&&n.setSelectionRange(n.value.length,n.value.length)}))},{immediate:!0}),s([d.comboboxState],([e],[t])=>{if(0===e&&1===t){if(m.value)return;let e=L(d.inputRef);if(!e)return;let t=e.value,{selectionStart:l,selectionEnd:a,selectionDirection:n}=e;e.value="",e.value=t,null!==n?e.setSelectionRange(l,a,n):e.setSelectionRange(l,a)}})});let h=u(!1);function g(){h.value=!0}function y(){F().nextFrame(()=>{h.value=!1})}let x=Fe();function w(e){switch(m.value=!0,x(()=>{m.value=!1}),e.key){case X.Enter:if(m.value=!1,0!==d.comboboxState.value||h.value)return;if(e.preventDefault(),e.stopPropagation(),null===d.activeOptionIndex.value)return void d.closeCombobox();d.selectActiveOption(),0===d.mode.value&&d.closeCombobox();break;case X.ArrowDown:return m.value=!1,e.preventDefault(),e.stopPropagation(),V(d.comboboxState.value,{0:()=>d.goToOption(Ye.Next),1:()=>d.openCombobox()});case X.ArrowUp:return m.value=!1,e.preventDefault(),e.stopPropagation(),V(d.comboboxState.value,{0:()=>d.goToOption(Ye.Previous),1:()=>{d.openCombobox(),b(()=>{d.value.value||d.goToOption(Ye.Last)})}});case X.Home:if(e.shiftKey)break;return m.value=!1,e.preventDefault(),e.stopPropagation(),d.goToOption(Ye.First);case X.PageUp:return m.value=!1,e.preventDefault(),e.stopPropagation(),d.goToOption(Ye.First);case X.End:if(e.shiftKey)break;return m.value=!1,e.preventDefault(),e.stopPropagation(),d.goToOption(Ye.Last);case X.PageDown:return m.value=!1,e.preventDefault(),e.stopPropagation(),d.goToOption(Ye.Last);case X.Escape:if(m.value=!1,0!==d.comboboxState.value)return;e.preventDefault(),d.optionsRef.value&&!d.optionsPropsRef.value.static&&e.stopPropagation(),d.nullable.value&&0===d.mode.value&&null===d.value.value&&p(),d.closeCombobox();break;case X.Tab:if(m.value=!1,0!==d.comboboxState.value)return;0===d.mode.value&&1!==d.activationTrigger.value&&d.selectActiveOption(),d.closeCombobox()}}function S(e){t("change",e),d.nullable.value&&0===d.mode.value&&""===e.target.value&&p(),d.openCombobox()}function _(e){var t,l,a;let n=null!=(t=e.relatedTarget)?t:Q.find(t=>t!==e.currentTarget);if(m.value=!1,!(null!=(l=L(d.optionsRef))&&l.contains(n)||null!=(a=L(d.buttonRef))&&a.contains(n)||0!==d.comboboxState.value))return e.preventDefault(),0===d.mode.value&&(d.nullable.value&&null===d.value.value?p():1!==d.activationTrigger.value&&d.selectActiveOption()),d.closeCombobox()}function T(e){var t,l,a;let n=null!=(t=e.relatedTarget)?t:Q.find(t=>t!==e.currentTarget);null!=(l=L(d.buttonRef))&&l.contains(n)||null!=(a=L(d.optionsRef))&&a.contains(n)||d.disabled.value||d.immediate.value&&0!==d.comboboxState.value&&(d.openCombobox(),F().nextFrame(()=>{d.setActivationTrigger(1)}))}let k=a(()=>{var t,l,a,n;return null!=(n=null!=(a=null!=(l=e.defaultValue)?l:void 0!==d.defaultValue.value?null==(t=e.displayValue)?void 0:t.call(e,d.defaultValue.value):null)?a:d.defaultValue.value)?n:""});return()=>{var t,a,o,s,r,u,c;let v={open:0===d.comboboxState.value},{displayValue:m,onChange:p,...f}=e,h={"aria-controls":null==(t=d.optionsRef.value)?void 0:t.id,"aria-expanded":0===d.comboboxState.value,"aria-activedescendant":null===d.activeOptionIndex.value?void 0:d.virtual.value?null==(a=d.options.value.find(e=>!d.virtual.value.disabled(e.dataRef.value)&&d.compare(e.dataRef.value,d.virtual.value.options[d.activeOptionIndex.value])))?void 0:a.id:null==(o=d.options.value[d.activeOptionIndex.value])?void 0:o.id,"aria-labelledby":null!=(u=null==(s=L(d.labelRef))?void 0:s.id)?u:null==(r=L(d.buttonRef))?void 0:r.id,"aria-autocomplete":"list",id:i,onCompositionstart:g,onCompositionend:y,onKeydown:w,onInput:S,onFocus:T,onBlur:_,role:"combobox",type:null!=(c=l.type)?c:"text",tabIndex:0,ref:d.inputRef,defaultValue:k.value,disabled:!0===d.disabled.value||void 0};return Y({ourProps:h,theirProps:f,slot:v,attrs:l,slots:n,features:G.RenderStrategy|G.Static,name:"ComboboxInput"})}}}),dt=m({name:"ComboboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},hold:{type:[Boolean],default:!1}},setup(e,{attrs:t,slots:l,expose:n}){let o=at("ComboboxOptions"),s=`headlessui-combobox-options-${J()}`;n({el:o.optionsRef,$el:o.optionsRef}),v(()=>{o.optionsPropsRef.value.static=e.static}),v(()=>{o.optionsPropsRef.value.hold=e.hold});let r=ee(),i=a(()=>null!==r?(r.value&H.Open)===H.Open:0===o.comboboxState.value);function u(e){e.preventDefault()}return function({container:e,accept:t,walk:l,enabled:a}){v(()=>{let n=e.value;if(!n||void 0!==a&&!a.value)return;let o=$(e);if(!o)return;let s=Object.assign(e=>t(e),{acceptNode:t}),r=o.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,s,!1);for(;r.nextNode();)l(r.currentNode)})}({container:a(()=>L(o.optionsRef)),enabled:a(()=>0===o.comboboxState.value),accept:e=>"option"===e.getAttribute("role")?NodeFilter.FILTER_REJECT:e.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT,walk(e){e.setAttribute("role","none")}}),()=>{var a,n,r;let d={open:0===o.comboboxState.value},c={"aria-labelledby":null!=(r=null==(a=L(o.labelRef))?void 0:a.id)?r:null==(n=L(o.buttonRef))?void 0:n.id,id:s,ref:o.optionsRef,role:"listbox","aria-multiselectable":1===o.mode.value||void 0,onMousedown:u},v=K(e,["hold"]);return Y({ourProps:c,theirProps:v,slot:d,attrs:t,slots:o.virtual.value&&0===o.comboboxState.value?{...l,default:()=>[p(ot,{},l.default)]}:l,features:G.RenderStrategy|G.Static,visible:i.value,name:"ComboboxOptions"})}}}),ct=m({name:"ComboboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1},order:{type:[Number],default:null}},setup(e,{slots:t,attrs:l,expose:n}){let o=at("ComboboxOption"),s=`headlessui-combobox-option-${J()}`,r=u(null),i=a(()=>e.disabled);n({el:r,$el:r});let m=a(()=>{var t;return o.virtual.value?o.activeOptionIndex.value===o.calculateIndex(e.value):null!==o.activeOptionIndex.value&&(null==(t=o.options.value[o.activeOptionIndex.value])?void 0:t.id)===s}),p=a(()=>o.isSelected(e.value)),f=y(nt,null),h=a(()=>({disabled:e.disabled,value:e.value,domRef:r,order:a(()=>e.order)}));function g(e){e.preventDefault(),e.button===Ue.Left&&(i.value||(o.selectOption(s),te()||requestAnimationFrame(()=>{var e;return null==(e=L(o.inputRef))?void 0:e.focus({preventScroll:!0})}),0===o.mode.value&&o.closeCombobox()))}function x(){var t;if(e.disabled||null!=(t=o.virtual.value)&&t.disabled(e.value))return o.goToOption(Ye.Nothing);let l=o.calculateIndex(e.value);o.goToOption(Ye.Specific,l)}c(()=>o.registerOption(s,h)),d(()=>o.unregisterOption(s,m.value)),v(()=>{let e=L(r);e&&(null==f||f.value.measureElement(e))}),v(()=>{0===o.comboboxState.value&&m.value&&(o.virtual.value||0!==o.activationTrigger.value&&b(()=>{var e,t;return null==(t=null==(e=L(r))?void 0:e.scrollIntoView)?void 0:t.call(e,{block:"nearest"})}))});let w=function(){let e=u([-1,-1]);return{wasMoved(t){let l=Ve(t);return(e.value[0]!==l[0]||e.value[1]!==l[1])&&(e.value=l,!0)},update(t){e.value=Ve(t)}}}();function S(e){w.update(e)}function _(t){var l;if(!w.wasMoved(t)||e.disabled||null!=(l=o.virtual.value)&&l.disabled(e.value)||m.value)return;let a=o.calculateIndex(e.value);o.goToOption(Ye.Specific,a,0)}function T(t){var l;w.wasMoved(t)&&(e.disabled||null!=(l=o.virtual.value)&&l.disabled(e.value)||m.value&&(o.optionsPropsRef.value.hold||o.goToOption(Ye.Nothing)))}return()=>{let{disabled:a}=e,n={active:m.value,selected:p.value,disabled:a},o={id:s,ref:r,role:"option",tabIndex:!0===a?void 0:-1,"aria-disabled":!0===a||void 0,"aria-selected":p.value,disabled:void 0,onMousedown:g,onFocus:x,onPointerenter:S,onMouseenter:S,onPointermove:_,onMousemove:_,onPointerleave:T,onMouseleave:T},i=K(e,["order","value"]);return Y({ourProps:o,theirProps:i,slot:n,attrs:l,slots:t,name:"ComboboxOption"})}}}),vt=Symbol("LabelContext");function mt(){let e=y(vt,null);if(null===e){let e=new Error("You used a <Label /> component, but it is not inside a parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,mt),e}return e}let pt=m({name:"Label",props:{as:{type:[Object,String],default:"label"},passive:{type:[Boolean],default:!1},id:{type:String,default:null}},setup(e,{slots:t,attrs:l}){var a;let o=null!=(a=e.id)?a:`headlessui-label-${J()}`,s=mt();return c(()=>d(s.register(o))),()=>{let{name:a="Label",slot:r={},props:i={}}=s,{passive:u,...d}=e,c={...Object.entries(i).reduce((e,[t,l])=>Object.assign(e,{[t]:n(l)}),{}),id:o};return u&&(delete c.onClick,delete c.htmlFor,delete d.onClick),Y({ourProps:c,theirProps:d,slot:r,attrs:l,slots:t,name:a})}}}),ft=Symbol("GroupContext"),ht=m({name:"SwitchGroup",props:{as:{type:[Object,String],default:"template"}},setup(e,{slots:t,attrs:l}){let n=u(null),o=function({slot:e={},name:t="Label",props:l={}}={}){let n=u([]);return x(vt,{register:function(e){return n.value.push(e),()=>{let t=n.value.indexOf(e);-1!==t&&n.value.splice(t,1)}},slot:e,name:t,props:l}),a(()=>n.value.length>0?n.value.join(" "):void 0)}({name:"SwitchLabel",props:{htmlFor:a(()=>{var e;return null==(e=n.value)?void 0:e.id}),onClick(e){n.value&&("LABEL"===e.currentTarget.tagName&&e.preventDefault(),n.value.click(),n.value.focus({preventScroll:!0}))}}}),s=ae({name:"SwitchDescription"});return x(ft,{switchRef:n,labelledby:o,describedby:s}),()=>Y({theirProps:e,ourProps:{},slot:{},slots:t,attrs:l,name:"SwitchGroup"})}}),gt=m({name:"Switch",emits:{"update:modelValue":e=>!0},props:{as:{type:[Object,String],default:"button"},modelValue:{type:Boolean,default:void 0},defaultChecked:{type:Boolean,optional:!0},form:{type:String,optional:!0},name:{type:String,optional:!0},value:{type:String,optional:!0},id:{type:String,default:null},disabled:{type:Boolean,default:!1},tabIndex:{type:Number,default:0}},inheritAttrs:!1,setup(e,{emit:t,attrs:l,slots:n,expose:o}){var r;let i=null!=(r=e.id)?r:`headlessui-switch-${J()}`,d=y(ft,null),[v,m]=je(a(()=>e.modelValue),e=>t("update:modelValue",e),a(()=>e.defaultChecked));function h(){m(!v.value)}let g=u(null),b=null===d?g:d.switchRef,x=$e(a(()=>({as:e.as,type:l.type})),b);function w(e){e.preventDefault(),h()}function S(e){e.key===X.Space?(e.preventDefault(),h()):e.key===X.Enter&&function(e){var t,l;let a=null!=(t=null==e?void 0:e.form)?t:e.closest("form");if(a){for(let t of a.elements)if(t!==e&&("INPUT"===t.tagName&&"submit"===t.type||"BUTTON"===t.tagName&&"submit"===t.type||"INPUT"===t.nodeName&&"image"===t.type))return void t.click();null==(l=a.requestSubmit)||l.call(a)}}(e.currentTarget)}function _(e){e.preventDefault()}o({el:b,$el:b});let T=a(()=>{var e,t;return null==(t=null==(e=L(b))?void 0:e.closest)?void 0:t.call(e,"form")});return c(()=>{s([T],()=>{if(T.value&&void 0!==e.defaultChecked)return T.value.addEventListener("reset",t),()=>{var e;null==(e=T.value)||e.removeEventListener("reset",t)};function t(){m(e.defaultChecked)}},{immediate:!0})}),()=>{let{name:t,value:a,form:o,tabIndex:s,...r}=e,u={checked:v.value},c={id:i,ref:b,role:"switch",type:x.value,tabIndex:-1===s?0:s,"aria-checked":v.value,"aria-labelledby":null==d?void 0:d.labelledby.value,"aria-describedby":null==d?void 0:d.describedby.value,onClick:w,onKeyup:S,onKeypress:_};return p(f,[null!=t&&null!=v.value?p(W,Z({features:q.Hidden,as:"input",type:"checkbox",hidden:!0,readOnly:!0,checked:v.value,form:o,disabled:r.disabled,name:t,value:a})):null,Y({ourProps:c,theirProps:{...l,...K(r,["modelValue","defaultChecked"])},slot:u,attrs:l,slots:n,name:"Switch"})])}}}),bt=pt;function yt(){return{entry_id:0,user_id:0,employee_name:"",billing_code_id:0,billing_code_name:"",billing_code:"",project_id:0,project_name:"",start:(new Date).toISOString(),end:new Date(Date.now()+36e5).toISOString(),duration_hours:1,fee:0,state:"ENTRY_STATE_DRAFT",notes:"",impersonate_as_user_id:null,is_being_impersonated:!1,is_meeting:!1}}const xt={class:"flex flex-col mb-1"},wt={class:"font-semibold truncate text-xs"},St={class:"flex items-center gap-1 mt-0.5"},_t={class:"font-semibold text-[0.65rem]"},Tt={class:"mt-1"},kt={class:"text-[0.6rem] line-clamp-2"},Ct=m({__name:"TimesheetEntry",props:{entry:{},dayIndex:{},day:{},timeRangeStart:{},timeRangeEnd:{}},emits:["edit"],setup(o,{emit:s}){const r=o,i=s,u=e=>{if(!e||"string"!=typeof e)return"#e2e8f0";const t=e.split("_")[0];let l=0;for(let a=0;a<t.length;a++)l=t.charCodeAt(a)+((l<<5)-l);return`hsl(${Math.abs(l)%360}, ${65+Math.abs(l)%20}%, ${50+Math.abs(l)%10}%)`},d=e=>{const t=e.match(/hsl\(\d+,\s*\d+%,\s*(\d+)%\)/);if(t&&t[1]){return parseInt(t[1],10)<60?"text-white":"text-gray-900"}return"text-gray-900"},c=a(()=>{if(!r.entry||!r.entry.start||!r.entry.end)return{start:0,span:0};try{const e=r.entry.start.split("T")[0];if(e!==r.day.toISOString().split("T")[0])return{start:0,span:0};const t=r.entry.start.split("T")[1].split(":"),l=r.entry.end.split("T")[1].split(":"),a=parseInt(t[0],10),n=parseInt(t[1],10),o=parseInt(l[0],10),s=parseInt(l[1],10),i=r.timeRangeStart||8,u=60*(a-i)+n,d=2+30*Math.floor(u/30)/30,c=60*(o-a)+(s-n),v=Math.max(1,Math.ceil(c/30));return{start:d,span:Math.max(1,v)}}catch(e){return console.error("Error calculating grid position for entry:",r.entry,e),{start:0,span:0}}}),v=a(()=>r.dayIndex+1),m=a(()=>{if(!r.entry||!r.entry.state)return"bg-white text-gray-700 hover:bg-gray-50 border border-gray-200";switch(r.entry.state){case"ENTRY_STATE_UNAFFILIATED":return"bg-orange-100 text-orange-800 hover:bg-orange-200 border-2 border-orange-500";case"ENTRY_STATE_DRAFT":return"bg-amber-50 text-amber-700 hover:bg-amber-100 border border-amber-200";case"ENTRY_STATE_REJECTED":return"bg-red-100 text-red-800 hover:bg-red-200 border-2 border-red-400";case"ENTRY_STATE_APPROVED":return"bg-blue-50 text-blue-700 hover:bg-blue-100 border border-blue-200";case"ENTRY_STATE_EXCLUDED":return"bg-gray-100 text-gray-600 hover:bg-gray-200 border border-gray-400";case"ENTRY_STATE_INVOICED":return"bg-purple-50 text-blue-700 hover:bg-blue-100 border border-blue-200";case"ENTRY_STATE_SENT":return"bg-indigo-50 text-indigo-700 hover:bg-indigo-100 border border-indigo-200";case"ENTRY_STATE_PAID":case"ENTRY_STATE_VOID":return"bg-gray-50 text-gray-700 hover:bg-gray-200 border border-gray-300";default:return"bg-white text-gray-700 hover:bg-gray-50 border border-gray-200"}}),p=()=>{i("edit",r.entry)},f=a(()=>{if(!r.entry||!r.entry.start)return{right:"0%"};try{const e=(r.entry.entry_id||0)%5,t=6*(4-e);return{right:`${t}%`,width:4===e?"100%":`calc(100% - ${t}%)`,boxShadow:`0 ${4-e+1}px ${2*(4-e)+2}px rgba(0, 0, 0, 0.0${4-e+1})`,zIndex:25-e}}catch(e){return console.error("Error calculating entry offset:",e),{right:"0%"}}}),h=a(()=>0===c.value.start||0===c.value.span?{display:"none"}:{gridArea:`${c.value.start} / ${v.value} / span ${c.value.span} / span 1`,position:"relative"}),g=a(()=>{var e;return!0===(null==(e=r.entry)?void 0:e.is_being_impersonated)});return(a,o)=>c.value.span>0?(t(),e("li",{key:0,class:"relative flex timesheet-entry",style:_(h.value)},[l("a",{href:"#",onClick:k(p,["prevent"]),class:T(["group absolute inset-1 flex flex-col overflow-y-auto rounded-lg p-2 text-xs/5 shadow-sm entry-link",[m.value,{"impersonation-striping":g.value}]]),style:_(f.value)},[l("div",xt,[l("span",wt,C(a.entry.billing_code_name),1),l("div",St,[a.entry.billing_code?(t(),e("span",{key:0,style:_({backgroundColor:u(a.entry.billing_code)}),class:T(["inline-flex items-center px-1.5 py-0.5 rounded text-[0.6rem] font-medium",d(u(a.entry.billing_code))])},C(a.entry.billing_code),7)):S("",!0),"ENTRY_STATE_UNAFFILIATED"===a.entry.state?(t(),I(n(xe),{key:1,class:"h-4 w-4 text-orange-600",title:"This work is not associated with any invoice - unbilled!"})):S("",!0),"ENTRY_STATE_REJECTED"===a.entry.state?(t(),I(n(xe),{key:2,class:"h-4 w-4 text-red-600",title:"This entry was rejected - edit and save to resubmit"})):S("",!0),null!==a.entry.impersonate_as_user_id?(t(),I(n(Se),{key:3,class:"h-3 w-3 text-gray-700",title:"You are impersonating another user"})):S("",!0),a.entry.is_being_impersonated?(t(),I(n(we),{key:4,class:"h-3 w-3 text-gray-700",title:"Someone is impersonating you"})):S("",!0)])]),l("p",_t,"("+C(a.entry.duration_hours)+" hrs)",1),l("div",Tt,[l("div",kt,C(a.entry.notes),1)])],6)],4)):S("",!0)}}),It=E(Ct,[["__scopeId","data-v-ce9b26b5"]]),Et={async authorize(){try{const e=localStorage.getItem("snowpack_token"),t=(await O.post("/api/google/auth/url",{},{headers:{"x-access-token":e}})).data.auth_url,l=window.open(t,"Google Calendar Authorization","width=600,height=700,left=200,top=100");return new Promise((e,t)=>{const a=t=>{"google_auth_success"===t.data.type&&(window.removeEventListener("message",a),e())};window.addEventListener("message",a);const n=setInterval(()=>{l&&l.closed&&(clearInterval(n),window.removeEventListener("message",a),t(new Error("Authorization window was closed")))},500)})}catch(e){throw console.error("Failed to get authorization URL:",e),e}},async getAuthStatus(){try{const e=localStorage.getItem("snowpack_token");return(await O.get("/api/google/auth/status",{headers:{"x-access-token":e}})).data}catch(e){throw console.error("Failed to get auth status:",e),e}},async disconnect(){try{const e=localStorage.getItem("snowpack_token");await O.delete("/api/google/auth/disconnect",{headers:{"x-access-token":e}})}catch(e){throw console.error("Failed to disconnect Google Calendar:",e),e}},async getCalendarEvents(e,t){try{const l=localStorage.getItem("snowpack_token");return(await O.get("/api/google/calendar/events",{params:{start_date:e,end_date:t},headers:{"x-access-token":l}})).data}catch(l){throw console.error("Failed to fetch calendar events:",l),l}}},Ot={class:"fixed inset-0 z-10 overflow-y-auto"},Rt={class:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0"},Dt={class:"absolute right-0 top-0 pr-4 pt-4"},Mt={class:"sm:flex sm:items-start"},At={class:"mx-auto flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-full bg-blue-100 sm:mx-0"},Nt={class:"mt-3 text-center sm:ml-3 sm:mt-0 sm:text-left w-full"},zt={class:"mt-4"},Pt={key:0,class:"text-center py-8"},jt={key:1,class:"rounded-md bg-red-50 p-4"},Ft={class:"text-sm text-red-800"},Lt={key:2,class:"text-center py-8"},$t={key:3,class:"space-y-2 max-h-96 overflow-y-auto"},Vt=["onClick"],Bt={class:"flex justify-between items-start gap-3"},Ut={class:"flex-1 min-w-0"},Ht={class:"font-semibold text-gray-900 text-sm truncate"},Yt={key:0,class:"mt-1 text-xs text-gray-600 line-clamp-1"},Wt={class:"mt-1.5 text-xs text-gray-500"},Zt={class:"flex-shrink-0"},qt={class:"inline-flex items-center rounded-full bg-blue-100 px-2 py-0.5 text-xs font-semibold text-blue-700"},Kt={class:"mt-5 flex justify-end gap-2"},Jt=["disabled"],Gt=m({__name:"CalendarEventPicker",props:{show:{type:Boolean},startDate:{},endDate:{}},emits:["close","select"],setup(a,{emit:o}){const r=a,i=o,d=u([]),c=u(!1),v=u(null),m=u(null);s(()=>r.show,e=>{e&&p()});const p=async()=>{var e,t;c.value=!0,v.value=null;try{d.value=await Et.getCalendarEvents(r.startDate,r.endDate)}catch(l){v.value=(null==(t=null==(e=l.response)?void 0:e.data)?void 0:t.message)||"Failed to load calendar events",console.error("Error loading calendar events:",l)}finally{c.value=!1}},h=e=>new Date(e).toLocaleString("en-US",{weekday:"short",month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}),g=e=>{const t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText||""},b=(e,t)=>{const l=new Date(e);return((new Date(t).getTime()-l.getTime())/36e5).toFixed(1)},y=()=>{const e=d.value.find(e=>e.id===m.value);e?i("select",e):console.error("No event found with id:",m.value)},x=()=>{i("close")};return(a,o)=>(t(),I(n(ne),{as:"template",show:a.show},{default:R(()=>[D(n(ie),{as:"div",class:"relative z-50",onClose:x},{default:R(()=>[D(n(oe),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:R(()=>o[0]||(o[0]=[l("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1)])),_:1}),l("div",Ot,[l("div",Rt,[D(n(oe),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to":"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 translate-y-0 sm:scale-100","leave-to":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:R(()=>[D(n(se),{class:"relative transform overflow-hidden rounded-lg bg-white px-4 pb-4 pt-5 text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-2xl sm:p-6"},{default:R(()=>[l("div",Dt,[l("button",{type:"button",class:"rounded-md bg-white text-gray-400 hover:text-gray-500 focus:outline-none",onClick:x},[o[1]||(o[1]=l("span",{class:"sr-only"},"Close",-1)),D(n(ue),{class:"h-6 w-6","aria-hidden":"true"})])]),l("div",Mt,[l("div",At,[D(n(ge),{class:"h-5 w-5 text-blue-600","aria-hidden":"true"})]),l("div",Nt,[D(n(re),{as:"h3",class:"text-base font-semibold leading-6 text-gray-900"},{default:R(()=>o[2]||(o[2]=[M(" Import from Google Calendar ")])),_:1}),o[3]||(o[3]=l("p",{class:"text-xs text-gray-500 mt-0.5"}," Select a calendar event to import as a timesheet entry ",-1))])]),l("div",zt,[c.value?(t(),e("div",Pt,o[4]||(o[4]=[l("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1),l("p",{class:"mt-2 text-sm text-gray-500"},"Loading calendar events...",-1)]))):v.value?(t(),e("div",jt,[l("p",Ft,C(v.value),1)])):0===d.value.length?(t(),e("div",Lt,[D(n(ge),{class:"mx-auto h-12 w-12 text-gray-400"}),o[5]||(o[5]=l("p",{class:"mt-2 text-sm text-gray-500"},"No calendar events found for this period",-1))])):(t(),e("div",$t,[(t(!0),e(f,null,A(d.value,a=>{var n;return t(),e("div",{key:a.id,onClick:e=>{return t=a.id,void(m.value=t);var t},class:T(["cursor-pointer rounded-lg border p-3 transition-colors",[m.value===a.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"]])},[l("div",Bt,[l("div",Ut,[l("h4",Ht,C(a.summary),1),a.description&&g(a.description).trim()?(t(),e("p",Yt,C(g(a.description)),1)):S("",!0),l("div",Wt,C(h(a.start))+" - "+C(null==(n=h(a.end).split(",").pop())?void 0:n.trim()),1)]),l("div",Zt,[l("span",qt,C(b(a.start,a.end))+"h ",1)])])],10,Vt)}),128))]))]),l("div",Kt,[l("button",{type:"button",class:"inline-flex justify-center rounded-md bg-white px-3 py-1.5 text-sm font-medium text-gray-700 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50",onClick:x}," Cancel "),l("button",{type:"button",disabled:!m.value,class:"inline-flex justify-center rounded-md bg-blue-600 px-3 py-1.5 text-sm font-medium text-white shadow-sm hover:bg-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",onClick:y}," Use This Event ",8,Jt)])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"]))}}),Xt={class:"timesheet-view"},Qt={class:"flex justify-between items-center p-4 bg-sage-pale border-b border-gray-200 rounded-xl shadow-sm mb-2"},el={class:"flex items-center space-x-3"},tl={class:"text-lg font-semibold text-gray-900"},ll={class:"ml-2 text-sm text-gray-500"},al={class:"ml-4 text-sm font-medium text-sage"},nl={class:"flex items-center gap-1 ml-1"},ol=["value"],sl={key:0,class:"mb-2 bg-blue-50 border-l-4 border-blue-500 px-3 py-2 rounded-md"},rl={class:"flex items-center justify-between"},il={class:"flex items-center"},ul={class:"text-xs text-blue-700"},dl={key:1,class:"mb-4 bg-red-50 border-l-4 border-red-500 p-4 rounded-md"},cl={class:"flex"},vl={class:"ml-3"},ml={class:"text-sm text-red-700"},pl={class:"ml-auto pl-3"},fl={class:"-mx-1.5 -my-1.5"},hl={key:2,class:"loading-indicator"},gl={key:3,class:"error-message"},bl={key:4,class:"timesheet-container h-[calc(100vh-9rem)] rounded-xl overflow-hidden"},yl={class:"flex h-full flex-col"},xl={key:0,class:"flex flex-col items-center justify-center p-10 bg-white flex-grow"},wl={key:1,class:"flex flex-col items-center justify-center p-10 bg-white flex-grow"},Sl={class:"text-gray-700 mb-2"},_l={style:{width:"165%"},class:"flex max-w-full flex-none flex-col sm:max-w-none md:max-w-full"},Tl={class:"grid grid-cols-7 text-sm/6 text-gray-500 sm:hidden"},kl=["onClick"],Cl={class:"-mr-px hidden grid-cols-7 divide-x divide-gray-100 border-r border-gray-100 text-sm/6 text-gray-500 sm:grid"},Il=["onClick"],El={class:"flex flex-auto"},Ol={class:"grid flex-auto grid-cols-1 grid-rows-1"},Rl={class:"col-start-1 col-end-2 row-start-1 grid divide-y divide-gray-100",style:{"grid-template-rows":"repeat(30, minmax(2rem, 1fr))"}},Dl={class:"sticky left-0 z-20 -ml-14 -mt-2.5 w-14 pr-2 text-right text-xs/5 text-gray-400"},Ml={class:"col-start-1 col-end-2 row-start-1 hidden grid-cols-7 grid-rows-1 divide-x divide-gray-100 sm:grid sm:grid-cols-7"},Al={class:"col-start-1 col-end-2 row-start-1 grid grid-cols-1 sm:grid-cols-7 sm:pr-8 relative",style:{"grid-template-rows":"1.75rem repeat(30, minmax(0, 1fr)) auto"}},Nl=["data-hour","data-day","onMousedown"],zl={class:"fixed inset-0 z-10 w-screen overflow-y-auto"},Pl={class:"flex min-h-full items-center justify-center p-4 text-center sm:p-0"},jl={class:"bg-sage text-white px-4 py-2 sm:px-4 sm:py-2 flex justify-between items-center"},Fl={key:0,class:"bg-red-50 border-b-2 border-red-300 px-4 py-3"},Ll={class:"bg-white px-3 py-4 sm:p-6"},$l={key:0,class:"mb-4"},Vl={class:"py-1 border-b border-gray-100"},Bl={class:"flex items-center gap-2 mt-0.5"},Ul={class:"relative flex-1"},Hl={class:"flex items-center"},Yl={key:0,class:"flex-shrink-0"},Wl={class:"bg-sage-pale bg-opacity-30 rounded p-2 border border-sage border-opacity-20 mt-2"},Zl={class:"grid grid-cols-3 gap-2 mb-2"},ql={class:"col-span-1"},Kl=["value"],Jl={class:"col-span-1"},Gl=["value"],Xl={class:"col-span-1"},Ql=["value"],ea={class:"flex justify-end"},ta={class:"text-2xs text-gray-600 font-medium bg-white px-2 py-0.5 rounded-full border border-gray-200"},la={class:"py-1 mt-2"},aa={class:"mt-3"},na={class:"flex items-center cursor-pointer"},oa={class:"mt-4 border-t border-gray-100 pt-3"},sa={key:0,class:"bg-yellow-50 p-2 rounded text-xs space-y-1 border border-yellow-200"},ra=["value"],ia={class:"bg-gray-50 px-3 py-2 sm:flex sm:flex-row-reverse border-t border-gray-200"},ua=["disabled"],da=["disabled"],ca={class:"sm:flex-grow"},va={key:0,class:"text-2xs text-gray-500 ml-2 sm:ml-0"},ma=["disabled"],pa=m({__name:"TimesheetView",setup(o){const r=u(null),i=u(null),d=u(null),v=u([]),m=u(!0),p=u(null),h=u(!1),g=u(new Date),b=u([]),y=u([]),x=u([]),w=u(!1),k=u(!1),E=u(null),O=u(null),F=u(!1),L=u(!1),$=u(!1),V=u(!1),B=u(null),U=u(null),H=u(null),Y=u(null),W=u(yt()),Z=e=>{if(!e||"string"!=typeof e)return"#e2e8f0";const t=e.split("_")[0];let l=0;for(let a=0;a<t.length;a++)l=t.charCodeAt(a)+((l<<5)-l);return`hsl(${Math.abs(l)%360}, ${65+Math.abs(l)%20}%, ${50+Math.abs(l)%10}%)`},q=e=>{const t=e.match(/hsl\(\d+,\s*\d+%,\s*(\d+)%\)/);if(t&&t[1]){return parseInt(t[1],10)<60?"text-white":"text-gray-900"}return"text-gray-900"},K=u("");s(w,e=>{e||(W.value.impersonate_as_user_id=0,W.value.is_being_impersonated=!1)});const J=a(()=>{if(!y.value.length)return[];const e=K.value.toLowerCase();return y.value.filter(t=>t.name.toLowerCase().includes(e)||t.code&&t.code.toLowerCase().includes(e))}),G=a(()=>W.value.billing_code_id&&y.value.length&&y.value.find(e=>Number(e.id)===Number(W.value.billing_code_id))||null);s(G,e=>{e&&(W.value.billing_code_id=Number(e.id))});const X=e=>e?e.name:"";c(async()=>{Q(),await ae(),await xe(),await we(),await Ae(),setTimeout(()=>{if(r.value&&i.value&&d.value){const e=(new Date).getHours();if(e>=8&&e<=22){const t=32*(2*(e-8)+1);r.value.scrollTop=t}}},100)});const Q=()=>{const e=new Date(g.value),t=e.getDay(),l=new Date(e);l.setDate(e.getDate()-t),l.setHours(0,0,0,0);const a=[];for(let n=0;n<7;n++){const e=new Date(l);e.setDate(l.getDate()+n),e.setHours(0,0,0,0),a.push(e)}b.value=a},ee=()=>{const e=new Date(b.value[0]);e.setHours(0,0,0,0),e.setDate(e.getDate()-7),g.value=e,Q(),ae()},te=()=>{const e=new Date(b.value[0]);e.setHours(0,0,0,0),e.setDate(e.getDate()+7),g.value=e,Q(),ae()},le=()=>{const e=new Date;e.setHours(0,0,0,0),g.value=e,Q(),ae()},ae=async()=>{m.value=!0,p.value=null;try{const e=b.value[0].toISOString().split("T")[0],t=b.value[6].toISOString().split("T")[0],l=await ce(e,t,E.value);v.value=l}catch(e){console.error("Error fetching timesheet entries:",e),p.value="Failed to load timesheet entries. Please try again."}finally{m.value=!1}},xe=async()=>{try{const e=(await ve()).filter(e=>{const t=e.ID,l=Number(t);return!(isNaN(l)||l<=0)||(console.warn("Skipping billing code with invalid ID:",e),!1)}).map(e=>{var t;return{id:Number(e.ID),billing_code_id:Number(e.ID),name:e.name||"",code:e.code||"",project_id:Number(e.project_id)||0,rate:Number(null==(t=e.rate)?void 0:t.amount)||0}});y.value=e}catch(e){console.error("Error fetching billing codes:",e)}},we=async()=>{try{const e=await me();x.value=e.map(e=>({id:Number(e.ID),first_name:e.first_name||"",last_name:e.last_name||"",email:e.email||""}));const t=localStorage.getItem("snowpack_user");t&&(O.value=JSON.parse(t))}catch(e){console.error("Error fetching staff for impersonation:",e)}},Se=async e=>{E.value=e,await ae()},_e=e=>{if(!e)return"My Timesheet";const t=x.value.find(t=>t.id===e);return t&&(`${t.first_name} ${t.last_name}`.trim()||t.email)||"Unknown User"},Te=(e,t)=>{W.value=yt(),W.value.billing_code_id=0;const l=t.format?t.format("YYYY-MM-DD"):new Date(t).toISOString().split("T")[0],a=new Date,n=a.getHours(),o=a.getMinutes(),s=new Date(l);s.setHours(n,o,0,0);const r=new Date(l);r.setHours(n+1,o,0,0),W.value.start=s.toISOString(),W.value.end=r.toISOString(),h.value=!0,w.value=!1},ke=e=>{if(!V.value||null===Y.value)return;const t=document.elementsFromPoint(e.clientX,e.clientY).filter(e=>e.classList.contains("calendar-cell"));if(0===t.length)return;const l=t[0],a=l.getAttribute("data-day"),n=l.getAttribute("data-hour");if(null===a||null===n)return void console.warn("Cell is missing data attributes");const o=parseInt(a,10),s=parseFloat(n);isNaN(o)||isNaN(s)?console.warn("Invalid data attributes:",{cellDayAttr:a,cellHourAttr:n}):o===Y.value&&(H.value=s,Ee())},Ce=e=>{if(!V.value||!B.value||null===U.value||null===H.value||null===Y.value)return;e&&(e.preventDefault(),e.stopPropagation()),document.removeEventListener("mousemove",ke);const t=Math.min(U.value,H.value),l=Math.max(U.value,H.value);W.value={...yt(),billing_code_id:0};const a=b.value[Y.value];if(!a)return void console.error("Could not find day for column index",Y.value);const n=a.toISOString().split("T")[0],o=Math.floor(t),s=Math.round(t%1*60),r=o.toString().padStart(2,"0"),i=s.toString().padStart(2,"0");let u=Math.floor(l),d=Math.round(l%1*60)+30;d>=60&&(u+=1,d-=60);const c=u.toString().padStart(2,"0"),v=d.toString().padStart(2,"0");W.value.start=`${n}T${r}:${i}:00.000Z`,W.value.end=`${n}T${c}:${v}:00.000Z`,V.value=!1,Ie(),document.body.style.userSelect="",h.value=!0},Ie=()=>{document.querySelectorAll(".calendar-cell").forEach(e=>{e.classList.remove("bg-sage-pale")})},Ee=()=>{if(!V.value||null===U.value||null===H.value||null===Y.value)return;Ie();const e=Math.min(U.value,H.value),t=Math.max(U.value,H.value);document.querySelectorAll(".calendar-cell").forEach(l=>{const a=l.getAttribute("data-day"),n=l.getAttribute("data-hour");if(null===a||null===n)return;const o=parseInt(a,10),s=parseFloat(n);isNaN(o)||isNaN(s)||o===Y.value&&s>=e&&s<=t&&(l.classList.add("bg-sage-pale"),l.offsetHeight,console.debug(`Highlighted cell: day=${o}, hour=${s}`))})};c(()=>(document.addEventListener("mouseup",Ce),r.value&&r.value.addEventListener("mouseleave",Ce),()=>{document.removeEventListener("mouseup",Ce),document.removeEventListener("mousemove",ke),r.value&&r.value.removeEventListener("mouseleave",Ce)}));const Oe=e=>{W.value=JSON.parse(JSON.stringify(e)),W.value.billing_code_id=Number(W.value.billing_code_id||0),"ENTRY_STATE_REJECTED"===W.value.state&&(W.value.state="ENTRY_STATE_DRAFT"),h.value=!0,e.impersonate_as_user_id&&e.impersonate_as_user_id>0?(w.value=!0,W.value.impersonate_as_user_id=Number(e.impersonate_as_user_id)):(w.value=!1,W.value.impersonate_as_user_id=null)},Re=()=>{h.value=!1,W.value=yt(),w.value=!1},De=async()=>{var e;p.value=null,k.value=!0;try{const l=Number(W.value.billing_code_id);if(isNaN(l)||l<=0)return p.value="Please select a valid billing code",void(k.value=!1);if(W.value.billing_code_id=l,!W.value.start||!W.value.end)return p.value="Please select both start and end times",void(k.value=!1);const a=new Date(W.value.start);if(new Date(W.value.end)<=a)return p.value="End time must be after start time",void(k.value=!1);if(!W.value.notes||""===W.value.notes.trim())return p.value="Please enter notes for this timesheet entry",void(k.value=!1);if(w.value&&W.value.impersonate_as_user_id?(W.value.is_being_impersonated=!0,W.value.impersonate_as_user_id=Number(W.value.impersonate_as_user_id)):(W.value.impersonate_as_user_id=null,W.value.is_being_impersonated=!1),W.value.notes=W.value.notes.trim(),0===W.value.entry_id)await pe(W.value),Re(),await ae();else try{if(W.value.entry_id=Number(W.value.entry_id),isNaN(W.value.entry_id)||W.value.entry_id<=0)throw new Error(`Invalid entry ID: ${W.value.entry_id}`);"ENTRY_STATE_REJECTED"===W.value.state&&(W.value.state="ENTRY_STATE_DRAFT"),await fe(W.value),Re(),await ae()}catch(t){console.error("Error updating timesheet entry:",t);let l="Failed to update entry. Please try again.";if(t.message)l=t.message;else if(t.response)if(404===t.response.status)l=`Failed to update entry #${W.value.entry_id}. The entry may have been deleted or you don't have permission to edit it.`;else if(409===t.response.status){l=`This entry cannot be modified because it is in ${(null==(e=t.response.data)?void 0:e.state)||"non-draft"} state. Only entries in DRAFT state can be edited.`}else t.response.data&&t.response.data.error&&(l=t.response.data.error);p.value=l}}catch(l){console.error("Error saving timesheet entry:",l),l.message?p.value=l.message:l.response&&l.response.data&&l.response.data.error?p.value=l.response.data.error:p.value="Failed to save entry. Please try again."}finally{k.value=!1}},Me=async()=>{if(W.value&&0!==W.value.entry_id){p.value=null,k.value=!0;try{await he(W.value.entry_id),await ae(),Re()}catch(e){console.error("Error deleting timesheet entry:",e),e.response&&e.response.data&&e.response.data.error?p.value=e.response.data.error:p.value="Failed to delete entry. Please try again."}finally{k.value=!1}}},Ae=async()=>{$.value=!0;try{const e=await Et.getAuthStatus();L.value=e.connected}catch(e){console.error("Failed to check calendar auth:",e),L.value=!1}finally{$.value=!1}},Ne=async()=>{if(!L.value)try{await Et.authorize(),L.value=!0}catch(e){return void("Authorization window was closed"!==e.message&&(p.value="Failed to connect Google Calendar. Please try again."))}F.value=!0},ze=e=>{F.value=!1;const t=e=>e.substring(0,19)+".000Z";W.value.start=t(e.start),W.value.end=t(e.end),W.value.notes=e.summary+(e.description?"\n\n"+e.description:""),W.value.is_meeting=!0,h.value||(h.value=!0)},Pe=()=>{F.value=!1},je=a(()=>b.value.length?b.value[0].toISOString().split("T")[0]:""),Fe=a(()=>b.value.length?b.value[6].toISOString().split("T")[0]:""),Le=a(()=>{if(!b.value.length)return"";const e=b.value[0];return e?e.toLocaleDateString("en-US",{month:"long",year:"numeric"}):""}),$e=a(()=>{if(!b.value.length)return"";const e=b.value[0],t=b.value[6];if(!e||!t)return"";return`${de(e,"short")} - ${de(t,"short")}`}),Ve=a(()=>b.value.length?b.value.map(e=>{if(!e)return{dayName:"",dayNum:"",date:new Date,isToday:!1};return{dayName:e.toLocaleDateString("en-US",{weekday:"short",timeZone:"UTC"}),dayNum:e.getDate(),date:e,isToday:Be(e)}}):[]),Be=e=>{const t=new Date;t.setHours(0,0,0,0);const l=t.toISOString().split("T")[0];return e.toISOString().split("T")[0]===l},Ue=e=>{if(!e||!v.value)return[];const t=de(e,"input");return v.value.filter(e=>{if(!e||!e.start)return!1;try{return e.start.split("T")[0]===t}catch(l){return console.error("Error comparing entry date:",l),!1}})},He=a(()=>v.value&&b.value.length?v.value.reduce((e,t)=>{if(!t.start||!t.duration_hours)return e;const l=new Date(t.start);return b.value.some(e=>e&&e.toDateString()===l.toDateString())?e+t.duration_hours:e},0).toFixed(1):"0.0"),Ye=(e,t)=>{if(!e||!t)return"0.00";try{const l=new Date(e),a=new Date(t).getTime()-l.getTime();return(a/36e5).toFixed(2)}catch(l){return console.error("Error calculating duration:",l),"0.00"}},We=(e,t)=>{W.value.start||(W.value.start=(new Date).toISOString()),W.value.end||(W.value.end=(new Date).toISOString());const l=W.value.start.split("T")[0],a=W.value.start.split("T")[1].split(":").slice(0,2).join(":"),n=W.value.end.split("T")[1].split(":").slice(0,2).join(":");let o=l;"date"===e?(o=t,W.value.start=`${o}T${a}:00.000Z`,W.value.end=`${o}T${n}:00.000Z`):"start-time"===e?W.value.start=`${o}T${t}:00.000Z`:"end-time"===e&&(W.value.end=`${o}T${t}:00.000Z`)};return(a,o)=>(t(),e(f,null,[l("div",Xt,[l("div",Qt,[l("div",el,[l("div",tl,[M(C(Le.value)+" ",1),l("span",ll,C($e.value),1),l("span",al," Total: "+C(He.value)+" hours ",1)]),l("div",nl,[o[16]||(o[16]=l("svg",{class:"h-3.5 w-3.5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)),N(l("select",{"onUpdate:modelValue":o[0]||(o[0]=e=>E.value=e),onChange:o[1]||(o[1]=e=>Se(E.value)),class:"block rounded border-gray-300 bg-white text-gray-900 focus:border-sage focus:outline-none focus:ring-sage",style:{padding:"0.25rem 2rem 0.25rem 0.5rem","font-size":"0.688rem","line-height":"1.2"}},[o[15]||(o[15]=l("option",{value:null},"My Timesheet",-1)),(t(!0),e(f,null,A(x.value,l=>(t(),e("option",{key:l.id,value:l.id},C(l.first_name)+" "+C(l.last_name),9,ol))),128))],544),[[z,E.value]])])]),l("div",{class:"flex space-x-2"},[l("button",{onClick:ee,class:"inline-flex items-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50"}," Previous "),l("button",{onClick:le,class:"inline-flex items-center rounded-md bg-sage px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-sage-dark focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sage"}," Today "),l("button",{onClick:te,class:"inline-flex items-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50"}," Next ")])]),E.value?(t(),e("div",sl,[l("div",rl,[l("div",il,[o[18]||(o[18]=l("svg",{class:"h-4 w-4 text-blue-400 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)),l("p",ul,[o[17]||(o[17]=l("span",{class:"font-medium"},"Viewing timesheet for:",-1)),M(" "+C(_e(E.value)),1)])]),l("button",{onClick:o[2]||(o[2]=e=>Se(null)),class:"text-xs text-blue-600 hover:text-blue-800 font-medium"}," Return to My Timesheet ")])])):S("",!0),p.value?(t(),e("div",dl,[l("div",cl,[o[20]||(o[20]=l("div",{class:"flex-shrink-0"},[l("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[l("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.28 7.22a.75.75 0 00-1.06 1.06L8.94 10l-1.72 1.72a.75.75 0 101.06 1.06L10 11.06l1.72 1.72a.75.75 0 101.06-1.06L11.06 10l1.72-1.72a.75.75 0 00-1.06-1.06L10 8.94 8.28 7.22z","clip-rule":"evenodd"})])],-1)),l("div",vl,[l("p",ml,C(p.value),1)]),l("div",pl,[l("div",fl,[l("button",{onClick:o[3]||(o[3]=e=>p.value=null),class:"inline-flex rounded-md bg-red-50 p-1.5 text-red-500 hover:bg-red-100 focus:outline-none focus:ring-2 focus:ring-red-600 focus:ring-offset-2 focus:ring-offset-red-50"},[o[19]||(o[19]=l("span",{class:"sr-only"},"Dismiss",-1)),D(n(ue),{class:"h-5 w-5","aria-hidden":"true"})])])])])])):S("",!0),m.value?(t(),e("div",hl,o[21]||(o[21]=[l("div",{class:"animate-spin h-6 w-6 text-primary"},null,-1),l("span",null,"Loading timesheet...",-1)]))):p.value&&!v.value.length?(t(),e("div",gl,C(p.value),1)):(t(),e("div",bl,[l("div",yl,[m.value?(t(),e("div",xl,o[22]||(o[22]=[l("div",{class:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-600 mb-4"},null,-1),l("span",{class:"text-gray-700"},"Loading timesheet...",-1)]))):p.value?(t(),e("div",wl,[o[24]||(o[24]=l("i",{class:"fas fa-exclamation-circle text-4xl text-red-600 mb-4"},null,-1)),l("span",Sl,C(p.value),1),l("button",{onClick:ae,class:"mt-4 inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none"},o[23]||(o[23]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),M(" Retry ")]))])):(t(),e("div",{key:2,ref_key:"container",ref:r,class:"isolate flex flex-auto flex-col overflow-auto bg-white rounded-xl"},[l("div",_l,[l("div",{ref_key:"containerNav",ref:i,class:"sticky top-0 z-50 flex-none bg-white shadow ring-1 ring-black/5 sm:pr-8 rounded-t-xl"},[l("div",Tl,[(t(!0),e(f,null,A(Ve.value,(a,n)=>(t(),e("button",{key:n,type:"button",class:"flex flex-col items-center pb-3 pt-2",onClick:e=>Te(a.date,12)},[M(C(a.dayName.charAt(0))+" ",1),l("span",{class:T(["mt-1 flex size-8 items-center justify-center font-semibold",a.isToday?"rounded-full bg-sage text-white":"text-gray-900"])},C(a.dayNum),3)],8,kl))),128))]),l("div",Cl,[o[25]||(o[25]=l("div",{class:"col-end-1 w-14"},null,-1)),(t(!0),e(f,null,A(Ve.value,(a,n)=>(t(),e("div",{key:n,class:"flex items-center justify-center py-3",onClick:e=>Te(a.date,12),style:{cursor:"pointer"}},[l("span",{class:T({"flex items-baseline":a.isToday})},[M(C(a.dayName)+" ",1),l("span",{class:T([a.isToday?"ml-1.5 flex size-8 items-center justify-center rounded-full bg-sage font-semibold text-white":"items-center justify-center font-semibold text-gray-900"])},C(a.dayNum),3)],2)],8,Il))),128))])],512),l("div",El,[o[28]||(o[28]=l("div",{class:"sticky left-0 z-10 w-14 flex-none bg-white ring-1 ring-gray-100"},null,-1)),l("div",Ol,[l("div",Rl,[l("div",{ref_key:"containerOffset",ref:d,class:"row-end-1 h-7"},null,512),(t(),e(f,null,A(15,a=>(t(),e(f,{key:a-1},[l("div",null,[l("div",Dl,C(a+7<12?`${a+7}AM`:a+7===12?"12PM":a+7-12+"PM"),1)]),o[26]||(o[26]=l("div",null,null,-1))],64))),64))]),l("div",Ml,[(t(),e(f,null,A(7,e=>l("div",{key:e,class:T(`col-start-${e} row-span-full`)},null,2)),64)),o[27]||(o[27]=l("div",{class:"col-start-8 row-span-full w-8"},null,-1))]),l("ol",Al,[(t(),e(f,null,A(30,l=>(t(),e(f,{key:`row-${l}`},[(t(!0),e(f,null,A(b.value,(a,n)=>(t(),e("div",{key:`cell-${l}-${n}`,class:"calendar-cell transition-colors duration-100",style:_([{gridRow:`${l+1}`,gridColumn:`${n+1}`,height:"2rem"},{cursor:"pointer"}]),"data-hour":8+(l-1)/2,"data-day":n,onMousedown:e=>((e,t,l)=>{const a=l.currentTarget;if(!a)return void console.error("No target element found for drag start");const n=a.getAttribute("data-day"),o=a.getAttribute("data-hour"),s=parseInt(n||"-1",10),r=parseFloat(o||"-1");-1!==s?(V.value=!0,B.value=new Date(e),U.value=r,H.value=r,Y.value=s,document.body.style.userSelect="none",Ee(),document.addEventListener("mousemove",ke),l.stopPropagation(),l.preventDefault()):console.error("Invalid column index, cannot start drag")})(a,0,e)},[S("",!0)],44,Nl))),128))],64))),64)),(t(!0),e(f,null,A(b.value,(l,a)=>(t(),e(f,{key:`entries-${a}`},[(t(!0),e(f,null,A(Ue(l),e=>(t(),I(It,{key:`${e.entry_id}-${a}`,entry:e,day:l,dayIndex:a,timeRangeStart:8,timeRangeEnd:22,onEdit:Oe},null,8,["entry","day","dayIndex"]))),128))],64))),128))])])])])],512)),D(n(ne),{as:"template",show:h.value},{default:R(()=>[D(n(ie),{as:"div",class:"relative z-50",onClose:Re},{default:R(()=>[D(n(oe),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:R(()=>o[29]||(o[29]=[l("div",{class:"fixed inset-0 bg-gray-500/75 transition-opacity"},null,-1)])),_:1}),l("div",zl,[l("div",Pl,[D(n(oe),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to":"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 translate-y-0 sm:scale-100","leave-to":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:R(()=>[D(n(se),{class:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-6 sm:w-full sm:max-w-md"},{default:R(()=>[l("div",jl,[D(n(re),{as:"h3",class:"text-base font-semibold leading-6"},{default:R(()=>[M(C(W.value.entry_id?"Edit Timesheet Entry":"New Timesheet Entry"),1)]),_:1}),l("button",{type:"button",class:"text-white hover:text-gray-200 focus:outline-none",onClick:Re},[o[30]||(o[30]=l("span",{class:"sr-only"},"Close",-1)),D(n(ue),{class:"h-5 w-5","aria-hidden":"true"})])]),"ENTRY_STATE_REJECTED"===W.value.state?(t(),e("div",Fl,o[31]||(o[31]=[l("div",{class:"flex items-center"},[l("svg",{class:"h-5 w-5 text-red-600 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[l("path",{"fill-rule":"evenodd",d:"M8.485 2.495c.673-1.167 2.357-1.167 3.03 0l6.28 10.875c.673 1.167-.17 2.625-1.516 2.625H3.72c-1.347 0-2.189-1.458-1.515-2.625L8.485 2.495zM10 5a.75.75 0 01.75.75v3.5a.75.75 0 01-1.5 0v-3.5A.75.75 0 0110 5zm0 9a1 1 0 100-2 1 1 0 000 2z","clip-rule":"evenodd"})]),l("div",{class:"flex-1"},[l("p",{class:"text-sm font-medium text-red-800"},"This entry was rejected"),l("p",{class:"text-xs text-red-700 mt-0.5"},"Make your changes and save to resubmit as DRAFT")])],-1)]))):S("",!0),l("div",Ll,[W.value.entry_id?S("",!0):(t(),e("div",$l,[l("button",{type:"button",onClick:Ne,class:"w-full inline-flex items-center justify-center gap-2 rounded-md bg-blue-50 px-3 py-2 text-sm font-medium text-blue-700 hover:bg-blue-100 border border-blue-200"},[D(n(ge),{class:"h-4 w-4"}),o[32]||(o[32]=M(" Import from Google Calendar "))])])),l("div",Vl,[D(n(st),{modelValue:G.value,"onUpdate:modelValue":[o[5]||(o[5]=e=>G.value=e),o[6]||(o[6]=e=>{e&&(W.value.billing_code_id=Number(e.id||e.billing_code_id))})],as:"div"},{default:R(()=>[D(n(rt),{class:"block text-xs font-medium text-gray-700"},{default:R(()=>o[33]||(o[33]=[M("Billing Code")])),_:1}),l("div",Bl,[l("div",Ul,[D(n(ut),{class:"block w-full rounded border-gray-300 py-1 pl-2 pr-8 text-2xs focus:border-sage focus:outline-none focus:ring-sage",onChange:o[4]||(o[4]=e=>K.value=e.target.value),"display-value":X,placeholder:"Select or search for a billing code..."}),D(n(it),{class:"absolute inset-y-0 right-0 flex items-center pr-2"},{default:R(()=>[D(n(ye),{class:"h-4 w-4 text-gray-400","aria-hidden":"true"})]),_:1}),J.value.length>0?(t(),I(n(dt),{key:0,class:"absolute z-10 mt-1 max-h-48 w-full overflow-auto rounded-md bg-white py-1 text-2xs shadow-lg ring-1 ring-black/5 focus:outline-none"},{default:R(()=>[(t(!0),e(f,null,A(J.value,a=>(t(),I(n(ct),{key:a.id,value:a,as:"template"},{default:R(({active:o,selected:s})=>[l("li",{class:T(["relative cursor-default select-none py-1.5 pl-2 pr-9 text-2xs",o?"bg-sage text-white":"text-gray-900"])},[l("div",Hl,[a.code?(t(),e("span",{key:0,style:_({backgroundColor:Z(a.code)}),class:T(["inline-flex items-center px-1.5 py-0.5 rounded text-[0.6rem] font-medium",q(Z(a.code))])},C(a.code),7)):S("",!0),l("span",{class:T(["ml-2 truncate",s&&"font-semibold"])},C(a.name),3)]),s?(t(),e("span",{key:0,class:T(["absolute inset-y-0 right-0 flex items-center pr-2",o?"text-white":"text-sage"])},[D(n(be),{class:"h-4 w-4","aria-hidden":"true"})],2)):S("",!0)],2)]),_:2},1032,["value"]))),128))]),_:1})):S("",!0)]),G.value&&G.value.code?(t(),e("div",Yl,[l("span",{style:_({backgroundColor:Z(G.value.code)}),class:T(["inline-flex items-center px-1.5 py-0.5 rounded text-[0.65rem] font-medium",q(Z(G.value.code))])},C(G.value.code),7)])):S("",!0)])]),_:1},8,["modelValue"])]),l("div",Wl,[l("div",Zl,[l("div",ql,[o[34]||(o[34]=l("label",{class:"block text-2xs font-medium text-gray-700"},"Date",-1)),l("input",{type:"date",id:"entry-date",value:W.value.start?W.value.start.split("T")[0]:"",onInput:o[7]||(o[7]=e=>We("date",e.target.value)),class:"mt-0.5 bg-white border border-gray-300 text-gray-900 text-2xs rounded focus:ring-sage focus:border-sage block w-full p-1",required:""},null,40,Kl)]),l("div",Jl,[o[35]||(o[35]=l("label",{class:"block text-2xs font-medium text-gray-700"},"Start Time",-1)),l("input",{type:"time",id:"start-time",value:W.value.start?W.value.start.split("T")[1].split(":").slice(0,2).join(":"):"",onInput:o[8]||(o[8]=e=>We("start-time",e.target.value)),class:"mt-0.5 bg-white border border-gray-300 text-gray-900 text-2xs rounded focus:ring-sage focus:border-sage block w-full p-1",required:""},null,40,Gl)]),l("div",Xl,[o[36]||(o[36]=l("label",{class:"block text-2xs font-medium text-gray-700"},"End Time",-1)),l("input",{type:"time",id:"end-time",value:W.value.end?W.value.end.split("T")[1].split(":").slice(0,2).join(":"):"",onInput:o[9]||(o[9]=e=>We("end-time",e.target.value)),class:"mt-0.5 bg-white border border-gray-300 text-gray-900 text-2xs rounded focus:ring-sage focus:border-sage block w-full p-1",required:""},null,40,Ql)])]),l("div",ea,[l("span",ta," Duration: "+C(Ye(W.value.start,W.value.end))+" hrs ",1)])]),l("div",la,[o[37]||(o[37]=l("div",{class:"flex items-center"},[l("label",{class:"block text-2xs font-medium text-gray-700"},"Notes"),l("span",{class:"ml-1 text-2xs text-red-500"},"*"),l("span",{class:"ml-1 text-2xs text-gray-400"},"(required)")],-1)),N(l("textarea",{"onUpdate:modelValue":o[10]||(o[10]=e=>W.value.notes=e),rows:"4",placeholder:"Enter notes about this timesheet entry...",class:"mt-0.5 block w-full rounded border border-gray-300 py-1.5 px-2 shadow-sm focus:border-sage focus:outline-none focus:ring-sage text-2xs resize-none"},null,512),[[P,W.value.notes]])]),l("div",aa,[l("label",na,[N(l("input",{type:"checkbox","onUpdate:modelValue":o[11]||(o[11]=e=>W.value.is_meeting=e),class:"h-3 w-3 rounded border-gray-300 text-sage focus:ring-sage"},null,512),[[j,W.value.is_meeting]]),o[38]||(o[38]=l("span",{class:"ml-2 text-2xs text-gray-600"}," This is a meeting ",-1))])]),l("div",oa,[D(n(ht),{as:"div",class:"flex items-center justify-between mb-2"},{default:R(()=>[D(n(bt),{as:"span",class:"text-2xs text-gray-500"},{default:R(()=>o[39]||(o[39]=[M(" Impersonation Mode ")])),_:1}),D(n(gt),{modelValue:w.value,"onUpdate:modelValue":o[12]||(o[12]=e=>w.value=e),class:T([w.value?"bg-sage":"bg-gray-200","relative inline-flex h-4 w-8 items-center rounded-full"])},{default:R(()=>[l("span",{class:T([w.value?"translate-x-4":"translate-x-0.5","inline-block h-3 w-3 transform rounded-full bg-white transition"])},null,2)]),_:1},8,["modelValue","class"])]),_:1}),w.value?(t(),e("div",sa,[o[41]||(o[41]=l("div",{class:"flex items-start mb-1"},[l("svg",{class:"h-3 w-3 text-yellow-400 mt-0.5 mr-1 flex-shrink-0",viewBox:"0 0 20 20",fill:"currentColor"},[l("path",{"fill-rule":"evenodd",d:"M8.485 2.495c.673-1.167 2.357-1.167 3.03 0l6.28 10.875c.673 1.167-.17 2.625-1.516 2.625H3.72c-1.347 0-2.189-1.458-1.515-2.625L8.485 2.495zM10 5a.75.75 0 01.75.75v3.5a.75.75 0 01-1.5 0v-3.5A.75.75 0 0110 5zm0 9a1 1 0 100-2 1 1 0 000 2z","clip-rule":"evenodd"})]),l("p",{class:"text-2xs text-yellow-700"},[l("strong",null,"Warning:"),M(" Creating entry for another user. ")])],-1)),N(l("select",{"onUpdate:modelValue":o[13]||(o[13]=e=>W.value.impersonate_as_user_id=e),onChange:o[14]||(o[14]=e=>W.value.is_being_impersonated=(W.value.impersonate_as_user_id??0)>0),class:"block w-full rounded border-gray-300 py-1 pl-2 pr-8 text-2xs focus:border-sage focus:outline-none focus:ring-sage"},[o[40]||(o[40]=l("option",{value:null},"Select a user",-1)),(t(!0),e(f,null,A(x.value,l=>(t(),e("option",{key:l.id,value:Number(l.id)},C(l.first_name)+" "+C(l.last_name),9,ra))),128))],544),[[z,W.value.impersonate_as_user_id]])])):S("",!0)])]),l("div",ia,[l("button",{type:"button",class:"inline-flex justify-center rounded bg-sage px-2.5 py-1 text-xs font-semibold text-white shadow-sm hover:bg-sage-dark sm:ml-2 sm:w-auto",onClick:De,disabled:k.value},[k.value?(t(),e(f,{key:0},[o[42]||(o[42]=l("svg",{class:"animate-spin -ml-1 mr-2 h-3 w-3 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[l("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),l("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),o[43]||(o[43]=M(" Saving... "))],64)):(t(),e(f,{key:1},[M(C(W.value.entry_id?"Update":"Create"),1)],64))],8,ua),l("button",{type:"button",class:"mt-2 inline-flex justify-center rounded bg-white px-2.5 py-1 text-xs font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto",onClick:Re,disabled:k.value}," Cancel ",8,da),l("div",ca,[k.value?(t(),e("span",va,"Processing...")):S("",!0)]),0!==W.value.entry_id?(t(),e("button",{key:0,type:"button",class:"mt-2 inline-flex justify-center rounded bg-red-600 px-2.5 py-1 text-xs font-semibold text-white shadow-sm hover:bg-red-500 sm:mt-0 sm:w-auto",onClick:Me,disabled:k.value},[k.value?(t(),e(f,{key:0},[o[44]||(o[44]=l("svg",{class:"animate-spin -ml-1 mr-2 h-3 w-3 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[l("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),l("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),o[45]||(o[45]=M(" Deleting... "))],64)):(t(),e(f,{key:1},[M(" Delete ")],64))],8,ma)):S("",!0)])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])]))]),D(Gt,{show:F.value,"start-date":je.value,"end-date":Fe.value,onClose:Pe,onSelect:ze},null,8,["show","start-date","end-date"])],64))}}),fa=E(pa,[["__scopeId","data-v-e1f6476b"]]);export{fa as default};
