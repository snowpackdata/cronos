import{a as e,g as t,f as a,u as s,c as l}from"./projects-QDzbZapS.js";import{b as n}from"./timesheet-CKxTTCGp.js";import{O as r,P as o,Q as i,h as c,r as d,b as u,w as m,f as p,A as g,C as v,u as f,o as y,D as x,a as b,y as _,x as h,E as w,z as j,H as k,J as D,I,c as N,G as E,F as L,K as A,q as C,R as P,v as S,_ as T}from"./index-2uCPEpPG.js";import{f as U}from"./accounts-B2EQlq8f.js";import{r as Y}from"./XMarkIcon-Bml7Cvcl.js";import{S as B,h as $,G as O,V as M,Y as q}from"./transition-CMIuM6C3.js";import{f as F}from"./rates-Bm4DowW0.js";import{A as G,_ as H,c as V}from"./AssetUploaderModal.vue_vue_type_script_setup_true_lang-0SyBpzG8.js";import{_ as W}from"./StaffAvatar.vue_vue_type_script_setup_true_lang-ChSVjzSa.js";function J(){const e=new Date,t=new Date;t.setUTCMonth(e.getUTCMonth()+6);return{ID:0,name:"",account_id:0,account:{ID:0,name:"",legal_name:"",address:"",website:"",email:"",type:"ACCOUNT_TYPE_CLIENT",billing_frequency:"BILLING_TYPE_MONTHLY",budget_hours:0,budget_dollars:0,projects_single_invoice:!0,clients:[],client_users:[],assets:[]},active_start:`${e.getUTCFullYear()}-${String(e.getUTCMonth()+1).padStart(2,"0")}-${String(e.getUTCDate()).padStart(2,"0")}`,active_end:`${t.getUTCFullYear()}-${String(t.getUTCMonth()+1).padStart(2,"0")}-${String(t.getUTCDate()).padStart(2,"0")}`,budget_hours:0,budget_dollars:0,budget_cap_hours:0,budget_cap_dollars:0,internal:!1,billing_frequency:"BILLING_TYPE_MONTHLY",project_type:"PROJECT_TYPE_NEW",description:"",staffing_assignments:[],assets:[]}}const R={class:"fixed inset-0 overflow-hidden"},K={class:"absolute inset-0 overflow-hidden"},z={class:"pointer-events-none fixed inset-y-0 right-0 flex max-w-full pl-10 sm:pl-16"},X={class:"flex-1"},Q={class:"flex items-start justify-between space-x-3"},Z={class:"space-y-1"},ee={class:"text-sm text-gray-100"},te={class:"flex h-7 items-center"},ae={class:"space-y-6 py-6 sm:space-y-0 sm:divide-y sm:divide-gray-200 sm:py-0"},se={class:"space-y-2 px-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:space-y-0 sm:px-6 sm:py-5"},le={class:"sm:col-span-2"},ne={class:"space-y-2 px-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:space-y-0 sm:px-6 sm:py-5"},re={class:"sm:col-span-2"},oe=["value"],ie={class:"space-y-2 px-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:space-y-0 sm:px-6 sm:py-5"},ce={class:"sm:col-span-2"},de={class:"space-y-2 px-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:space-y-0 sm:px-6 sm:py-5"},ue={class:"sm:col-span-2"},me={class:"space-y-2 px-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:space-y-0 sm:px-6 sm:py-5"},pe={class:"sm:col-span-2"},ge={class:"space-y-2 px-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:space-y-0 sm:px-6 sm:py-5"},ve={class:"sm:col-span-2"},fe={class:"space-y-2 px-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:space-y-0 sm:px-6 sm:py-5"},ye={class:"sm:col-span-2 flex items-center"},xe={class:"space-y-2 px-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:space-y-0 sm:px-6 sm:py-5"},be={class:"sm:col-span-2"},_e={class:"space-y-2 px-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:space-y-0 sm:px-6 sm:py-5"},he={class:"sm:col-span-2"},we={class:"space-y-2 px-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:space-y-0 sm:px-6 sm:py-5"},je={class:"sm:col-span-2"},ke={class:"space-y-2 px-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:space-y-0 sm:px-6 sm:py-5"},De={class:"sm:col-span-2"},Ie={class:"space-y-2 px-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:space-y-0 sm:px-6 sm:py-5"},Ne={class:"sm:col-span-2"},Ee={class:"space-y-2 px-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:space-y-0 sm:px-6 sm:py-5"},Le={class:"sm:col-span-2"},Ae=["value"],Ce={class:"space-y-2 px-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:space-y-0 sm:px-6 sm:py-5"},Pe={class:"sm:col-span-2"},Se=["value"],Te={class:"px-4 sm:px-6 sm:py-5"},Ue={key:0},Ye={role:"list",class:"divide-y divide-gray-200 border-t border-b border-gray-200"},Be={class:"flex items-center justify-between gap-x-2"},$e={class:"flex-1 min-w-0"},Oe={class:"text-sm font-medium text-gray-800 truncate"},Me={key:0,class:"text-gray-500 text-xs font-normal"},qe={class:"mt-1 flex flex-col sm:flex-row sm:flex-wrap sm:items-center gap-x-3 gap-y-1 text-xs text-gray-500"},Fe={key:0},Ge={key:1},He={class:"flex-shrink-0 flex items-center gap-x-1.5"},Ve=["onClick"],We={key:1,class:"mt-2"},Je={class:"shrink-0 border-t border-gray-200 px-4 py-5 sm:px-6"},Re={class:"flex justify-end space-x-3"},Ke=c({__name:"ProjectDrawer",props:{isOpen:{type:Boolean},projectData:{}},emits:["close","save"],setup(t,{emit:a}){const s=d(J()),l=d([]),o=d([]),i=u(()=>!(!s.value||!s.value.ID||0===s.value.ID)),c=t,P=a,S=e=>{if(!e)return"";try{const t=new Date(e);if(isNaN(t.getTime()))return"string"==typeof e&&/^\d{4}-\d{2}-\d{2}$/.test(e)?e:"";const a=t.getFullYear(),s=(t.getMonth()+1).toString().padStart(2,"0");return`${a}-${s}-${t.getDate().toString().padStart(2,"0")}`}catch(t){return""}},T=e=>{if(!e)return"N/A";if("string"==typeof e&&e.startsWith("0001-01-01"))return"N/A";try{const t=new Date(e);return isNaN(t.getTime())?"N/A":t.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})}catch(t){return"N/A"}},F=e=>{const t=new Date;t.setHours(0,0,0,0);const a=e.start_date?new Date(e.start_date):null,s=e.end_date?new Date(e.end_date):null;return a&&a.setHours(0,0,0,0),s&&s.setHours(0,0,0,0),a&&t<a?"Upcoming":s&&t>s?"Ended":a&&!s?"Active (no end date)":a&&s&&t>=a&&t<=s?"Active":!a&&s&&t<=s?"Active (no start date)":a||s?"Inactive":"Active (no dates)"},G=e=>{const t=F(e);return t.includes("Active")?"text-green-700":"Upcoming"===t?"text-blue-700":"Ended"===t?"text-gray-600":"text-gray-500"};m(()=>c.isOpen,e=>{if(e)if(c.projectData){const e=JSON.parse(JSON.stringify(c.projectData)),t=["BILLING_TYPE_MONTHLY","BILLING_TYPE_PROJECT","BILLING_TYPE_BIWEEKLY","BILLING_TYPE_WEEKLY","BILLING_TYPE_BIMONTHLY"];let a=e.billing_frequency;a&&t.includes(a)||(a="BILLING_TYPE_MONTHLY"),s.value={...e,active_start:S(e.active_start),active_end:S(e.active_end),description:void 0===e.description?"":e.description,budget_cap_hours:Number(e.budget_cap_hours)||0,budget_cap_dollars:Number(e.budget_cap_dollars)||0,billing_frequency:a,staffing_assignments:(e.staffing_assignments||[]).map(e=>({...e,start_date:e.start_date,end_date:e.end_date}))},c.projectData.account&&c.projectData.account.ID?s.value.account_id=Number(c.projectData.account.ID):c.projectData.account_id?s.value.account_id=Number(c.projectData.account_id):s.value.account_id=0}else s.value=J()},{deep:!0}),p(async()=>{try{const e=await U();l.value=e||[];const t=await n();o.value=t||[]}catch(e){console.error("Error fetching accounts or staff for drawer:",e)}});const H=()=>{P("close")},V=()=>{s.value.name?s.value.account_id&&0!==Number(s.value.account_id)?(s.value.account_id=Number(s.value.account_id),s.value.active_start?s.value.active_end?P("save",{...s.value}):alert("End date is required."):alert("Start date is required.")):alert("Account is required."):alert("Project name is required.")},W=async t=>{if(confirm("Are you sure you want to delete this staffing assignment?"))try{await(async e=>{try{await r("project_assignments",e)}catch(t){throw console.error(`API Error Deleting Project Assignment ${e}:`,t),t}})(t),await(async()=>{if(s.value&&s.value.ID)try{const t=await e(s.value.ID);s.value={...t,active_start:S(t.active_start),active_end:S(t.active_end),description:void 0===t.description?"":t.description,staffing_assignments:(t.staffing_assignments||[]).map(e=>({...e,start_date:e.start_date,end_date:e.end_date}))}}catch(t){console.error("Failed to refresh project data:",t),alert("Failed to refresh project details after update. Please close and reopen the drawer.")}})()}catch(a){console.error("Error deleting assignment:",a),alert("Failed to delete assignment.")}};return(e,t)=>(y(),g(f(B),{as:"template",show:e.isOpen},{default:v(()=>[x(f(q),{class:"relative z-10",onClose:H},{default:v(()=>[t[44]||(t[44]=b("div",{class:"fixed inset-0"},null,-1)),b("div",R,[b("div",K,[b("div",z,[x(f($),{as:"template",enter:"transform transition ease-in-out duration-500 sm:duration-700","enter-from":"translate-x-full","enter-to":"translate-x-0",leave:"transform transition ease-in-out duration-500 sm:duration-700","leave-from":"translate-x-0","leave-to":"translate-x-full"},{default:v(()=>[x(f(O),{class:"pointer-events-auto w-screen max-w-2xl"},{default:v(()=>[b("form",{class:"flex h-full flex-col overflow-y-scroll bg-white shadow-xl",onSubmit:_(V,["prevent"])},[b("div",X,[b("div",{class:h(["bg-sage-dark px-4 py-6 sm:px-6",{"bg-blue-700":i.value}])},[b("div",Q,[b("div",Z,[x(f(M),{class:"text-base font-semibold text-white"},{default:v(()=>[w(j(i.value?"Edit Project":"New Project"),1)]),_:1}),b("p",ee,j(i.value?"Update the project details below.":"Get started by filling in the information below to create your new project."),1)]),b("div",te,[b("button",{type:"button",class:"relative text-white hover:text-gray-200",onClick:H},[t[14]||(t[14]=b("span",{class:"absolute -inset-2.5"},null,-1)),t[15]||(t[15]=b("span",{class:"sr-only"},"Close panel",-1)),x(f(Y),{class:"h-6 w-6","aria-hidden":"true"})])])])],2),b("div",ae,[b("div",se,[t[16]||(t[16]=b("div",null,[b("label",{for:"project-name",class:"block text-sm/6 font-medium text-gray-900 sm:mt-1.5"},"Project name")],-1)),b("div",le,[k(b("input",{type:"text",name:"project-name",id:"project-name","onUpdate:modelValue":t[0]||(t[0]=e=>s.value.name=e),class:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6"},null,512),[[D,s.value.name]])])]),b("div",ne,[t[18]||(t[18]=b("div",null,[b("label",{for:"project-account",class:"block text-sm/6 font-medium text-gray-900 sm:mt-1.5"},"Account")],-1)),b("div",re,[k(b("select",{id:"project-account",name:"project-account","onUpdate:modelValue":t[1]||(t[1]=e=>s.value.account_id=e),class:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6"},[t[17]||(t[17]=b("option",{value:""},"Select an account",-1)),(y(!0),N(L,null,E(l.value,e=>(y(),N("option",{key:e.ID,value:e.ID},j(e.name),9,oe))),128))],512),[[I,s.value.account_id]])])]),b("div",ie,[t[20]||(t[20]=b("div",null,[b("label",{for:"project-description",class:"block text-sm/6 font-medium text-gray-900 sm:mt-1.5"},"Description")],-1)),b("div",ce,[k(b("textarea",{id:"project-description",name:"project-description",rows:"4","onUpdate:modelValue":t[2]||(t[2]=e=>s.value.description=e),class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[D,s.value.description]]),t[19]||(t[19]=b("p",{class:"mt-2 text-xs text-gray-500"},"A brief description for this project.",-1))])]),b("div",de,[t[22]||(t[22]=b("div",null,[b("label",{for:"project-type",class:"block text-sm/6 font-medium text-gray-900 sm:mt-1.5"},"Project Type")],-1)),b("div",ue,[k(b("select",{id:"project-type",name:"project-type","onUpdate:modelValue":t[3]||(t[3]=e=>s.value.project_type=e),class:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-sage sm:text-sm/6"},t[21]||(t[21]=[b("option",{value:"PROJECT_TYPE_NEW"},"New Project",-1),b("option",{value:"PROJECT_TYPE_EXISTING"},"Existing Project",-1)]),512),[[I,s.value.project_type]])])]),b("div",me,[t[23]||(t[23]=b("div",null,[b("label",{for:"project-start-date",class:"block text-sm/6 font-medium text-gray-900 sm:mt-1.5"},"Start Date")],-1)),b("div",pe,[k(b("input",{type:"date",name:"project-start-date",id:"project-start-date","onUpdate:modelValue":t[4]||(t[4]=e=>s.value.active_start=e),class:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6"},null,512),[[D,s.value.active_start]])])]),b("div",ge,[t[24]||(t[24]=b("div",null,[b("label",{for:"project-end-date",class:"block text-sm/6 font-medium text-gray-900 sm:mt-1.5"},"End Date")],-1)),b("div",ve,[k(b("input",{type:"date",name:"project-end-date",id:"project-end-date","onUpdate:modelValue":t[5]||(t[5]=e=>s.value.active_end=e),class:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6"},null,512),[[D,s.value.active_end]])])]),b("div",fe,[t[26]||(t[26]=b("div",null,[b("label",{for:"project-internal",class:"block text-sm/6 font-medium text-gray-900 sm:mt-1.5"},"Internal Project")],-1)),b("div",ye,[k(b("input",{type:"checkbox",name:"project-internal",id:"project-internal","onUpdate:modelValue":t[6]||(t[6]=e=>s.value.internal=e),class:"h-4 w-4 rounded border-gray-300 text-sage focus:ring-sage"},null,512),[[A,s.value.internal]]),t[25]||(t[25]=b("label",{for:"project-internal",class:"ml-2 text-sm text-gray-600"}," Mark this project as internal ",-1))])]),b("div",xe,[t[28]||(t[28]=b("div",null,[b("label",{for:"billing-frequency",class:"block text-sm/6 font-medium text-gray-900 sm:mt-1.5"},"Billing Frequency")],-1)),b("div",be,[k(b("select",{id:"billing-frequency",name:"billing-frequency","onUpdate:modelValue":t[7]||(t[7]=e=>s.value.billing_frequency=e),class:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-sage sm:text-sm/6"},t[27]||(t[27]=[b("option",{value:"BILLING_TYPE_MONTHLY"},"Monthly",-1),b("option",{value:"BILLING_TYPE_PROJECT"},"Project",-1),b("option",{value:"BILLING_TYPE_BIWEEKLY"},"Bi-Weekly",-1),b("option",{value:"BILLING_TYPE_WEEKLY"},"Weekly",-1),b("option",{value:"BILLING_TYPE_BIMONTHLY"},"Bi-Monthly",-1)]),512),[[I,s.value.billing_frequency]])])]),b("div",_e,[t[29]||(t[29]=b("div",null,[b("label",{for:"budget-hours",class:"block text-sm/6 font-medium text-gray-900 sm:mt-1.5"},"Budget Hours")],-1)),b("div",he,[k(b("input",{type:"number",name:"budget-hours",id:"budget-hours","onUpdate:modelValue":t[8]||(t[8]=e=>s.value.budget_hours=e),min:"0",class:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-sage sm:text-sm/6"},null,512),[[D,s.value.budget_hours]])])]),b("div",we,[t[30]||(t[30]=b("div",null,[b("label",{for:"budget-dollars",class:"block text-sm/6 font-medium text-gray-900 sm:mt-1.5"},"Budget Dollars")],-1)),b("div",je,[k(b("input",{type:"number",name:"budget-dollars",id:"budget-dollars","onUpdate:modelValue":t[9]||(t[9]=e=>s.value.budget_dollars=e),min:"0",class:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-sage sm:text-sm/6"},null,512),[[D,s.value.budget_dollars]])])]),b("div",ke,[t[32]||(t[32]=b("div",null,[b("label",{for:"budget-cap-hours",class:"block text-sm/6 font-medium text-gray-900 sm:mt-1.5"},"Budget Cap Hours")],-1)),b("div",De,[k(b("input",{type:"number",name:"budget-cap-hours",id:"budget-cap-hours","onUpdate:modelValue":t[10]||(t[10]=e=>s.value.budget_cap_hours=e),min:"0",class:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-sage sm:text-sm/6"},null,512),[[D,s.value.budget_cap_hours,void 0,{number:!0}]]),t[31]||(t[31]=b("p",{class:"mt-2 text-xs text-gray-500"},"Optional: Overall hour cap for the entire project lifecycle.",-1))])]),b("div",Ie,[t[34]||(t[34]=b("div",null,[b("label",{for:"budget-cap-dollars",class:"block text-sm/6 font-medium text-gray-900 sm:mt-1.5"},"Budget Cap Dollars")],-1)),b("div",Ne,[k(b("input",{type:"number",name:"budget-cap-dollars",id:"budget-cap-dollars","onUpdate:modelValue":t[11]||(t[11]=e=>s.value.budget_cap_dollars=e),min:"0",class:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-sage sm:text-sm/6"},null,512),[[D,s.value.budget_cap_dollars,void 0,{number:!0}]]),t[33]||(t[33]=b("p",{class:"mt-2 text-xs text-gray-500"},"Optional: Overall monetary cap for the entire project lifecycle.",-1))])]),b("div",Ee,[t[36]||(t[36]=b("div",null,[b("label",{for:"project-ae",class:"block text-sm/6 font-medium text-gray-900 sm:mt-1.5"},"Account Executive")],-1)),b("div",Le,[k(b("select",{id:"project-ae",name:"project-ae","onUpdate:modelValue":t[12]||(t[12]=e=>s.value.ae_id=e),class:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-sage sm:text-sm/6"},[t[35]||(t[35]=b("option",{value:""},"Select an Account Executive",-1)),(y(!0),N(L,null,E(o.value,e=>(y(),N("option",{key:e.ID,value:e.ID},j(e.first_name)+" "+j(e.last_name),9,Ae))),128))],512),[[I,s.value.ae_id]])])]),b("div",Ce,[t[38]||(t[38]=b("div",null,[b("label",{for:"project-sdr",class:"block text-sm/6 font-medium text-gray-900 sm:mt-1.5"},"Sales Development Representative")],-1)),b("div",Pe,[k(b("select",{id:"project-sdr",name:"project-sdr","onUpdate:modelValue":t[13]||(t[13]=e=>s.value.sdr_id=e),class:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-sage sm:text-sm/6"},[t[37]||(t[37]=b("option",{value:""},"Select a Sales Development Representative",-1)),(y(!0),N(L,null,E(o.value,e=>(y(),N("option",{key:e.ID,value:e.ID},j(e.first_name)+" "+j(e.last_name),9,Se))),128))],512),[[I,s.value.sdr_id]])])]),b("div",Te,[t[43]||(t[43]=b("h3",{class:"text-sm font-medium leading-6 text-gray-900 mb-2"},"Staffing Assignments",-1)),s.value.staffing_assignments&&s.value.staffing_assignments.length>0?(y(),N("div",Ue,[b("ul",Ye,[(y(!0),N(L,null,E(s.value.staffing_assignments,e=>{var a,s,l,n;return y(),N("li",{key:e.ID,class:"py-2.5"},[b("div",Be,[b("div",$e,[b("p",Oe,[w(j(null==(a=e.employee)?void 0:a.first_name)+" "+j(null==(s=e.employee)?void 0:s.last_name)+" ",1),(null==(l=e.employee)?void 0:l.title)?(y(),N("span",Me,"("+j(null==(n=e.employee)?void 0:n.title)+")",1)):C("",!0)]),b("div",qe,[void 0!==e.commitment?(y(),N("p",Fe,[t[39]||(t[39]=b("i",{class:"far fa-clock mr-0.5"},null,-1)),w(" "+j(e.commitment)+" hr/wk ",1)])):C("",!0),e.start_date||e.end_date?(y(),N("p",Ge,[t[40]||(t[40]=b("i",{class:"far fa-calendar-alt mr-0.5"},null,-1)),w(" "+j(T(e.start_date))+" - "+j(T(e.end_date)),1)])):C("",!0),b("p",{class:h(G(e))}," Status: "+j(F(e)),3)])]),b("div",He,[b("button",{onClick:_(t=>W(e.ID),["prevent"]),type:"button",class:"p-1 text-gray-400 hover:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 rounded"},t[41]||(t[41]=[b("span",{class:"sr-only"},"Delete assignment",-1),b("i",{class:"fas fa-trash-alt h-3.5 w-3.5"},null,-1)]),8,Ve)])])])}),128))])])):(y(),N("div",We,t[42]||(t[42]=[b("p",{class:"text-sm text-gray-500 italic"},"No staff currently assigned to this project.",-1)])))])])]),b("div",Je,[b("div",Re,[b("button",{type:"button",class:"rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50",onClick:H}," Cancel "),b("button",{type:"submit",class:h(["inline-flex justify-center rounded-md px-3 py-2 text-sm font-semibold text-white shadow-sm focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2",i.value?"bg-blue-600 hover:bg-blue-700 focus-visible:outline-blue-600":"bg-sage hover:bg-sage-dark focus-visible:outline-sage"])},j(i.value?"Update Project":"Create Project"),3)])])],32)]),_:1})]),_:1})])])])]),_:1})]),_:1},8,["show"]))}}),ze={class:"timeline-editor"},Xe={class:"timeline-container border border-gray-300 rounded-lg overflow-hidden bg-white"},Qe={class:"timeline-header-wrapper"},Ze={class:"timeline-header bg-gray-50 border-b border-gray-300 flex"},et={class:"text-xs font-medium text-gray-700"},tt={class:"timeline-body-wrapper"},at={class:"timeline-body p-2"},st={class:"commitment-track flex"},lt=["onMousedown"],nt={class:"week-bar-text"},rt={class:"timeline-footer bg-gray-50 border-t border-gray-300 p-2 flex gap-2 text-xs"},ot={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},it={class:"bg-white rounded-lg p-4 w-80 shadow-xl"},ct={class:"text-sm font-semibold mb-3"},dt={class:"mb-3"},ut={class:"block text-xs text-gray-600 mb-1"},mt=T(c({__name:"TimelineEditor",props:{startDate:{},endDate:{},segments:{}},emits:["update:segments"],setup(e,{emit:t}){const a=e,s=t,l=u(()=>{const e=new Date(a.startDate),t=new Date(a.endDate),s=[],l=new Date(e);l.setDate(l.getDate()-l.getDay());let n=0;for(;l<=t&&n<104;)s.push(new Date(l)),l.setDate(l.getDate()+7),n++;return s}),n=d([]),r=d(!1);m(()=>[a.segments,l.value.length],()=>{r.value||(n.value=l.value.map(e=>{if(!a.segments||0===a.segments.length)return 0;for(const t of a.segments){const a=new Date(t.start_date),s=new Date(t.end_date);if(e>=a&&e<=s)return t.commitment}return 0}))},{immediate:!0}),m(n,e=>{r.value=!0;const t=[];let a=null;e.forEach((e,s)=>{const n=l.value[s],r=`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}-${String(n.getDate()).padStart(2,"0")}`,o=new Date(n);o.setDate(o.getDate()+6);const i=`${o.getFullYear()}-${String(o.getMonth()+1).padStart(2,"0")}-${String(o.getDate()).padStart(2,"0")}`;e>0?a&&a.commitment===e?a.end_date=i:(a&&t.push(a),a={start_date:r,end_date:i,commitment:e}):a&&(t.push(a),a=null)}),a&&t.push(a),s("update:segments",t),setTimeout(()=>{r.value=!1},0)},{deep:!0});const o=e=>n.value[e]||0,i=e=>{const t=e/40*60;return`${Math.max(t,4)}px`},c=e=>e.toLocaleDateString("en-US",{month:"short",day:"numeric"}),g=e=>{const t=new Date(e);return t.setDate(t.getDate()+6),`${c(e)} - ${c(t)}`},v=d(null),f=d(0),x=d(0),_=d(!1),w=d(null),I=d(0),A=e=>{w.value=e,I.value=n.value[e]||0},T=()=>{if(null!==w.value){const e=[...n.value];e[w.value]=I.value,n.value=e}w.value=null},U=()=>{w.value=null},Y=d(40),B=()=>{n.value=l.value.map(()=>Y.value)},$=()=>{n.value=l.value.map(()=>0)};let O=null,M=null;return p(()=>{const e=document.querySelector(".timeline-header-wrapper"),t=document.querySelector(".timeline-body-wrapper");if(e&&t){let a=!1,s=!1;O=()=>{s||(a=!0,t.scrollLeft=e.scrollLeft,setTimeout(()=>{a=!1},50))},M=()=>{a||(s=!0,e.scrollLeft=t.scrollLeft,setTimeout(()=>{s=!1},50))},e.addEventListener("scroll",O),t.addEventListener("scroll",M)}}),P(()=>{const e=document.querySelector(".timeline-header-wrapper"),t=document.querySelector(".timeline-body-wrapper");e&&O&&e.removeEventListener("scroll",O),t&&M&&t.removeEventListener("scroll",M)}),(e,t)=>(y(),N("div",ze,[t[2]||(t[2]=b("div",{class:"mb-2 flex items-center justify-between"},[b("label",{class:"block text-sm font-medium text-gray-700"},"Weekly Commitment Schedule"),b("span",{class:"text-xs text-gray-500"},"Click weeks to adjust hours")],-1)),b("div",Xe,[b("div",Qe,[b("div",Ze,[(y(!0),N(L,null,E(l.value,(e,t)=>(y(),N("div",{class:"week-cell header-cell",key:`header-${t}`},[b("div",et,j(c(l.value[t])),1)]))),128))])]),b("div",tt,[b("div",at,[b("div",st,[(y(!0),N(L,null,E(l.value,(e,t)=>(y(),N("div",{key:`bar-${t}`,class:"week-bar-container",onMousedown:e=>((e,t)=>{e.preventDefault(),e.stopPropagation(),v.value=t,f.value=e.clientY,x.value=n.value[t]||0,_.value=!1;const a=e=>{if(null===v.value)return;_.value=!0;const t=f.value-e.clientY,a=Math.round(t/2),s=Math.max(0,Math.min(40,x.value+a)),l=[...n.value];l[v.value]=s,n.value=l},s=()=>{_.value||null===v.value||A(v.value),v.value=null,_.value=!1,document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",s)};document.addEventListener("mousemove",a),document.addEventListener("mouseup",s)})(e,t)},[b("div",{class:h(["week-bar",{"has-commitment":o(t)>0,dragging:v.value===t}]),style:S({height:i(o(t))})},[b("span",nt,j(o(t))+"h",1)],6)],40,lt))),128))])])]),b("div",rt,[b("button",{type:"button",onClick:B,class:"px-2 py-1 bg-white border border-gray-300 rounded hover:bg-gray-50"}," Fill All "),b("button",{type:"button",onClick:$,class:"px-2 py-1 bg-white border border-gray-300 rounded hover:bg-gray-50"}," Clear All "),k(b("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>Y.value=e),type:"number",min:"0",max:"40",placeholder:"Hours",class:"w-16 px-2 py-1 border border-gray-300 rounded text-xs"},null,512),[[D,Y.value,void 0,{number:!0}]])])]),null!==w.value?(y(),N("div",ot,[b("div",it,[b("h3",ct,"Edit Week "+j(w.value+1),1),b("div",dt,[b("label",ut,j(g(l.value[w.value])),1),k(b("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>I.value=e),type:"number",min:"0",max:"40",step:"5",class:"w-full px-3 py-2 border border-gray-300 rounded",placeholder:"Hours per week"},null,512),[[D,I.value,void 0,{number:!0}]])]),b("div",{class:"flex gap-2"},[b("button",{type:"button",onClick:T,class:"flex-1 bg-indigo-600 text-white px-3 py-2 rounded text-sm hover:bg-indigo-700"}," Save "),b("button",{type:"button",onClick:U,class:"flex-1 bg-gray-200 text-gray-700 px-3 py-2 rounded text-sm hover:bg-gray-300"}," Cancel ")])])])):C("",!0)]))}}),[["__scopeId","data-v-4c490910"]]),pt={class:"fixed inset-0 z-10 w-screen overflow-y-auto"},gt={class:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0"},vt={class:"mt-4 space-y-4"},ft=["value"],yt=["value"],xt={key:0},bt={key:1,class:"text-xs text-gray-500 bg-yellow-50 p-2 rounded border border-yellow-200"},_t={class:"mt-5 sm:mt-6 sm:grid sm:grid-flow-row-dense sm:grid-cols-2 sm:gap-3"},ht={type:"submit",class:"inline-flex w-full justify-center rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 sm:col-start-2"},wt=c({__name:"AssignmentModal",props:{isOpen:{type:Boolean,required:!0},assignmentData:{type:Object,default:null},staffList:{type:Array,required:!0,default:()=>[]},projectData:{type:Object,default:null}},emits:["close","save"],setup(e,{emit:t}){const a=t,s=e=>{if(!e)return"";try{const t=new Date(e);if(isNaN(t.getTime()))return"string"==typeof e&&/^\d{4}-\d{2}-\d{2}$/.test(e)?e:"";const a=t.getFullYear(),s=(t.getMonth()+1).toString().padStart(2,"0");return`${a}-${s}-${t.getDate().toString().padStart(2,"0")}`}catch(t){return""}},l=e,n=d({}),r=u(()=>!!l.assignmentData);m(()=>l.isOpen,e=>{var t,a;if(e){const e=l.assignmentData;if(e){let t;if(e.commitment_schedule)try{t=JSON.parse(e.commitment_schedule).segments||[]}catch(r){console.warn("Failed to parse commitment_schedule:",r)}!t&&e.commitment&&(t=[{start_date:s(e.start_date),end_date:s(e.end_date),commitment:Number(e.commitment)}]),n.value={employee_id:e.employee_id?Number(e.employee_id):void 0,commitment:void 0!==e.commitment?Number(e.commitment):void 0,start_date:s(e.start_date),end_date:s(e.end_date),segments:t}}else{const e=(null==(t=l.projectData)?void 0:t.active_start)?s(l.projectData.active_start):s(new Date),r=(null==(a=l.projectData)?void 0:a.active_end)?s(l.projectData.active_end):"";n.value={employee_id:void 0,commitment:void 0,start_date:e,end_date:r,segments:[]}}}},{immediate:!0});const o=()=>{a("close")},i=()=>{if(!n.value.employee_id)return void alert("Please select a staff member.");if(!n.value.start_date||!n.value.end_date)return void alert("Please provide both start and end dates.");if(new Date(n.value.end_date)<new Date(n.value.start_date))return void alert("End date cannot be before start date.");let e=0;if(n.value.segments&&n.value.segments.length>0){const t=n.value.segments.reduce((e,t)=>e+t.commitment,0);e=Math.round(t/n.value.segments.length)}a("save",{employee_id:n.value.employee_id,commitment:e||void 0,start_date:n.value.start_date,end_date:n.value.end_date,segments:n.value.segments})};return(t,a)=>(y(),g(f(B),{as:"template",show:e.isOpen},{default:v(()=>[x(f(q),{class:"relative z-20",onClose:o},{default:v(()=>[x(f($),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:v(()=>a[4]||(a[4]=[b("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1)])),_:1}),b("div",pt,[b("div",gt,[x(f($),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to":"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 translate-y-0 sm:scale-100","leave-to":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:v(()=>[x(f(O),{class:"relative transform overflow-hidden rounded-lg bg-white px-4 pb-4 pt-5 text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg sm:p-6"},{default:v(()=>{var t,l;return[b("form",{onSubmit:_(i,["prevent"])},[b("div",null,[x(f(M),{as:"h3",class:"text-base font-semibold leading-6 text-gray-900"},{default:v(()=>[w(j(r.value?"Edit Assignment":"Add New Assignment"),1)]),_:1}),b("div",vt,[b("div",null,[a[6]||(a[6]=b("label",{for:"assignment-staff",class:"block text-sm font-medium leading-6 text-gray-900"},"Staff Member",-1)),k(b("select",{id:"assignment-staff",name:"assignment-staff","onUpdate:modelValue":a[0]||(a[0]=e=>n.value.employee_id=e),required:"",class:"mt-1 block w-full rounded-md border-gray-300 py-1.5 pl-3 pr-10 text-gray-900 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-indigo-500 sm:text-sm"},[a[5]||(a[5]=b("option",{value:void 0,disabled:""},"Select staff...",-1)),(null==(t=e.assignmentData)?void 0:t.employee)&&(null==(l=e.assignmentData)?void 0:l.employee_id)&&!e.staffList.find(t=>{var a;return t.ID===(null==(a=e.assignmentData)?void 0:a.employee_id)})?(y(),N("option",{key:0,value:Number(e.assignmentData.employee_id)},j(e.assignmentData.employee.first_name)+" "+j(e.assignmentData.employee.last_name)+j(e.assignmentData.employee.title?` (${e.assignmentData.employee.title})`:"")+" (Current) ",9,ft)):C("",!0),(y(!0),N(L,null,E(e.staffList,e=>(y(),N("option",{key:e.ID,value:Number(e.ID)},j(e.first_name)+" "+j(e.last_name)+j(e.title?` (${e.title})`:""),9,yt))),128))],512),[[I,n.value.employee_id,void 0,{number:!0}]])]),b("div",null,[a[7]||(a[7]=b("label",{for:"assignment-start-date",class:"block text-sm font-medium leading-6 text-gray-900"},"Start Date",-1)),k(b("input",{type:"date",id:"assignment-start-date",name:"assignment-start-date","onUpdate:modelValue":a[1]||(a[1]=e=>n.value.start_date=e),required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm py-1.5 px-2"},null,512),[[D,n.value.start_date]])]),b("div",null,[a[8]||(a[8]=b("label",{for:"assignment-end-date",class:"block text-sm font-medium leading-6 text-gray-900"},"End Date",-1)),k(b("input",{type:"date",id:"assignment-end-date",name:"assignment-end-date","onUpdate:modelValue":a[2]||(a[2]=e=>n.value.end_date=e),required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm py-1.5 px-2"},null,512),[[D,n.value.end_date]])]),n.value.start_date&&n.value.end_date?(y(),N("div",xt,[x(mt,{"start-date":"string"==typeof n.value.start_date?n.value.start_date:s(n.value.start_date),"end-date":"string"==typeof n.value.end_date?n.value.end_date:s(n.value.end_date),segments:n.value.segments,"onUpdate:segments":a[3]||(a[3]=e=>n.value.segments=e)},null,8,["start-date","end-date","segments"])])):C("",!0),n.value.segments&&0!==n.value.segments.length||!n.value.start_date||!n.value.end_date?C("",!0):(y(),N("div",bt,a[9]||(a[9]=[b("p",{class:"font-medium mb-1"},"Set weekly commitments above",-1),b("p",null,"Use the timeline editor to set variable commitments for different weeks.",-1)])))])]),b("div",_t,[b("button",ht,j(r.value?"Update Assignment":"Add Assignment"),1),b("button",{type:"button",class:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:col-start-1 sm:mt-0",onClick:o}," Cancel ")])],32)]}),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"]))}}),jt={class:"overflow-hidden rounded-xl border border-gray-200 bg-white shadow transition hover:shadow-md"},kt={class:"flex-1"},Dt={class:"flex items-center gap-x-2"},It={class:"text-base font-semibold text-gray-900"},Nt={key:0,class:"inline-flex items-center rounded-md bg-purple-50 px-1.5 py-0.5 text-xs font-medium text-purple-700 ring-1 ring-inset ring-purple-700/10"},Et={class:"mt-0.5 text-xs text-gray-500 ml-5"},Lt=["title"],At={key:1,class:"mt-1 text-xs text-gray-500 ml-5"},Ct={key:0,class:"border-t border-gray-100 p-4 pt-3"},Pt={class:"grid grid-cols-1 lg:grid-cols-3 gap-x-4 gap-y-3"},St={class:"space-y-3"},Tt={key:0,class:"mb-3"},Ut={class:"flex flex-wrap gap-1.5"},Yt={key:0,class:"flex items-center"},Bt={class:"inline-flex items-center rounded-md bg-sage-50 px-1.5 py-0.5 text-xs font-medium text-sage-700 ring-1 ring-inset ring-sage-600/20"},$t={key:1,class:"flex items-center"},Ot={class:"inline-flex items-center rounded-md bg-indigo-50 px-1.5 py-0.5 text-xs font-medium text-indigo-700 ring-1 ring-inset ring-indigo-600/20"},Mt={key:2,class:"flex items-center"},qt={class:"inline-flex items-center rounded-md bg-rose-50 px-1.5 py-0.5 text-xs font-medium text-rose-700 ring-1 ring-inset ring-rose-600/20"},Ft={key:3,class:"flex items-center"},Gt={class:"inline-flex items-center rounded-md bg-sky-50 px-1.5 py-0.5 text-xs font-medium text-sky-700 ring-1 ring-inset ring-sky-600/20"},Ht={class:"grid grid-cols-1 gap-y-2 text-xs"},Vt={class:"flex items-center"},Wt={class:"text-gray-900"},Jt={class:"flex items-center"},Rt={class:"text-gray-900"},Kt={class:"flex items-center"},zt={class:"text-gray-900"},Xt={class:"flex items-center"},Qt={class:"text-gray-900"},Zt={key:0,class:"space-y-0 divide-y divide-gray-100 border border-gray-200 rounded-lg overflow-hidden"},ea={class:"min-w-0 flex-1"},ta={class:"flex items-start gap-x-2"},aa={class:"text-xs font-semibold text-gray-900"},sa={key:0,class:"text-green-700 bg-green-50 ring-green-600/20 mt-0.5 whitespace-nowrap rounded-md px-1 py-0.5 text-xs font-medium ring-1 ring-inset"},la={key:1,class:"text-red-700 bg-red-50 ring-red-600/20 mt-0.5 whitespace-nowrap rounded-md px-1 py-0.5 text-xs font-medium ring-1 ring-inset"},na={class:"mt-0.5 flex items-center gap-x-2 text-xs text-gray-500"},ra={class:"whitespace-nowrap"},oa={class:"font-medium"},ia={key:0,class:"whitespace-nowrap italic"},ca={key:1,class:"flex flex-row items-center text-xs"},da={key:0},ua={class:"whitespace-nowrap"},ma={class:"font-medium text-green-700"},pa={key:1,class:"text-gray-400 mx-1"},ga={key:2},va={class:"whitespace-nowrap"},fa={class:"font-medium text-blue-700"},ya={key:3,class:"text-gray-400 mx-1"},xa={key:4},ba={class:"whitespace-nowrap"},_a={class:"font-medium text-indigo-600"},ha={key:5,class:"whitespace-nowrap italic text-gray-500"},wa={key:1,class:"text-xs text-gray-700 italic bg-gray-50 p-3 rounded-lg border border-gray-200 text-center"},ja={class:"space-y-3"},ka={class:"space-y-0 divide-y divide-gray-100 border border-gray-200 rounded-lg overflow-hidden"},Da={class:"flex items-center justify-between py-2 px-3 hover:bg-gray-50"},Ia={class:"min-w-0 flex-1"},Na={class:"mt-0.5 text-xs text-gray-500"},Ea={class:"flex items-center justify-between py-2 px-3 hover:bg-gray-50"},La={class:"min-w-0 flex-1"},Aa={class:"mt-0.5 text-xs text-gray-500"},Ca={class:"flex justify-between items-center mb-2"},Pa=["disabled","title"],Sa={key:0,class:"space-y-0 divide-y divide-gray-100 border border-gray-200 rounded-lg overflow-hidden"},Ta={class:"min-w-0 flex-1 flex items-start gap-x-2"},Ua={class:"flex-1 min-w-0"},Ya={class:"flex items-center gap-x-2 mb-0.5"},Ba={class:"text-xs font-semibold text-gray-900"},$a={key:0,class:"text-xs text-gray-500 mb-1"},Oa={class:"pl-0 text-xs text-gray-500 mt-0.5"},Ma={key:0,class:"mr-2"},qa={class:"font-medium"},Fa={key:1,class:"whitespace-nowrap text-gray-400"},Ga={class:"flex-shrink-0 flex items-center gap-x-1.5"},Ha=["onClick"],Va={key:1,class:"text-xs text-gray-700 italic bg-gray-50 p-3 rounded-lg border border-gray-200 text-center"},Wa={class:"space-y-2"},Ja={class:"flex justify-between items-center mb-2"},Ra={key:0,class:"space-y-1"},Ka={key:1,class:"text-xs text-gray-700 italic bg-gray-50 p-3 rounded-lg border border-gray-200 text-center"},za={key:2,class:"text-xs text-gray-500 text-center pt-1"},Xa={class:"mt-4 pt-2 border-t border-gray-100"},Qa={key:1,class:"mt-3 border-t border-gray-100 pt-3 text-xs"},Za={key:0,class:"py-2 flex justify-center"},es={key:1,class:"py-2 text-center"},ts={class:"text-red-500 mb-1.5"},as={key:2,class:"space-y-4"},ss={class:"grid grid-cols-2 gap-3"},ls={class:"bg-gray-50 p-2 rounded-lg"},ns={class:"text-sm font-semibold text-gray-900"},rs={class:"bg-gray-50 p-2 rounded-lg"},os={class:"text-sm font-semibold text-gray-900"},is={class:"grid grid-cols-2 gap-3"},cs={class:"bg-gray-50 p-2 rounded-lg"},ds={class:"text-sm font-semibold text-gray-900"},us={class:"bg-gray-50 p-2 rounded-lg"},ms={class:"text-sm font-semibold text-gray-900"},ps={key:3,class:"py-3 text-center text-gray-500"},gs=T(c({__name:"ProjectCard",props:{project:{},staffList:{}},emits:["edit","add-asset","project-asset-updated","project-updated"],setup(e,{emit:a}){const s=e,l=a,r=d(!1),c=d(!1),m=d([]),v=d(s.staffList||[]),f=d(!1),x=d(!1),k=d(!1),D=d(null);p(async()=>{f.value=!0,s.staffList&&0!==s.staffList.length||(x.value=!0);try{m.value=await F(),s.staffList&&0!==s.staffList.length||(v.value=await n())}catch(e){console.error("Error fetching initial data for project card:",e)}finally{f.value=!1,x.value=!1}});const I=u(()=>s.project.assets?[...s.project.assets].sort((e,t)=>(e.name||"").localeCompare(t.name||"")):[]),A=e=>{if(void 0!==e)return m.value.find(t=>t.ID===e)},P=e=>{if(null==e)return"N/A";const t=v.value.find(t=>t.ID===e);return t?`${t.first_name} ${t.last_name}`:"Unknown Staff"},S=(e,t=!1)=>{if(!e)return"N/A";try{const a=new Date(e);return isNaN(a.getTime())?"Invalid Date":t?new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric"}).format(a):new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric"}).format(a)}catch(a){return"Invalid Date"}},T=e=>void 0===e?"$0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),U=(e,t)=>{if(void 0===e||void 0===t)return"N/A";const a=e-t,s=e>0?a/e*100:0;return`${T(a)} (${s.toFixed(0)}%)`},Y=e=>{if(!e)return"";switch(e){case"BILLING_TYPE_WEEKLY":return" weekly";case"BILLING_TYPE_BIWEEKLY":return" bi-weekly";case"BILLING_TYPE_MONTHLY":return" monthly";case"BILLING_TYPE_BIMONTHLY":return" bi-monthly";default:return""}},B=e=>{const t=new Date,a=new Date(e.active_start);return new Date(e.active_end)<t?"Ended":a>t?"Upcoming":"Active"},$=e=>{const t=new Date,a=new Date(e.active_start),s=new Date(e.active_end);return a<=t&&s>=t},O=e=>{const t=new Date,a=new Date(e.active_start);return new Date(e.active_end)<t?{label:"Ended",color:"bg-gray-100 text-gray-600 ring-gray-500/10"}:a>t?{label:"Upcoming",color:"bg-blue-50 text-blue-700 ring-blue-600/20"}:{label:"Active",color:"bg-green-50 text-green-700 ring-green-600/20"}},M=e=>{const t=new Date,a=new Date(e.start_date),s=new Date(e.end_date);return e.start_date&&e.end_date?s<t?{label:"Past",color:"bg-gray-100 text-gray-600 ring-gray-500/10"}:a>t?{label:"Future",color:"bg-blue-50 text-blue-700 ring-blue-600/20"}:{label:"Current",color:"bg-green-50 text-green-700 ring-green-600/20"}:{label:"Date N/A",color:"bg-yellow-50 text-yellow-700 ring-yellow-600/20"}},q=e=>{s.project.assets&&(s.project.assets=s.project.assets.filter(t=>t.ID!==e))},H=e=>{l("project-asset-updated",{projectId:s.project.ID,asset:e})},V=()=>{D.value=null,k.value=!0},J=()=>{k.value=!1,D.value=null},R=async e=>{if(!s.project||!s.project.ID)return void alert("Cannot save assignment: Project context is missing.");const t={...e,project_id:s.project.ID};try{D.value&&D.value.ID?await(async(e,t)=>{const a=t;try{return await o("project_assignments",e,a)}catch(s){throw console.error(`API Error Updating Project Assignment ${e}:`,s),s}})(D.value.ID,t):await(async(e,t)=>{const a={...t,project_id:e};try{return await i("project_assignments",a)}catch(s){throw console.error("API Error Creating Project Assignment:",s),s}})(s.project.ID,t),l("project-updated"),J()}catch(a){console.error("Error saving assignment:",a),alert("Failed to save assignment.")}},K=()=>{r.value=!r.value,r.value&&Q()},z=d(null),X=d(null),Q=async()=>{if(s.project.ID){c.value=!0,X.value=null;try{const e=await t(s.project.ID);if(!e)return X.value="No analytics data available",void(z.value=null);z.value=e}catch(e){console.error("Failed to fetch analytics:",e),X.value="Failed to load analytics data",z.value=null}finally{c.value=!1}}};return(e,t)=>{return y(),N("div",jt,[b("div",{class:"flex items-start justify-between p-4 cursor-pointer hover:bg-gray-50 transition-colors",onClick:K},[b("div",kt,[b("div",Dt,[b("i",{class:h(["fas transition-transform text-gray-400 text-xs",r.value?"fa-chevron-down":"fa-chevron-right"])},null,2),b("h3",It,j(e.project.name),1),b("span",{class:h(["inline-flex items-center rounded-md px-1.5 py-0.5 text-xs font-medium ring-1 ring-inset",O(e.project).color])},j(O(e.project).label),3),e.project.internal?(y(),N("span",Nt," Internal ")):C("",!0)]),b("p",Et,j(e.project.account?e.project.account.name:"No Account"),1),!r.value&&e.project.description?(y(),N("p",{key:0,class:"mt-1 text-xs text-gray-600 truncate ml-5",title:e.project.description},j(e.project.description),9,Lt)):C("",!0),!r.value&&e.project.staffing_assignments&&e.project.staffing_assignments.length>0?(y(),N("p",At,j(e.project.staffing_assignments.length)+" staff assigned ",1)):C("",!0)]),b("div",{class:"flex items-center space-x-2",onClick:t[1]||(t[1]=_(()=>{},["stop"]))},[b("button",{onClick:t[0]||(t[0]=t=>e.$emit("edit",e.project)),class:"inline-flex items-center rounded-md bg-blue-50 px-2 py-1 text-xs font-medium text-blue-700 ring-1 ring-inset ring-blue-700/10 hover:bg-blue-100 transition-colors",title:"Edit Project"},t[3]||(t[3]=[b("i",{class:"fas fa-pencil-alt mr-1"},null,-1),w(" Edit ")]))])]),r.value?(y(),N("div",Ct,[b("div",Pt,[b("div",St,[e.project.budget_dollars||e.project.budget_hours||e.project.budget_cap_dollars||e.project.budget_cap_hours?(y(),N("div",Tt,[t[8]||(t[8]=b("div",{class:"mb-1 text-xs font-medium text-gray-500"},"Budget:",-1)),b("div",Ut,[e.project.budget_dollars?(y(),N("div",Yt,[b("span",Bt,[t[4]||(t[4]=b("i",{class:"fas fa-dollar-sign mr-1"},null,-1)),w(" "+j(T(e.project.budget_dollars))+j(Y(e.project.billing_frequency)),1)])])):C("",!0),e.project.budget_hours?(y(),N("div",$t,[b("span",Ot,[t[5]||(t[5]=b("i",{class:"fas fa-clock mr-1"},null,-1)),w(" "+j(e.project.budget_hours)+" hours"+j(Y(e.project.billing_frequency)),1)])])):C("",!0),e.project.budget_cap_dollars?(y(),N("div",Mt,[b("span",qt,[t[6]||(t[6]=b("i",{class:"fas fa-shield-alt mr-1"},null,-1)),w(" "+j(T(e.project.budget_cap_dollars))+" (Cap) ",1)])])):C("",!0),e.project.budget_cap_hours?(y(),N("div",Ft,[b("span",Gt,[t[7]||(t[7]=b("i",{class:"fas fa-stopwatch-20 mr-1"},null,-1)),w(" "+j(e.project.budget_cap_hours)+" hours (Cap) ",1)])])):C("",!0)])])):C("",!0),b("dl",Ht,[b("div",Vt,[t[9]||(t[9]=b("dt",{class:"font-medium text-gray-500 w-20"},"Timeframe:",-1)),b("dd",Wt,j(S(e.project.active_start))+" to "+j(S(e.project.active_end)),1)]),b("div",Jt,[t[10]||(t[10]=b("dt",{class:"font-medium text-gray-500 w-20"},"Status:",-1)),b("dd",Rt,j(B(e.project)),1)]),b("div",Kt,[t[11]||(t[11]=b("dt",{class:"font-medium text-gray-500 w-20"},"Type:",-1)),b("dd",zt,j((s=e.project.project_type,s?s.replace("PROJECT_TYPE_","").replace(/_/g," ").split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(" "):"N/A")),1)]),b("div",Xt,[t[12]||(t[12]=b("dt",{class:"font-medium text-gray-500 w-20"},"Billing:",-1)),b("dd",Qt,j((a=e.project.billing_frequency,a?a.replace("BILLING_TYPE_","").replace(/_/g," ").toLowerCase().split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "):"N/A")),1)])]),b("div",null,[t[15]||(t[15]=b("h5",{class:"text-xs font-medium text-gray-900 mb-2"},"Billing Codes",-1)),e.project.billing_codes&&e.project.billing_codes.length>0?(y(),N("div",Zt,[(y(!0),N(L,null,E(e.project.billing_codes,e=>{var a,s,l,n;return y(),N("div",{key:e.ID,class:"flex items-center justify-between gap-x-4 py-2 px-3 hover:bg-gray-50"},[b("div",ea,[b("div",ta,[b("p",aa,j(e.name),1),$(e)?(y(),N("p",sa," Active ")):(y(),N("p",la," Inactive "))]),b("div",na,[b("p",ra,[b("span",oa,j(e.code),1)]),t[13]||(t[13]=b("svg",{viewBox:"0 0 2 2",class:"h-0.5 w-0.5 fill-current"},[b("circle",{cx:"1",cy:"1",r:"1"})],-1)),f.value?(y(),N("p",ia," Loading rates... ")):(y(),N("div",ca,[A(e.rate_id)?(y(),N("div",da,[b("p",ua,[b("span",ma,j(T((null==(a=A(e.rate_id))?void 0:a.amount)||0)),1)])])):C("",!0),A(e.rate_id)&&A(e.internal_rate_id)?(y(),N("span",pa,"/")):C("",!0),A(e.internal_rate_id)?(y(),N("div",ga,[b("p",va,[b("span",fa,j(T((null==(s=A(e.internal_rate_id))?void 0:s.amount)||0)),1)])])):C("",!0),A(e.rate_id)&&A(e.internal_rate_id)?(y(),N("span",ya,"/")):C("",!0),A(e.rate_id)&&A(e.internal_rate_id)?(y(),N("div",xa,[b("p",ba,[b("span",_a,j(U((null==(l=A(e.rate_id))?void 0:l.amount)||0,(null==(n=A(e.internal_rate_id))?void 0:n.amount)||0)),1)])])):C("",!0),A(e.rate_id)||A(e.internal_rate_id)?C("",!0):(y(),N("p",ha," No rate data "))]))])])])}),128))])):(y(),N("div",wa,t[14]||(t[14]=[b("p",null,"No billing codes available for this project.",-1)])))])]),b("div",ja,[b("div",null,[t[18]||(t[18]=b("h5",{class:"text-xs font-medium text-gray-900 mb-2"},"Account Team",-1)),b("div",ka,[b("div",Da,[b("div",Ia,[t[16]||(t[16]=b("div",{class:"flex items-start"},[b("p",{class:"text-xs font-semibold text-gray-900"},"Account Executive")],-1)),b("div",Na,[b("p",null,j(P(e.project.ae_id)),1)])])]),b("div",Ea,[b("div",La,[t[17]||(t[17]=b("div",{class:"flex items-start"},[b("p",{class:"text-xs font-semibold text-gray-900"},"Sales Development Rep")],-1)),b("div",Aa,[b("p",null,j(P(e.project.sdr_id)),1)])])])])]),b("div",null,[b("div",Ca,[t[20]||(t[20]=b("h5",{class:"text-xs font-medium text-gray-900"},"Assigned Staff",-1)),b("button",{onClick:V,disabled:x.value||0===v.value.length,class:h(["inline-flex items-center rounded-md px-2 py-1 text-xs font-medium ring-1 ring-inset transition-colors",x.value||0===v.value.length?"bg-gray-50 text-gray-400 ring-gray-300/50 cursor-not-allowed":"bg-blue-50 text-blue-700 ring-blue-700/10 hover:bg-blue-100"]),title:x.value?"Loading staff...":"Add Staff Assignment"},[b("i",{class:h(["mr-1",x.value?"fas fa-spinner fa-spin":"fas fa-plus"])},null,2),t[19]||(t[19]=w(" Staff "))],10,Pa)]),e.project.staffing_assignments&&e.project.staffing_assignments.length>0?(y(),N("div",Sa,[(y(!0),N(L,null,E(e.project.staffing_assignments,e=>{var a,s,l,n;return y(),N("div",{key:e.ID,class:"flex items-start justify-between gap-x-4 py-2.5 px-3 hover:bg-gray-50"},[b("div",Ta,[e.employee?(y(),g(W,{key:0,employee:e.employee,size:"sm"},null,8,["employee"])):C("",!0),b("div",Ua,[b("div",Ya,[b("p",Ba,j(null==(a=e.employee)?void 0:a.first_name)+" "+j(null==(s=e.employee)?void 0:s.last_name),1),b("span",{class:h(["inline-flex items-center rounded-md px-1.5 py-0.5 text-xs font-medium ring-1 ring-inset whitespace-nowrap flex-shrink-0",M(e).color])},j(M(e).label),3)]),(null==(l=e.employee)?void 0:l.title)?(y(),N("p",$a,j(null==(n=e.employee)?void 0:n.title),1)):C("",!0),b("div",Oa,[void 0!==e.commitment?(y(),N("span",Ma,[t[21]||(t[21]=b("i",{class:"far fa-clock mr-0.5 text-gray-400"},null,-1)),b("span",qa,j(e.commitment)+" hr/week",1)])):C("",!0),e.start_date||e.end_date?(y(),N("span",Fa,[t[22]||(t[22]=b("i",{class:"far fa-calendar-alt mr-1"},null,-1)),w(" "+j(S(e.start_date,!0))+" - "+j(S(e.end_date,!0)),1)])):C("",!0)])])]),b("div",Ga,[b("button",{onClick:_(t=>(e=>{const t=JSON.parse(JSON.stringify(e));D.value=t,k.value=!0})(e),["prevent"]),type:"button",class:"p-1 text-xs text-gray-400 hover:text-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded"},t[23]||(t[23]=[b("span",{class:"sr-only"},"Edit assignment",-1),b("i",{class:"fas fa-pencil-alt h-3 w-3"},null,-1)]),8,Ha)])])}),128))])):(y(),N("div",Va,t[24]||(t[24]=[b("p",null,"No staff assigned to this project.",-1)])))])]),b("div",Wa,[b("div",Ja,[t[26]||(t[26]=b("h5",{class:"text-xs font-medium text-gray-900"},"Project Assets",-1)),b("button",{onClick:t[2]||(t[2]=t=>e.$emit("add-asset",e.project.ID)),class:"inline-flex items-center rounded-md bg-sage-50 px-2 py-1 text-xs font-medium text-sage-700 ring-1 ring-inset ring-sage-600/20 hover:bg-sage-100 transition-colors",title:"Add Asset to this Project"},t[25]||(t[25]=[b("i",{class:"fas fa-plus mr-1"},null,-1),w(" Asset ")]))]),e.project.assets&&e.project.assets.length>0?(y(),N("div",Ra,[(y(!0),N(L,null,E(I.value.slice(0,5),t=>(y(),g(G,{key:t.ID,asset:t,"project-id":e.project.ID,onDeleteAsset:q,onAssetUpdated:H},null,8,["asset","project-id"]))),128))])):(y(),N("div",Ka,t[27]||(t[27]=[b("p",null,"No assets available for this project.",-1)]))),e.project.assets&&e.project.assets.length>5?(y(),N("div",za," +"+j(e.project.assets.length-5)+" more asset(s) ",1)):C("",!0)])]),b("div",Xa,[b("button",{onClick:K,class:"text-xs flex items-center justify-center w-full px-2 py-1.5 font-medium rounded-md bg-gray-50 text-gray-700 hover:bg-gray-100 transition-colors"},[b("span",null,j(r.value?"Hide details":"View details"),1),b("i",{class:h([r.value?"fa-chevron-up":"fa-chevron-down","fas ml-2"])},null,2)])]),e.project?(y(),g(wt,{key:0,"project-id":e.project.ID,"is-open":k.value,"assignment-data":D.value,"staff-list":v.value,"project-data":{active_start:e.project.active_start,active_end:e.project.active_end},onClose:J,onSave:R},null,8,["project-id","is-open","assignment-data","staff-list","project-data"])):C("",!0),r.value?(y(),N("div",Qa,[t[38]||(t[38]=b("h4",{class:"font-medium text-gray-900 mb-2"},"Billable Details",-1)),c.value?(y(),N("div",Za,t[28]||(t[28]=[b("i",{class:"fas fa-circle-notch fa-spin text-teal"},null,-1),b("span",{class:"ml-2 text-gray-700"},"Loading details...",-1)]))):X.value?(y(),N("div",es,[b("div",ts,j(X.value),1),b("button",{onClick:Q,class:"text-xs inline-flex items-center px-2 py-1 rounded bg-gray-100 text-gray-700 hover:bg-gray-200"},t[29]||(t[29]=[b("i",{class:"fas fa-sync-alt mr-1"},null,-1),w(" Retry ")]))])):z.value?(y(),N("div",as,[b("div",null,[t[32]||(t[32]=b("h5",{class:"text-xs font-medium text-gray-900 mb-1.5"},"Project Totals",-1)),b("div",ss,[b("div",ls,[t[30]||(t[30]=b("div",{class:"text-xs text-gray-500"},"Total Hours",-1)),b("div",ns,j(z.value.total_hours.toFixed(2)),1)]),b("div",rs,[t[31]||(t[31]=b("div",{class:"text-xs text-gray-500"},"Total Fees",-1)),b("div",os,j(T(z.value.total_fees)),1)])])]),b("div",null,[t[35]||(t[35]=b("h5",{class:"text-xs font-medium text-gray-900 mb-1.5"},"Current Billing Period",-1)),b("div",is,[b("div",cs,[t[33]||(t[33]=b("div",{class:"text-xs text-gray-500"},"Period Hours",-1)),b("div",ds,j(z.value.period_hours?z.value.period_hours.toFixed(2):"0.00"),1)]),b("div",us,[t[34]||(t[34]=b("div",{class:"text-xs text-gray-500"},"Period Fees",-1)),b("div",ms,j(T(z.value.period_fees||0)),1)])])])])):(y(),N("div",ps,[t[37]||(t[37]=b("p",null,"No analytics data available for this project.",-1)),b("button",{onClick:Q,class:"text-xs inline-flex items-center px-2 py-1 mt-2 rounded bg-gray-100 text-gray-700 hover:bg-gray-200"},t[36]||(t[36]=[b("i",{class:"fas fa-sync-alt mr-1"},null,-1),w(" Try Again ")]))]))])):C("",!0)])):C("",!0)]);var a,s}}}),[["__scopeId","data-v-1e891724"]]),vs={class:"px-4 py-4 sm:px-6 lg:px-8"},fs={class:"sm:flex sm:items-center"},ys={class:"mt-3 sm:ml-16 sm:mt-0 sm:flex-none"},xs={key:0,class:"flex flex-col items-center justify-center p-6 bg-white rounded-lg shadow mt-4"},bs={key:1,class:"flex flex-col items-center justify-center p-6 bg-white rounded-lg shadow mt-4"},_s={class:"text-sm text-gray-dark mb-1"},hs={key:2,class:"flex flex-col items-center justify-center p-6 bg-white rounded-lg shadow mt-4"},ws={key:3,class:"mt-4 flex gap-2 flex-wrap"},js={class:"ml-1 text-xs opacity-75"},ks={class:"ml-1 text-xs opacity-75"},Ds={class:"ml-1 text-xs opacity-75"},Is={class:"ml-1 text-xs opacity-75"},Ns={key:4,class:"mt-4 flow-root"},Es={role:"list",class:"grid grid-cols-1 gap-4"},Ls=T(c({__name:"ProjectsView",setup(e){const t=d([]),r=d(!0),o=d(null),i=d(!1),c=d(null),m=d([]),g=d(!1),v=d(null),f=d("all"),_=e=>{if(!e)return!1;const t=e.active_start?new Date(e.active_start):null,a=e.active_end?new Date(e.active_end):null,s=new Date;s.setHours(0,0,0,0);return(!t||s>=t)&&(!a||s<=a)},k=e=>{if(!e)return!1;const t=e.active_end?new Date(e.active_end):null,a=new Date;return a.setHours(0,0,0,0),!!t&&a>t},D=u(()=>{if(!t.value||!Array.isArray(t.value))return[];let e=[...t.value];return"active"===f.value?e=e.filter(e=>_(e)):"ended"===f.value?e=e.filter(e=>k(e)):"internal"===f.value&&(e=e.filter(e=>e.internal)),e.sort((e,t)=>{const a=_(e),s=_(t);return a&&!s?-1:!a&&s?1:0})}),I=u(()=>t.value&&Array.isArray(t.value)?{all:t.value.length,active:t.value.filter(e=>_(e)).length,ended:t.value.filter(e=>k(e)).length,internal:t.value.filter(e=>e.internal).length}:{all:0,active:0,ended:0,internal:0}),A=async()=>{r.value=!0,o.value=null;try{const e=await a();if(!e||!Array.isArray(e))return console.error("Invalid response format - expected array but got:",typeof e),o.value="Invalid response format from API",void(t.value=[]);t.value=e.map(e=>{const t=e.assets||[];return{ID:e.ID,name:e.name||"",account_id:e.account_id||0,account:e.account||{ID:0,name:"Unknown"},active_start:e.active_start||"",active_end:e.active_end||"",budget_hours:Number(e.budget_hours)||0,budget_dollars:Number(e.budget_dollars)||0,budget_cap_hours:Number(e.budget_cap_hours)||0,budget_cap_dollars:Number(e.budget_cap_dollars)||0,internal:!!e.internal,billing_frequency:e.billing_frequency||"",project_type:e.project_type||"",ae_id:void 0!==e.ae_id?Number(e.ae_id):void 0,sdr_id:void 0!==e.sdr_id?Number(e.sdr_id):void 0,description:e.description||"",staffing_assignments:(e.staffing_assignments||[]).map(e=>({...e,employee_id:Number(e.employee_id),commitment:void 0!==e.commitment?Number(e.commitment):void 0,start_date:e.start_date||void 0,end_date:e.end_date||void 0})),billing_codes:e.billing_codes||[],assets:t}})}catch(e){console.error("Error fetching projects:",e),o.value="Failed to load projects. Please try again.",t.value=[]}finally{r.value=!1}};p(async()=>{await A();try{const e=await n();m.value=e||[]}catch(e){console.error("Error fetching staff members:",e)}});const P=(e=null)=>{c.value=e,i.value=!0},S=()=>{i.value=!1,c.value=null},T=e=>{P(e)},U=async e=>{try{e.ID&&e.ID>0?await s(Number(e.ID),e):await l(e),await A(),S()}catch(t){console.error("Error saving project:",t),alert("Failed to save project. Please try again.")}},Y=e=>{v.value=e,g.value=!0},B=()=>{g.value=!1,v.value=null},$=async e=>{if(!v.value)return void alert("No project selected for the asset.");const t={...e,project_id:v.value};try{await V(t),B()}catch(a){console.error("Error creating asset for project:",a),alert("Failed to create asset. Please try again.")}};return(e,a)=>(y(),N("div",vs,[b("div",fs,[a[6]||(a[6]=b("div",{class:"sm:flex-auto"},[b("h1",{class:"text-base font-semibold leading-6 text-blue"},"Projects"),b("p",{class:"mt-1 text-xs text-gray"},"A list of all projects including their status, client, and dates.")],-1)),b("div",ys,[b("button",{type:"button",onClick:a[0]||(a[0]=e=>P()),class:"block rounded-md bg-sage px-2.5 py-1.5 text-center text-xs font-semibold text-white shadow-sm hover:bg-sage-dark focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sage"},a[5]||(a[5]=[b("i",{class:"fas fa-plus-circle mr-1"},null,-1),w(" Create new project ")]))])]),r.value?(y(),N("div",xs,a[7]||(a[7]=[b("i",{class:"fas fa-spinner fa-spin text-3xl text-teal mb-2"},null,-1),b("span",{class:"text-sm text-gray-dark"},"Loading projects...",-1)]))):o.value?(y(),N("div",bs,[a[9]||(a[9]=b("i",{class:"fas fa-exclamation-circle text-3xl text-red mb-2"},null,-1)),b("span",_s,j(o.value),1),b("button",{onClick:A,class:"btn-secondary mt-3"},a[8]||(a[8]=[b("i",{class:"fas fa-sync mr-1"},null,-1),w(" Retry ")]))])):0===t.value.length?(y(),N("div",hs,a[10]||(a[10]=[b("i",{class:"fas fa-project-diagram text-4xl text-teal mb-2"},null,-1),b("p",{class:"text-base font-medium text-gray-dark"},"No projects found",-1),b("p",{class:"text-sm text-gray mb-3"},"Projects will appear here once they are created",-1)]))):(y(),N("div",ws,[b("button",{onClick:a[1]||(a[1]=e=>f.value="all"),class:h(["px-3 py-1.5 text-xs font-medium rounded-md transition-colors","all"===f.value?"bg-sage text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"])},[a[11]||(a[11]=w(" All ")),b("span",js,"("+j(I.value.all)+")",1)],2),b("button",{onClick:a[2]||(a[2]=e=>f.value="active"),class:h(["px-3 py-1.5 text-xs font-medium rounded-md transition-colors","active"===f.value?"bg-sage text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"])},[a[12]||(a[12]=w(" Active ")),b("span",ks,"("+j(I.value.active)+")",1)],2),b("button",{onClick:a[3]||(a[3]=e=>f.value="ended"),class:h(["px-3 py-1.5 text-xs font-medium rounded-md transition-colors","ended"===f.value?"bg-sage text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"])},[a[13]||(a[13]=w(" Ended ")),b("span",Ds,"("+j(I.value.ended)+")",1)],2),b("button",{onClick:a[4]||(a[4]=e=>f.value="internal"),class:h(["px-3 py-1.5 text-xs font-medium rounded-md transition-colors","internal"===f.value?"bg-sage text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"])},[a[14]||(a[14]=w(" Internal ")),b("span",Is,"("+j(I.value.internal)+")",1)],2)])),!r.value&&t.value.length>0?(y(),N("div",Ns,[b("ul",Es,[(y(!0),N(L,null,E(D.value,e=>(y(),N("li",{key:e.ID},[x(gs,{project:e,"staff-list":m.value,onEdit:T,onAddAsset:Y,onProjectUpdated:A},null,8,["project","staff-list"])]))),128))])])):C("",!0),x(Ke,{"is-open":i.value,"project-data":c.value,onClose:S,onSave:U},null,8,["is-open","project-data"]),x(H,{"is-open":g.value,"project-id":v.value,onClose:B,onSave:$},null,8,["is-open","project-id"])]))}}),[["__scopeId","data-v-07df6034"]]);export{Ls as default};
