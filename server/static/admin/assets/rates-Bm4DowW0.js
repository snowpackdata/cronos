import{N as t,O as e,P as a,Q as r,S as o}from"./index-2uCPEpPG.js";function n(t){const e=[];if(t.name||e.push("Rate name is required"),void 0!==t.amount&&null!==t.amount||e.push("Amount is required"),t.active_from||e.push("Start date is required"),t.active_from&&t.active_to){const a=new Date(t.active_from);new Date(t.active_to)<a&&e.push("End date must be after start date")}return{isValid:0===e.length,errors:e}}function s(t){const e=new FormData;if(e.set("name",t.name),e.set("amount",t.amount.toString()),t.active_from)e.set("active_from",t.active_from);else{console.error("Missing required active_from date");const t=new Date,a=`${t.getUTCFullYear()}-${String(t.getUTCMonth()+1).padStart(2,"0")}-${String(t.getUTCDate()).padStart(2,"0")}`;e.set("active_from",a)}t.active_to&&e.set("active_to",t.active_to),void 0!==t.internal_only&&e.set("internal_only",t.internal_only?"true":"false");for(const[a,r]of e.entries());return e}const i={getRates:async()=>t("rates"),getRate:async t=>o("rates",t),async createRate(t){const e=n(t);if(!e.isValid)throw new Error(`Validation failed: ${e.errors.join(", ")}`);try{const e=s(t);return r("rates",e)}catch(a){throw console.error("Failed to create rate:",a),a}},async updateRate(t){const e=n(t);if(!e.isValid)throw new Error(`Validation failed: ${e.errors.join(", ")}`);try{const e=s(t);return a("rates",t.ID,e)}catch(r){throw console.error("Failed to update rate:",r),r}},async deleteRate(t){try{return e("rates",t)}catch(a){throw console.error("Failed to delete rate:",a),a}}};async function c(){try{return await t("rates")}catch(e){throw console.error("Error fetching rates:",e),e}}const d=async t=>await i.createRate(t),u=async t=>{if(!t.ID)throw new Error("Rate ID is required for updates");return await i.updateRate(t)},l=async t=>await i.deleteRate(t);export{d as c,l as d,c as f,u};
