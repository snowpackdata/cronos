const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-2uCPEpPG.js","assets/index-d8_Er7ma.css"])))=>i.map(i=>d[i]);
import{N as t,Y as e,S as r,O as c,P as o,Q as a}from"./index-2uCPEpPG.js";function s(t){const e=[];if(t.name||e.push("Project name is required"),t.account_id||t.account&&t.account.ID||e.push("Account is required"),t.active_start||e.push("Start date is required"),t.active_end||e.push("End date is required"),t.billing_frequency||e.push("Billing frequency is required"),t.active_start&&t.active_end){const r=new Date(t.active_start);new Date(t.active_end)<r&&e.push("End date must be after start date")}return{isValid:0===e.length,errors:e}}function n(t){const e=new FormData;e.set("name",t.name);const r=t.account_id||(t.account?t.account.ID:0);e.set("account_id",r.toString()),e.set("budget_hours",t.budget_hours.toString()),e.set("budget_dollars",t.budget_dollars.toString()),e.set("active_start",t.active_start),e.set("active_end",t.active_end),e.set("internal",t.internal.toString()),e.set("project_type",t.project_type),t.billing_frequency?e.set("billing_frequency",t.billing_frequency):e.set("billing_frequency","BILLING_TYPE_MONTHLY"),void 0!==t.description&&e.set("description",t.description);const c=t;return void 0!==c.budget_cap_hours&&null!==c.budget_cap_hours&&e.set("budget_cap_hours",c.budget_cap_hours.toString()),void 0!==c.budget_cap_dollars&&null!==c.budget_cap_dollars&&e.set("budget_cap_dollars",c.budget_cap_dollars.toString()),t.ae_id&&e.set("ae_id",t.ae_id.toString()),t.sdr_id&&e.set("sdr_id",t.sdr_id.toString()),e}const i={getProjects:async()=>t("projects"),getProject:async t=>r("projects",t),async createProject(t){const e=s(t);if(!e.isValid)throw new Error(`Validation failed: ${e.errors.join(", ")}`);try{const e=n(t);return a("projects",e)}catch(r){throw console.error("Failed to create project:",r),r}},async updateProject(t){const e=s(t);if(!e.isValid)throw new Error(`Validation failed: ${e.errors.join(", ")}`);try{const e=n(t);return o("projects",t.ID,e)}catch(r){throw console.error("Failed to update project:",r),r}},async deleteProject(t){try{return c("projects",t)}catch(e){throw console.error("Failed to delete project:",e),e}},getAccountProjects:async e=>t(`accounts/${e}/projects`),getActiveProjects:async()=>t("active_projects"),getBillingCodes:async e=>t(`projects/${e}/billing_codes`),getProjectsByAccount:async e=>t(`projects?account_id=${e}`)},d=async()=>{try{return await t("projects")}catch(e){throw console.error("Error fetching projects:",e),e}},u=async t=>{try{return await r("projects",t)}catch(e){throw console.error(`Error fetching project with ID ${t}:`,e),e}},l=async t=>i.createProject(t),_=async(t,e)=>{const r={...e,ID:t};return i.updateProject(r)},p=async t=>{try{const{getToken:r}=await e(async()=>{const{getToken:t}=await import("./index-2uCPEpPG.js").then(t=>t.Z);return{getToken:t}},__vite__mapDeps([0,1])),c=r(),o={};c&&(o["x-access-token"]=c);const a=await fetch(`/api/projects/${t}/analytics`,{headers:o});if(!a.ok){const t=await a.text();throw new Error(`Failed to fetch project analytics: ${t}`)}return await a.json()}catch(r){throw console.error("Error fetching project analytics:",r),r}};export{u as a,l as c,d as f,p as g,_ as u};
