import"./index-8V-xrl-L.js";import{_ as e}from"./AccountDrawer-Bn-2m6Gm.js";import{_ as t}from"./ConfirmationModal-DUMFrYPd.js";import{_ as a,r as s,b as l,f as i,c as n,o,a as r,D as c,L as d,q as u,F as g,G as m,z as v,E as p,x}from"./index-2uCPEpPG.js";import{f,u as y,c as b,d as _}from"./accounts-B2EQlq8f.js";import"./XMarkIcon-Bml7Cvcl.js";import"./transition-CMIuM6C3.js";const I={class:"bg-white"},L={class:"divide-y divide-gray-200"},h={id:"company-settings",class:"grid max-w-7xl grid-cols-1 gap-x-8 gap-y-10 px-4 py-16 sm:px-6 md:grid-cols-3 lg:px-8"},E={key:0,class:"md:col-span-2"},w={class:"p-6"},T={class:"flex items-start justify-between mb-4"},N={class:"flex items-start gap-x-3"},B={class:"flex items-center gap-x-2"},Y={class:"text-xl font-semibold text-gray-900"},P={class:"mt-1 text-sm text-gray-500"},k=["onClick"],C={class:"mt-6 space-y-6 border-t border-gray-200 pt-6"},j={class:"grid grid-cols-1 gap-x-4 gap-y-4 sm:grid-cols-2"},G={key:0,class:"sm:col-span-2"},M={class:"flex flex-wrap gap-2"},O={key:0,class:"inline-flex items-center rounded-md bg-sage-50 px-2 py-1 text-xs font-medium text-sage-700 ring-1 ring-inset ring-sage-600/20"},A={key:1,class:"inline-flex items-center rounded-md bg-indigo-50 px-2 py-1 text-xs font-medium text-indigo-700 ring-1 ring-inset ring-indigo-600/20"},D={class:"mt-1 text-sm text-gray-900"},W={class:"mt-1 text-sm text-gray-900"},q={key:1,class:"sm:col-span-2"},S={class:"mt-1 text-sm text-gray-900 whitespace-pre-line"},F={key:0,class:"text-center p-8 bg-gray-50 rounded-lg"},R=a({__name:"SettingsView",setup(a){const R=s([]),H=s(!1),K=s(null),U=s(!1),J=s(null),z=l(()=>R.value.filter(e=>"ACCOUNT_TYPE_INTERNAL"===e.type));i(async()=>{try{const e=await f();R.value=e||[]}catch(e){console.error("Error loading accounts:",e)}});const V=e=>{switch(e){case"BILLING_TYPE_WEEKLY":return"/wk";case"BILLING_TYPE_BIWEEKLY":return"/2wk";case"BILLING_TYPE_MONTHLY":return"/mo";case"BILLING_TYPE_BIMONTHLY":return"/2mo";case"BILLING_TYPE_PROJECT":return" total";default:return""}},X=(e=null)=>{K.value=e?{...e,id:e.ID,type:"ACCOUNT_TYPE_INTERNAL"}:{type:"ACCOUNT_TYPE_INTERNAL"},H.value=!0},$=()=>{H.value=!1,K.value=null},Q=async e=>{try{if(e.type="ACCOUNT_TYPE_INTERNAL",e.id){const t={...e,ID:e.id};await y(t)}else await b(e);const t=await f();R.value=t,$()}catch(t){console.error("Error saving account:",t),alert("Failed to save account. Please try again.")}},Z=async()=>{if(J.value)try{await _(J.value.id);const e=await f();R.value=e,U.value=!1,J.value=null}catch(e){console.error("Error deleting account:",e),alert("Failed to delete account. Please try again.")}},ee=e=>{(e=>{J.value=e,U.value=!0})(e)};return(a,s)=>(o(),n(g,null,[r("div",I,[s[15]||(s[15]=r("header",{class:"border-b border-gray-200"},[r("nav",{class:"flex overflow-x-auto py-4"},[r("ul",{role:"list",class:"flex min-w-full flex-none gap-x-6 px-4 text-sm/6 font-semibold text-gray-600 sm:px-6 lg:px-8"},[r("li",null,[r("a",{href:"#company-settings",class:"text-sage"},"Company Settings")]),r("li",null,[r("a",{href:"#billing-defaults",class:"text-gray-500 hover:text-sage"},"Billing Defaults")])])])],-1)),r("div",L,[r("div",h,[s[13]||(s[13]=r("div",null,[r("h2",{class:"text-base/7 font-semibold text-gray-900"},"Company Information"),r("p",{class:"mt-1 text-sm/6 text-gray-500"}," Manage your company settings and contact information. ")],-1)),z.value.length>0?(o(),n("div",E,[(o(!0),n(g,null,m(z.value,e=>{return o(),n("div",{key:e.id,class:"overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm hover:shadow-md transition"},[r("div",w,[r("div",T,[r("div",N,[r("div",null,[r("div",B,[r("h3",Y,v(e.name),1),s[2]||(s[2]=r("span",{class:"inline-flex items-center rounded-md bg-sage-50 px-2 py-1 text-xs font-medium text-sage-700 ring-1 ring-inset ring-sage-600/20"}," Internal ",-1))]),r("p",P,v(e.legal_name||"No legal name provided"),1)])]),r("button",{onClick:t=>X(e),class:"rounded-md bg-white px-2.5 py-1.5 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50"},s[3]||(s[3]=[r("i",{class:"fas fa-pencil-alt mr-1"},null,-1),p(" Edit ")]),8,k)]),r("div",C,[r("div",j,[e.budget_dollars||e.budget_hours?(o(),n("div",G,[s[6]||(s[6]=r("div",{class:"text-sm font-medium text-gray-500 mb-2"},"Budget",-1)),r("div",M,[e.budget_dollars?(o(),n("span",O,[s[4]||(s[4]=r("i",{class:"fas fa-dollar-sign mr-1.5"},null,-1)),p(" "+v((a=e.budget_dollars,a?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(a):"$0"))+v(V(e.billing_frequency)),1)])):u("",!0),e.budget_hours?(o(),n("span",A,[s[5]||(s[5]=r("i",{class:"fas fa-clock mr-1.5"},null,-1)),p(" "+v(e.budget_hours)+" hours"+v(V(e.billing_frequency)),1)])):u("",!0)])])):u("",!0),r("div",null,[s[7]||(s[7]=r("div",{class:"text-sm font-medium text-gray-500"},"Billing Frequency",-1)),r("div",D,v((t=e.billing_frequency,{BILLING_TYPE_WEEKLY:"Weekly",BILLING_TYPE_BIWEEKLY:"Bi-Weekly",BILLING_TYPE_MONTHLY:"Monthly",BILLING_TYPE_BIMONTHLY:"Bi-Monthly",BILLING_TYPE_PROJECT:"Project-Based"}[t]||t)),1)]),r("div",null,[s[8]||(s[8]=r("div",{class:"text-sm font-medium text-gray-500"},"Invoice Type",-1)),r("div",W,[r("span",{class:x(["inline-flex items-center rounded-md px-2 py-1 text-xs font-medium ring-1 ring-inset",e.projects_single_invoice?"bg-green-50 text-green-700 ring-green-600/20":"bg-amber-50 text-amber-700 ring-amber-600/20"])},v(e.projects_single_invoice?"Combined":"Separate"),3)])]),e.address?(o(),n("div",q,[s[9]||(s[9]=r("div",{class:"text-sm font-medium text-gray-500"},"Address",-1)),r("div",S,v(e.address),1)])):u("",!0)])])])]);var t,a}),128)),0===z.value.length?(o(),n("div",F,[s[11]||(s[11]=r("i",{class:"fas fa-building text-4xl text-gray-300 mb-3"},null,-1)),s[12]||(s[12]=r("p",{class:"text-gray-600"},"No internal accounts found.",-1)),r("button",{onClick:s[0]||(s[0]=e=>X()),class:"mt-4 inline-flex items-center rounded-md bg-sage px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-sage-dark"},s[10]||(s[10]=[r("i",{class:"fas fa-plus mr-1.5"},null,-1),p(" Create internal account ")]))])):u("",!0)])):u("",!0)]),s[14]||(s[14]=d('<div id="billing-defaults" class="grid max-w-7xl grid-cols-1 gap-x-8 gap-y-10 px-4 py-16 sm:px-6 md:grid-cols-3 lg:px-8" data-v-6c625995><div data-v-6c625995><h2 class="text-base/7 font-semibold text-gray-900" data-v-6c625995>Billing Defaults</h2><p class="mt-1 text-sm/6 text-gray-500" data-v-6c625995> Configure default billing settings for new projects and clients. </p></div><form class="md:col-span-2" data-v-6c625995><div class="grid grid-cols-1 gap-x-6 gap-y-8 sm:max-w-xl sm:grid-cols-6" data-v-6c625995><div class="col-span-full" data-v-6c625995><label for="default-billing-frequency" class="block text-sm/6 font-medium text-gray-900" data-v-6c625995>Default Billing Frequency</label><div class="mt-2" data-v-6c625995><select id="default-billing-frequency" class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-sage sm:text-sm/6" data-v-6c625995><option value="BILLING_TYPE_WEEKLY" data-v-6c625995>Weekly</option><option value="BILLING_TYPE_BIWEEKLY" data-v-6c625995>Bi-Weekly</option><option value="BILLING_TYPE_MONTHLY" data-v-6c625995>Monthly</option><option value="BILLING_TYPE_BIMONTHLY" data-v-6c625995>Bi-Monthly</option><option value="BILLING_TYPE_PROJECT" data-v-6c625995>Project-Based</option></select></div></div><div class="col-span-full" data-v-6c625995><label for="default-invoice-type" class="block text-sm/6 font-medium text-gray-900" data-v-6c625995>Default Invoice Type</label><div class="mt-2" data-v-6c625995><select id="default-invoice-type" class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-sage sm:text-sm/6" data-v-6c625995><option value="true" data-v-6c625995>Combined (all projects in one invoice)</option><option value="false" data-v-6c625995>Separate (one invoice per project)</option></select></div></div></div><div class="mt-8 flex" data-v-6c625995><button type="submit" class="rounded-md bg-sage px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-sage-dark focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sage" data-v-6c625995> Save defaults </button></div></form></div>',1))])]),c(e,{"is-open":H.value,"account-data":K.value,onClose:$,onSave:Q,onDelete:ee},null,8,["is-open","account-data"]),c(t,{show:U.value,title:"Delete Account",message:"Are you sure you want to delete this account? This action cannot be undone and will also remove all projects associated with this account.",onConfirm:Z,onCancel:s[1]||(s[1]=e=>U.value=!1)},null,8,["show"])],64))}},[["__scopeId","data-v-6c625995"]]);export{R as default};
