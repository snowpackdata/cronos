import{h as e,r as t,b as a,f as s,c as l,a as r,q as o,H as n,I as i,L as c,F as d,G as u,z as p,J as x,x as g,y as v,M as y,E as b,o as f}from"./index-2uCPEpPG.js";import{f as m}from"./projects-QDzbZapS.js";import{g as h,u as w,c as E,s as k,d as _}from"./expenses-2oe5Yinl.js";import{g as T,a as S}from"./expenseTags-CKM3oGuD.js";import"./index-8V-xrl-L.js";const D={class:"max-w-7xl mx-auto px-3 py-2"},j={class:"bg-white shadow rounded p-2 mb-2"},C={class:"flex gap-2 items-end"},A={class:"flex-1"},I={class:"flex-1"},P=["value"],N={class:"flex-1"},R={key:0,class:"text-center py-4"},F={key:1,class:"bg-white shadow rounded overflow-hidden"},X={class:"min-w-full divide-y divide-gray-200"},U={class:"bg-white divide-y divide-gray-200"},V={key:0},O=["onClick"],L={class:"px-2 py-1 text-xs text-gray-900"},q={class:"px-2 py-1 text-xs text-gray-900"},M={class:"px-2 py-1 text-xs text-gray-600"},B={class:"px-2 py-1 text-xs text-gray-600"},z={key:0,class:"inline-flex items-center px-1.5 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800"},$={key:1,class:"text-gray-400"},J={class:"px-2 py-1 text-xs"},Z={key:0,class:"flex flex-wrap gap-1"},H={key:1,class:"text-gray-400"},G={class:"px-2 py-1 text-right text-xs text-gray-900"},W={class:"px-2 py-1 text-center"},K=["onClick"],Q={key:1,class:"text-xs text-gray-400"},Y={class:"flex items-center justify-center gap-1"},ee=["onClick"],te=["onClick"],ae={key:2,class:"text-xs text-gray-400"},se={key:2,class:"fixed inset-0 z-10 w-screen overflow-y-auto"},le={class:"flex min-h-full items-center justify-center p-4 text-center sm:p-0"},re={class:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-6 sm:w-full sm:max-w-md"},oe={class:"bg-sage text-white px-4 py-2 sm:px-4 sm:py-2 flex justify-between items-center"},ne={class:"text-xs font-semibold leading-6"},ie={class:"py-2 border-b border-gray-100"},ce={class:"grid grid-cols-2 gap-3"},de={class:"group relative flex flex-col rounded-lg border-2 bg-white p-3 cursor-pointer transition-all has-[:checked]:border-sage has-[:checked]:ring-2 has-[:checked]:ring-sage/20 has-[:checked]:bg-sage-pale hover:border-sage/50"},ue={class:"group relative flex flex-col rounded-lg border-2 bg-white p-3 cursor-pointer transition-all has-[:checked]:border-orange-500 has-[:checked]:ring-2 has-[:checked]:ring-orange-500/20 has-[:checked]:bg-orange-50 hover:border-orange-400"},pe={key:0,class:"py-1 border-b border-gray-100 mt-1.5"},xe=["value"],ge={class:"py-1 border-b border-gray-100 mt-1.5"},ve=["value"],ye={class:"py-1 border-b border-gray-100 mt-1.5"},be={key:0,class:"flex flex-wrap gap-1 mb-1.5"},fe=["onClick"],me={class:"relative"},he={key:0,class:"absolute z-10 mt-1 w-64 bg-white border border-gray-300 rounded shadow-lg max-h-48 overflow-y-auto"},we={key:0,class:"px-2 py-1.5 text-xs text-gray-500 text-center"},Ee=["onClick"],ke={class:"bg-sage-pale bg-opacity-30 rounded p-1.5 border border-sage border-opacity-20 mt-2"},_e={class:"grid grid-cols-2 gap-2"},Te={class:"flex rounded border border-gray-300 bg-white focus-within:ring-sage focus-within:border-sage overflow-hidden"},Se={class:"mt-2"},De={class:"mt-2"},je={key:0,class:"mt-1 mb-1.5 p-1.5 bg-sage-pale bg-opacity-30 rounded border border-sage border-opacity-20"},Ce={class:"flex items-center justify-between"},Ae={key:1,class:"mt-1 text-xs text-gray-500"},Ie={key:1,class:"mt-2 p-1.5 bg-red-50 border border-red-200 text-red-700 text-xs rounded"},Pe={class:"mt-4 flex flex-row-reverse"},Ne=["disabled"],Re=["disabled"],Fe={class:"sm:flex-grow"},Xe={key:0,class:"text-2xs text-gray-500 ml-2 sm:ml-0"},Ue=["disabled"],Ve=e({__name:"ExpensesView",setup(e){const Ve=t([]),Oe=t([]),Le=t([]),qe=t([]),Me=t(!1),Be=t(""),ze=t({status:"",projectId:""}),$e=t(!1),Je=t(!1),Ze=t(!1),He=t(null),Ge=t(null),We=t(null),Ke=t({id:0,date:(new Date).toISOString().split("T")[0],project_id:"",amount:0,description:"",category_id:"",tag_ids:[]}),Qe=t(!1),Ye=t(null),et=t(!1),tt=a(()=>qe.value.filter(e=>Ke.value.tag_ids.includes(e.ID))),at=a(()=>qe.value.filter(e=>!Ke.value.tag_ids.includes(e.ID))),st=a(()=>{let e=Ve.value;if(Be.value){const t=Be.value.toLowerCase();e=e.filter(e=>e.description.toLowerCase().includes(t))}return e});function lt(e){const t=Oe.value.find(t=>t.ID===e);return t?t.name:"-"}function rt(e){switch(e){case"EXPENSE_STATE_DRAFT":return"Draft";case"EXPENSE_STATE_SUBMITTED":return"Submitted";case"EXPENSE_STATE_APPROVED":return"Approved";case"EXPENSE_STATE_REJECTED":return"Rejected";case"EXPENSE_STATE_INVOICED":return"Invoiced";case"EXPENSE_STATE_PAID":return"Paid";default:return e}}function ot(e){switch(e){case"EXPENSE_STATE_DRAFT":default:return"bg-gray-100 text-gray-800";case"EXPENSE_STATE_SUBMITTED":return"bg-yellow-100 text-yellow-800";case"EXPENSE_STATE_APPROVED":return"bg-green-100 text-green-800";case"EXPENSE_STATE_REJECTED":return"bg-red-100 text-red-800";case"EXPENSE_STATE_INVOICED":return"bg-blue-100 text-blue-800";case"EXPENSE_STATE_PAID":return"bg-purple-100 text-purple-800"}}async function nt(){Me.value=!0;try{const e={};ze.value.status&&(e.status=ze.value.status),ze.value.projectId&&(e.project_id=parseInt(ze.value.projectId)),Ve.value=await h(e)}catch(e){console.error("Failed to fetch expenses:",e),Ve.value=[]}finally{Me.value=!1}}function it(){Je.value=!1,Qe.value=!1,Ke.value={id:0,date:(new Date).toISOString().split("T")[0],project_id:"",amount:0,description:"",category_id:"",tag_ids:[]},We.value=null,He.value=null,$e.value=!0}function ct(){$e.value=!1,He.value=null,We.value=null,Ye.value=null,et.value=!1}function dt(){et.value=!et.value}function ut(e){var t;const a=e.target;We.value=(null==(t=a.files)?void 0:t[0])||null}async function pt(){var e,t;Ze.value=!0,He.value=null;try{const e=new FormData;!Qe.value&&Ke.value.project_id&&e.append("project_id",Ke.value.project_id),e.append("amount",Ke.value.amount.toString()),e.append("date",Ke.value.date),e.append("description",Ke.value.description),e.append("category_id",Ke.value.category_id),e.append("tag_ids",Ke.value.tag_ids.join(",")),We.value&&e.append("receipt",We.value),Je.value?await w(Ke.value.id,e):await E(e),await nt(),ct()}catch(a){console.error("Failed to save expense:",a),He.value=(null==(t=null==(e=a.response)?void 0:e.data)?void 0:t.error)||a.message||"Failed to save expense"}finally{Ze.value=!1}}async function xt(){try{await _(Ke.value.id),ct(),await nt()}catch(e){console.error("Failed to delete expense:",e),He.value="Failed to delete expense"}}async function gt(e){try{const t=Ve.value.find(t=>t.receipt_id===e);if(!(null==t?void 0:t.receipt))return void console.error("Receipt not found");const a=`/api/assets/${e}/download`,s=localStorage.getItem("snowpack_token"),l=await fetch(a,{headers:{"x-access-token":s||""}});if(!l.ok)throw new Error(`Download failed: ${l.statusText}`);const r=await l.blob(),o=window.URL.createObjectURL(r),n=document.createElement("a");n.href=o,n.download=t.receipt.name||`receipt_${e}`,document.body.appendChild(n),n.click(),window.URL.revokeObjectURL(o),document.body.removeChild(n)}catch(t){console.error("Failed to view receipt:",t)}}return s(async()=>{await async function(){try{const e=await m();Oe.value=e}catch(e){console.error("Failed to fetch projects:",e),Oe.value=[]}}(),await async function(){try{Le.value=await T(!0),0===Le.value.length&&console.warn("No expense categories found - you may need to create some in the Expense Config page")}catch(e){console.error("Failed to fetch expense categories:",e)}}(),await async function(){try{qe.value=await S(!0)}catch(e){console.error("Failed to fetch expense tags:",e)}}(),await nt()}),(e,t)=>{var a,s;return f(),l("div",D,[r("div",{class:"mb-2 flex justify-between items-center"},[t[14]||(t[14]=r("div",null,[r("h1",{class:"text-lg font-bold text-gray-900"},"My Expenses"),r("p",{class:"text-xs text-gray-500"}," Submit and track your business expenses ")],-1)),r("button",{onClick:it,class:"px-3 py-1.5 text-xs font-medium text-white bg-blue-600 hover:bg-blue-700 rounded"}," New Expense ")]),r("div",j,[r("div",C,[r("div",A,[t[16]||(t[16]=r("label",{class:"block text-xs font-medium text-gray-700 mb-0.5"},"Status",-1)),n(r("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>ze.value.status=e),onChange:nt,class:"block w-full rounded border-gray-300 text-xs py-1"},t[15]||(t[15]=[c('<option value="">All Statuses</option><option value="EXPENSE_STATE_DRAFT">Draft</option><option value="EXPENSE_STATE_SUBMITTED">Submitted</option><option value="EXPENSE_STATE_APPROVED">Approved</option><option value="EXPENSE_STATE_REJECTED">Rejected</option>',5)]),544),[[i,ze.value.status]])]),r("div",I,[t[18]||(t[18]=r("label",{class:"block text-xs font-medium text-gray-700 mb-0.5"},"Project",-1)),n(r("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>ze.value.projectId=e),onChange:nt,class:"block w-full rounded border-gray-300 text-xs py-1"},[t[17]||(t[17]=r("option",{value:""},"All Projects",-1)),(f(!0),l(d,null,u(Oe.value,e=>(f(),l("option",{key:e.ID,value:e.ID},p(e.name),9,P))),128))],544),[[i,ze.value.projectId]])]),r("div",N,[t[19]||(t[19]=r("label",{class:"block text-xs font-medium text-gray-700 mb-0.5"},"Search",-1)),n(r("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>Be.value=e),type:"text",placeholder:"Search expenses...",class:"block w-full rounded border-gray-300 text-xs py-1"},null,512),[[x,Be.value]])])])]),Me.value?(f(),l("div",R,t[20]||(t[20]=[r("p",{class:"text-xs text-gray-500"},"Loading expenses...",-1)]))):(f(),l("div",F,[r("table",X,[t[25]||(t[25]=r("thead",{class:"bg-gray-50"},[r("tr",null,[r("th",{class:"px-2 py-1 text-left text-xs font-medium text-gray-500 uppercase"},"Date"),r("th",{class:"px-2 py-1 text-left text-xs font-medium text-gray-500 uppercase"},"Description"),r("th",{class:"px-2 py-1 text-left text-xs font-medium text-gray-500 uppercase"},"Project"),r("th",{class:"px-2 py-1 text-left text-xs font-medium text-gray-500 uppercase"},"Category"),r("th",{class:"px-2 py-1 text-left text-xs font-medium text-gray-500 uppercase"},"Tags"),r("th",{class:"px-2 py-1 text-right text-xs font-medium text-gray-500 uppercase"},"Amount"),r("th",{class:"px-2 py-1 text-center text-xs font-medium text-gray-500 uppercase"},"Status"),r("th",{class:"px-2 py-1 text-center text-xs font-medium text-gray-500 uppercase"},"Receipt"),r("th",{class:"px-2 py-1 text-center text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),r("tbody",U,[0===st.value.length?(f(),l("tr",V,t[21]||(t[21]=[r("td",{colspan:"9",class:"px-2 py-4 text-center text-xs text-gray-500"},' No expenses found. Click "New Expense" to create one. ',-1)]))):o("",!0),(f(!0),l(d,null,u(st.value,e=>{return f(),l("tr",{key:e.ID,class:g(["transition-colors","EXPENSE_STATE_DRAFT"===e.state?"hover:bg-sage-pale hover:bg-opacity-30 cursor-pointer":"opacity-60 cursor-not-allowed"]),onClick:t=>"EXPENSE_STATE_DRAFT"===e.state?function(e){Je.value=!0,Ye.value=e,Qe.value=!e.project_id,Ke.value={id:e.ID,date:e.date.split("T")[0],project_id:e.project_id?String(e.project_id):"",amount:e.amount/100,description:e.description,category_id:String(e.category_id||""),tag_ids:e.tags?e.tags.map(e=>e.ID):[]},We.value=null,He.value=null,$e.value=!0}(e):null},[r("td",L,p((s=e.date,new Date(s).toLocaleDateString())),1),r("td",q,p(e.description),1),r("td",M,p(lt(e.project_id)),1),r("td",B,[e.category?(f(),l("span",z,p(e.category.name),1)):(f(),l("span",$,"-"))]),r("td",J,[e.tags&&e.tags.length>0?(f(),l("div",Z,[(f(!0),l(d,null,u(e.tags,e=>(f(),l("span",{key:e.ID,class:"inline-flex items-center px-1.5 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800"},p(e.name),1))),128))])):(f(),l("span",H,"-"))]),r("td",G,p((a=e.amount,`$${(a/100).toFixed(2)}`)),1),r("td",W,[r("span",{class:g([ot(e.state),"px-1.5 py-0.5 text-xs font-semibold rounded"])},p(rt(e.state)),3)]),r("td",{class:"px-2 py-1 text-center",onClick:t[3]||(t[3]=v(()=>{},["stop"]))},[e.receipt_id?(f(),l("button",{key:0,onClick:t=>gt(e.receipt_id),class:"inline-flex items-center justify-center w-7 h-7 text-white bg-sage hover:bg-sage-dark rounded shadow-sm transition-colors",title:"View receipt"},t[22]||(t[22]=[r("i",{class:"fa fa-receipt text-xs"},null,-1)]),8,K)):(f(),l("span",Q,"-"))]),r("td",{class:"px-2 py-1 text-center",onClick:t[4]||(t[4]=v(()=>{},["stop"]))},[r("div",Y,["EXPENSE_STATE_DRAFT"===e.state?(f(),l("button",{key:0,onClick:t=>async function(e){try{await k(e),await nt()}catch(t){console.error("Failed to submit expense:",t)}}(e.ID),class:"inline-flex items-center justify-center w-7 h-7 text-white bg-sage hover:bg-sage-dark rounded shadow-sm transition-colors",title:"Submit for approval"},t[23]||(t[23]=[r("i",{class:"fa fa-paper-plane text-xs"},null,-1)]),8,ee)):o("",!0),"EXPENSE_STATE_DRAFT"===e.state?(f(),l("button",{key:1,onClick:t=>async function(e){try{await _(e),await nt()}catch(t){console.error("Failed to delete expense:",t)}}(e.ID),class:"inline-flex items-center justify-center w-7 h-7 text-white bg-red-600 hover:bg-red-500 rounded shadow-sm transition-colors",title:"Delete expense"},t[24]||(t[24]=[r("i",{class:"fa fa-trash text-xs"},null,-1)]),8,te)):o("",!0),"EXPENSE_STATE_DRAFT"!==e.state?(f(),l("span",ae,"-")):o("",!0)])])],10,O);var a,s}),128))])])])),$e.value?(f(),l("div",se,[r("div",le,[r("div",{class:"fixed inset-0 bg-gray-500/75 transition-opacity",onClick:ct}),r("div",re,[r("div",oe,[r("h3",ne,p(Je.value?"Edit Expense":"New Expense"),1),r("button",{onClick:ct,type:"button",class:"text-white hover:text-gray-200 focus:outline-none"},t[26]||(t[26]=[r("i",{class:"fa fa-times h-5 w-5"},null,-1)]))]),r("form",{onSubmit:v(pt,["prevent"]),class:"bg-white px-3 py-4 sm:p-6"},[r("fieldset",ie,[t[29]||(t[29]=r("legend",{class:"text-xs font-semibold text-gray-900 mb-2"},"Expense Type",-1)),r("div",ce,[r("label",de,[n(r("input",{type:"radio",name:"expense-type",value:!1,"onUpdate:modelValue":t[5]||(t[5]=e=>Qe.value=e),class:"sr-only"},null,512),[[y,Qe.value]]),t[27]||(t[27]=c('<div class="flex items-start justify-between"><div class="flex-1"><div class="flex items-center gap-2 mb-1"><i class="fas fa-briefcase text-sage text-sm"></i><span class="text-xs font-semibold text-gray-900">Client Project</span></div><span class="text-2xs text-gray-500">Billable expense for a specific client</span></div><svg viewBox="0 0 20 20" fill="currentColor" class="invisible group-has-[:checked]:visible h-5 w-5 text-sage flex-shrink-0"><path d="M10 18a8 8 0 1 0 0-16 8 8 0 0 0 0 16Zm3.857-9.809a.75.75 0 0 0-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 1 0-1.06 1.061l2.5 2.5a.75.75 0 0 0 1.137-.089l4-5.5Z" clip-rule="evenodd" fill-rule="evenodd"></path></svg></div>',1))]),r("label",ue,[n(r("input",{type:"radio",name:"expense-type",value:!0,"onUpdate:modelValue":t[6]||(t[6]=e=>Qe.value=e),class:"sr-only"},null,512),[[y,Qe.value]]),t[28]||(t[28]=c('<div class="flex items-start justify-between"><div class="flex-1"><div class="flex items-center gap-2 mb-1"><i class="fas fa-building text-orange-600 text-sm"></i><span class="text-xs font-semibold text-gray-900">Internal Expense</span></div><span class="text-2xs text-gray-500">Company overhead, not billable</span></div><svg viewBox="0 0 20 20" fill="currentColor" class="invisible group-has-[:checked]:visible h-5 w-5 text-orange-600 flex-shrink-0"><path d="M10 18a8 8 0 1 0 0-16 8 8 0 0 0 0 16Zm3.857-9.809a.75.75 0 0 0-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 1 0-1.06 1.061l2.5 2.5a.75.75 0 0 0 1.137-.089l4-5.5Z" clip-rule="evenodd" fill-rule="evenodd"></path></svg></div>',1))])])]),Qe.value?o("",!0):(f(),l("div",pe,[t[31]||(t[31]=r("label",{class:"block text-xs font-medium text-gray-700 mb-0.5"},[b(" Project "),r("span",{class:"text-red-500"},"*")],-1)),n(r("select",{"onUpdate:modelValue":t[7]||(t[7]=e=>Ke.value.project_id=e),required:"",class:"bg-white border border-gray-300 text-gray-900 text-xs rounded focus:ring-sage focus:border-sage block w-full p-1"},[t[30]||(t[30]=r("option",{value:""},"Select project...",-1)),(f(!0),l(d,null,u(Oe.value,e=>(f(),l("option",{key:e.ID,value:e.ID},p(e.name),9,xe))),128))],512),[[i,Ke.value.project_id]])])),r("div",ge,[t[33]||(t[33]=r("label",{class:"block text-xs font-medium text-gray-700 mb-0.5"},[b(" Category "),r("span",{class:"text-red-500"},"*")],-1)),n(r("select",{"onUpdate:modelValue":t[8]||(t[8]=e=>Ke.value.category_id=e),required:"",class:"bg-white border border-gray-300 text-gray-900 text-xs rounded focus:ring-sage focus:border-sage block w-full p-1"},[t[32]||(t[32]=r("option",{value:""},"Select category...",-1)),(f(!0),l(d,null,u(Le.value,e=>(f(),l("option",{key:e.ID,value:e.ID},p(e.name),9,ve))),128))],512),[[i,Ke.value.category_id]])]),r("div",ye,[t[36]||(t[36]=r("label",{class:"block text-xs font-medium text-gray-700 mb-0.5"},"Tags (optional)",-1)),tt.value.length>0?(f(),l("div",be,[(f(!0),l(d,null,u(tt.value,e=>(f(),l("span",{key:e.ID,class:"inline-flex items-center gap-1 px-1.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 border border-green-200"},[b(p(e.name)+" ",1),r("button",{type:"button",onClick:t=>function(e){const t=Ke.value.tag_ids.indexOf(e);t>-1&&Ke.value.tag_ids.splice(t,1)}(e.ID),class:"hover:text-green-900"},t[34]||(t[34]=[r("i",{class:"fa fa-times text-xs"},null,-1)]),8,fe)]))),128))])):o("",!0),r("div",me,[r("button",{type:"button",onClick:dt,class:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-gray-700 bg-white border border-gray-300 rounded hover:bg-gray-50"},t[35]||(t[35]=[r("i",{class:"fa fa-plus text-xs"},null,-1),b(" Add Tags ")])),et.value?(f(),l("div",he,[0===at.value.length?(f(),l("div",we,p(0===qe.value.length?"No tags available":"All tags selected"),1)):o("",!0),(f(!0),l(d,null,u(at.value,e=>(f(),l("button",{key:e.ID,type:"button",onClick:t=>{return a=e.ID,Ke.value.tag_ids.includes(a)||Ke.value.tag_ids.push(a),void(et.value=!1);var a},class:"w-full text-left px-2 py-1.5 text-xs hover:bg-sage-pale hover:bg-opacity-30"},p(e.name),9,Ee))),128))])):o("",!0)]),et.value?(f(),l("div",{key:1,onClick:t[9]||(t[9]=e=>et.value=!1),class:"fixed inset-0 z-0"})):o("",!0)]),r("div",ke,[r("div",_e,[r("div",null,[t[37]||(t[37]=r("label",{class:"block text-xs font-medium text-gray-700 mb-0.5"},"Date",-1)),n(r("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>Ke.value.date=e),type:"date",required:"",class:"bg-white border border-gray-300 text-gray-900 text-xs rounded focus:ring-sage focus:border-sage block w-full p-1"},null,512),[[x,Ke.value.date]])]),r("div",null,[t[39]||(t[39]=r("label",{class:"block text-xs font-medium text-gray-700 mb-0.5"},"Amount",-1)),r("div",Te,[t[38]||(t[38]=r("span",{class:"flex items-center px-1.5 text-gray-500 text-xs bg-gray-50 border-r border-gray-300"},"$",-1)),n(r("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>Ke.value.amount=e),type:"number",step:"0.01",min:"0",required:"",placeholder:"0.00",class:"flex-1 text-gray-900 text-xs p-1 focus:outline-none border-0"},null,512),[[x,Ke.value.amount,void 0,{number:!0}]])])])])]),r("div",Se,[t[40]||(t[40]=r("label",{class:"block text-xs font-medium text-gray-700 mb-0.5"},[b(" Description "),r("span",{class:"text-gray-400"},"(required)")],-1)),n(r("textarea",{"onUpdate:modelValue":t[12]||(t[12]=e=>Ke.value.description=e),rows:"3",required:"",placeholder:"What was this expense for?",class:"bg-white border border-gray-300 text-gray-900 text-xs rounded focus:ring-sage focus:border-sage block w-full p-1.5"},null,512),[[x,Ke.value.description]])]),r("div",De,[t[42]||(t[42]=r("label",{class:"block text-xs font-medium text-gray-700 mb-0.5"},"Receipt (optional)",-1)),Je.value&&(null==(a=Ye.value)?void 0:a.receipt_id)?(f(),l("div",je,[r("div",Ce,[t[41]||(t[41]=r("span",{class:"text-xs text-gray-600"},[r("i",{class:"fa fa-check-circle text-sage mr-1"}),b(" Receipt attached ")],-1)),r("button",{type:"button",onClick:t[13]||(t[13]=e=>gt(Ye.value.receipt_id)),class:"text-xs text-sage hover:text-sage-dark"}," View ")])])):o("",!0),r("input",{ref_key:"receiptInput",ref:Ge,type:"file",accept:"image/*,.pdf",onChange:ut,class:"block w-full text-xs text-gray-600 file:mr-2 file:py-1 file:px-2 file:rounded file:border-0 file:text-xs file:font-medium file:bg-gray-100 file:text-gray-700 hover:file:bg-gray-200"},null,544),Je.value&&(null==(s=Ye.value)?void 0:s.receipt_id)?(f(),l("p",Ae," Upload a new file to replace the existing receipt ")):o("",!0)]),He.value?(f(),l("div",Ie,p(He.value),1)):o("",!0),r("div",Pe,[r("button",{type:"submit",class:"inline-flex justify-center rounded bg-sage px-2.5 py-1 text-xs font-semibold text-white shadow-sm hover:bg-sage-dark sm:ml-2 sm:w-auto",disabled:Ze.value},[Ze.value?(f(),l(d,{key:0},[t[43]||(t[43]=r("svg",{class:"animate-spin -ml-1 mr-2 h-3 w-3 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[r("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),r("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),t[44]||(t[44]=b(" Saving... "))],64)):(f(),l(d,{key:1},[b(p(Je.value?"Update":"Create"),1)],64))],8,Ne),r("button",{type:"button",class:"mt-2 inline-flex justify-center rounded bg-white px-2.5 py-1 text-xs font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto",onClick:ct,disabled:Ze.value}," Cancel ",8,Re),r("div",Fe,[Ze.value?(f(),l("span",Xe,"Processing...")):o("",!0)]),Je.value?(f(),l("button",{key:0,type:"button",class:"mt-2 inline-flex justify-center rounded bg-red-600 px-2.5 py-1 text-xs font-semibold text-white shadow-sm hover:bg-red-500 sm:mt-0 sm:w-auto",onClick:xt,disabled:Ze.value}," Delete ",8,Ue)):o("",!0)])],32)])])])):o("",!0)])}}});export{Ve as default};
