import{N as e,h as t,r as a,b as s,f as l,c as r,a as n,q as o,H as i,I as c,F as u,G as d,z as x,E as p,x as y,u as m,J as v,B as g,o as f,_ as h}from"./index-2uCPEpPG.js";const b={getDraftInvoices:async()=>e("invoices/draft")}.getDraftInvoices;function T(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e)}function w(e){if(!e)return"";return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}function _(e){switch(e){case"ENTRY_STATE_UNAFFILIATED":return"bg-orange-100 text-orange-800";case"ENTRY_STATE_DRAFT":return"bg-blue-100 text-blue-800";case"ENTRY_STATE_REJECTED":return"bg-red-100 text-red-800";case"ENTRY_STATE_APPROVED":return"bg-green-100 text-green-800";case"ENTRY_STATE_EXCLUDED":return"bg-gray-100 text-gray-600";case"ENTRY_STATE_SENT":return"bg-indigo-100 text-indigo-800";case"ENTRY_STATE_PAID":return"bg-emerald-100 text-emerald-800";case"ENTRY_STATE_VOID":return"bg-slate-100 text-slate-800";default:return"bg-gray-100 text-gray-800"}}function E(e){return e.replace("ENTRY_STATE_","")}const k={class:"px-4 sm:px-6 lg:px-8"},D={class:"sm:flex sm:items-center sm:justify-between"},A={key:0,class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none min-w-96"},S=["value"],I={key:0,class:"flex flex-col items-center justify-center p-10 bg-white rounded-lg shadow mt-6"},C={key:1,class:"flex flex-col items-center justify-center p-10 bg-white rounded-lg shadow mt-6"},j={class:"text-gray-700 mb-2"},R={key:2,class:"flex flex-col items-center justify-center p-10 bg-white rounded-lg shadow mt-6"},N={key:3,class:"mt-6 mb-8"},F={class:"bg-white rounded-lg shadow overflow-hidden"},P={class:"px-4 py-4 sm:px-6 flex justify-between items-start border-b border-gray-200"},U={class:"flex items-center"},Y={class:"text-base font-medium text-gray-900"},V={class:"mt-1 text-xs text-gray-500 space-y-1"},J={key:0},$={class:"text-right"},M={class:"text-base font-medium text-gray-900"},O={class:"text-base font-medium text-gray-900"},H={class:"border-b border-gray-200 bg-gray-50 px-4 py-2 sm:px-6 flex justify-end items-center"},L={class:"flex gap-2"},B={key:0,class:"divide-y divide-gray-200"},q={key:0,class:"px-4 py-3 sm:px-6"},z={class:"overflow-x-auto"},X={class:"min-w-full divide-y divide-gray-200 text-xs"},G={class:"bg-white divide-y divide-gray-200"},K={class:"px-3 py-1.5 whitespace-nowrap"},Q={class:"font-medium text-gray-900"},W={key:0,class:"text-xs text-gray-500"},Z={class:"italic"},ee={class:"px-3 py-1.5 whitespace-nowrap text-gray-700"},te={class:"px-3 py-1.5 whitespace-nowrap text-gray-700"},ae={class:"px-3 py-1.5 text-gray-700 max-w-md"},se={class:"flex items-start gap-2"},le={class:"flex-1"},re={key:0,class:"flex items-start gap-1"},ne=["onUpdate:modelValue"],oe={class:"flex gap-1"},ie=["onClick"],ce=["onClick"],ue={key:1,class:"text-xs break-words whitespace-normal"},de=["onClick"],xe={class:"px-3 py-1.5 whitespace-nowrap text-right text-gray-700"},pe={class:"px-3 py-1.5 whitespace-nowrap text-right text-gray-700"},ye={class:"px-3 py-1.5 whitespace-nowrap text-center"},me={class:"px-3 py-1.5 whitespace-nowrap text-right"},ve={key:0,class:"flex items-center gap-3"},ge=["onClick"],fe=["onClick"],he={key:1,class:"flex items-center gap-3"},be=["onClick"],Te=["onClick"],we=["onClick"],_e={class:"px-4 py-3 sm:px-6"},Ee={class:"overflow-x-auto"},ke={class:"min-w-full divide-y divide-gray-200 text-xs"},De={class:"bg-white divide-y divide-gray-200"},Ae={class:"px-3 py-1.5 text-gray-700 max-w-md"},Se={class:"text-xs break-words whitespace-normal"},Ie={class:"px-3 py-1.5 whitespace-nowrap text-right"},Ce=["onClick"],je=["onClick"],Re=["onClick"],Ne=["onClick"],Fe={key:0,class:"bg-gray-50"},Pe={class:"px-3 py-1.5"},Ue={class:"px-3 py-1.5"},Ye={class:"px-3 py-1.5"},Ve={class:"px-3 py-1.5 whitespace-nowrap text-right"},Je={key:1},$e={colspan:"4",class:"px-3 py-4 text-center text-gray-500"},Me={key:0},Oe={class:"bg-gray-50"},He={class:"px-3 py-1.5 text-right font-medium text-gray-900"},Le={class:"px-3 py-1.5 text-right"},Be={key:1,class:"px-4 py-3 sm:px-6"},qe={class:"overflow-x-auto"},ze={class:"min-w-full divide-y divide-gray-200 text-xs"},Xe={class:"bg-white divide-y divide-gray-200"},Ge={class:"px-3 py-1.5 whitespace-nowrap text-gray-900"},Ke={class:"px-3 py-1.5 text-gray-700 max-w-md"},Qe={class:"text-xs break-words whitespace-normal"},We={class:"px-3 py-1.5 whitespace-nowrap text-gray-700"},Ze={class:"px-3 py-1.5 whitespace-nowrap text-right font-medium text-gray-900"},et={class:"bg-gray-50"},tt={class:"px-3 py-1.5 text-right font-medium text-gray-900"},at={class:"bg-gray-50 px-4 py-3 sm:px-6"},st={class:"grid grid-cols-2 gap-4 text-xs"},lt={class:"ml-2 font-medium text-gray-900"},rt={class:"text-right"},nt={class:"ml-2 font-medium text-gray-900"},ot={key:0},it={class:"ml-2 font-medium text-gray-900"},ct={class:"ml-2 font-medium text-gray-900"},ut={class:"col-span-2 border-t border-gray-200 pt-2 mt-2 text-right"},dt={class:"ml-2 font-bold text-gray-900 text-base"},xt=h(t({__name:"TimesheetAdminView",setup(e){const t=a([]),h=a(null),xt=a(!0),pt=a(null),yt=a({}),mt=a({}),vt=a({invoiceId:null,type:"ADJUSTMENT_TYPE_CREDIT",amount:0,notes:""}),gt=a({}),ft=s(()=>h.value&&t.value.find(e=>e.ID===h.value)||null);l(async()=>{await ht()});const ht=async()=>{xt.value=!0,pt.value=null;try{const e=await b();t.value=e,t.value.length>0?h.value&&t.value.find(e=>e.ID===h.value)||(h.value=t.value[0].ID):h.value=null}catch(e){console.error("Error fetching draft invoices:",e),pt.value="Failed to load draft invoices. Please try again."}finally{xt.value=!1}},bt=e=>{vt.value={invoiceId:e,type:"ADJUSTMENT_TYPE_CREDIT",amount:0,notes:""},gt.value[e]=!0},Tt=async()=>{var e;const t=vt.value.invoiceId;if(t)if(vt.value.amount<=0)pt.value="Amount must be greater than zero.";else try{pt.value=null;const e=new FormData;e.append("invoice_id",t.toString()),e.append("type",vt.value.type);let a=vt.value.amount;"ADJUSTMENT_TYPE_CREDIT"===vt.value.type&&(a=-a),e.append("amount",a.toString()),e.append("notes",vt.value.notes||""),await g({method:"post",url:"/api/adjustments/0",data:e,headers:{"Content-Type":"multipart/form-data"}}),gt.value[t]=!1,await ht()}catch(a){console.error("Error adding adjustment:",a),a.response?a.value=`Failed to add adjustment (${a.response.status}): ${(null==(e=a.response.data)?void 0:e.message)||"Server error"}`:a.request?a.value="Failed to add adjustment: No response from server. Please try again.":a.value=`Failed to add adjustment: ${a.message||"Unknown error"}`}},wt=e=>"ADJUSTMENT_TYPE_CREDIT"===e.type?"text-green-600":"text-red-600",_t=e=>"ENTRY_STATE_VOID"===e.state,Et=async e=>{try{await g.post(`/api/adjustments/state/${e}/draft`),await ht()}catch(t){console.error("Error unvoiding adjustment:",t),pt.value="Failed to restore adjustment. Please try again."}},kt=e=>"ADJUSTMENT_STATE_VOID"===e.state,Dt=e=>{const t=new Date(e.period_end),a=new Date;return t.setHours(0,0,0,0),a.setHours(0,0,0,0),t<a},At=e=>{if(!e)return!1;const t=e.line_items.every(e=>"ENTRY_STATE_APPROVED"===e.state||"ENTRY_STATE_VOID"===e.state),a=!e.adjustments||e.adjustments.every(e=>"ADJUSTMENT_STATE_APPROVED"===e.state||"ADJUSTMENT_STATE_VOID"===e.state);return t&&a};return(e,a)=>{return f(),r("div",k,[n("div",D,[a[10]||(a[10]=n("div",{class:"sm:flex-auto"},[n("h1",{class:"text-lg font-medium text-gray-900"},"Draft Invoices"),n("p",{class:"mt-2 text-sm text-gray-500"},"Review and approve draft invoices before sending them to clients.")],-1)),!xt.value&&t.value.length>0?(f(),r("div",A,[i(n("select",{"onUpdate:modelValue":a[0]||(a[0]=e=>h.value=e),class:"block w-full rounded-md border-gray-300 py-2 pl-3 pr-10 text-sm focus:border-sage focus:outline-none focus:ring-sage"},[(f(!0),r(u,null,d(t.value,e=>(f(),r("option",{key:e.ID,value:e.ID},x(e.invoice_name)+" - "+x(e.account_name),9,S))),128))],512),[[c,h.value]])])):o("",!0)]),xt.value?(f(),r("div",I,a[11]||(a[11]=[n("i",{class:"fas fa-spinner fa-spin text-3xl text-blue-400 mb-4"},null,-1),n("span",{class:"text-gray-700"},"Loading draft invoices...",-1)]))):pt.value?(f(),r("div",C,[a[13]||(a[13]=n("i",{class:"fas fa-exclamation-circle text-3xl text-red-400 mb-4"},null,-1)),n("span",j,x(pt.value),1),n("button",{onClick:ht,class:"btn-secondary mt-4"},a[12]||(a[12]=[n("i",{class:"fas fa-sync mr-2"},null,-1),p(" Retry ")]))])):0===t.value.length?(f(),r("div",R,a[14]||(a[14]=[n("i",{class:"fas fa-file-invoice-dollar text-4xl text-blue-400 mb-4"},null,-1),n("p",{class:"text-base font-medium text-gray-700"},"No draft invoices found",-1),n("p",{class:"text-sm text-gray-500 mb-4"},"Draft invoices will appear here once they are generated",-1)]))):ft.value?(f(),r("div",N,[n("div",F,[n("div",P,[n("div",null,[n("div",U,[n("h3",Y,x(ft.value.invoice_name),1),n("span",{class:y(["ml-2 px-2 py-0.5 rounded-full text-xs font-medium",(s=ft.value,Dt(s)?"bg-green-50 text-green-700":"bg-blue-50 text-blue-700")])},x(Dt(ft.value)?"Ready":"DRAFT"),3)]),n("div",V,[n("div",null,[a[15]||(a[15]=n("span",{class:"font-medium"},"Account:",-1)),p(" "+x(ft.value.account_name),1)]),ft.value.project_name?(f(),r("div",J,[a[16]||(a[16]=n("span",{class:"font-medium"},"Project:",-1)),p(" "+x(ft.value.project_name),1)])):o("",!0),n("div",null,[a[17]||(a[17]=n("span",{class:"font-medium"},"Period:",-1)),p(" "+x(m(w)(ft.value.period_start))+" - "+x(m(w)(ft.value.period_end)),1)])])]),n("div",$,[a[18]||(a[18]=n("div",{class:"text-xs text-gray-500"},"Total Hours",-1)),n("div",M,x(ft.value.total_hours.toFixed(2)),1),a[19]||(a[19]=n("div",{class:"text-xs text-gray-500 mt-2"},"Total Amount",-1)),n("div",O,x(m(T)(ft.value.total_amount)),1)])]),n("div",H,[n("div",L,[At(ft.value)?o("",!0):(f(),r("button",{key:0,onClick:a[1]||(a[1]=e=>(async e=>{var t;try{pt.value=null;const a=e.line_items.filter(e=>"ENTRY_STATE_DRAFT"===e.state);for(const e of a)await g.post(`/api/entries/state/${e.entry_id}/approve`);const s=(null==(t=e.adjustments)?void 0:t.filter(e=>"ADJUSTMENT_STATE_DRAFT"===e.state))||[];for(const e of s)await g.post(`/api/adjustments/state/${e.ID}/approve`);await ht()}catch(a){console.error("Error approving all items:",a),pt.value="Failed to approve all items. Please try again."}})(ft.value)),class:"inline-flex items-center px-3 py-1 bg-sage-dark text-white text-xs rounded hover:bg-sage transition-colors"},a[20]||(a[20]=[n("i",{class:"fas fa-check-double mr-1"},null,-1),p(" Approve All ")]))),n("button",{onClick:a[2]||(a[2]=e=>(async e=>{if(confirm("Are you sure you want to void this invoice? This action cannot be undone."))try{await g.post(`/api/invoices/${e}/void`),await ht()}catch(t){console.error("Error voiding invoice:",t),pt.value="Failed to void invoice. Please try again."}})(ft.value.ID)),class:"inline-flex items-center px-3 py-1 bg-gray-600 text-white text-xs rounded hover:bg-gray-700 transition-colors"},a[21]||(a[21]=[n("i",{class:"fas fa-ban mr-1"},null,-1),p(" Void ")])),At(ft.value)?(f(),r("button",{key:1,onClick:a[3]||(a[3]=e=>(async e=>{try{await g.post(`/api/invoices/${e}/approve`),await ht()}catch(t){console.error("Error approving invoice:",t),pt.value="Failed to approve invoice. Please try again."}})(ft.value.ID)),class:"inline-flex items-center px-3 py-1 bg-sage text-white text-xs rounded hover:bg-sage-dark transition-colors"},a[22]||(a[22]=[n("i",{class:"fas fa-check mr-1"},null,-1),p(" Approve Invoice ")]))):o("",!0)])]),(f(),r("div",B,[ft.value.line_items&&ft.value.line_items.length>0?(f(),r("div",q,[a[32]||(a[32]=n("h4",{class:"text-xs font-medium text-gray-700 mb-2"},"Line Items",-1)),n("div",z,[n("table",X,[a[31]||(a[31]=n("thead",null,[n("tr",{class:"bg-gray-50"},[n("th",{scope:"col",class:"px-3 py-1.5 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Staff"),n("th",{scope:"col",class:"px-3 py-1.5 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Billing Code"),n("th",{scope:"col",class:"px-3 py-1.5 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date"),n("th",{scope:"col",class:"px-3 py-1.5 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Notes"),n("th",{scope:"col",class:"px-3 py-1.5 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Hours"),n("th",{scope:"col",class:"px-3 py-1.5 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Fee"),n("th",{scope:"col",class:"px-3 py-1.5 text-center text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),n("th",{scope:"col",class:"px-3 py-1.5 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),n("tbody",G,[(f(!0),r(u,null,d(ft.value.line_items,e=>(f(),r("tr",{key:e.entry_id,class:y({"voided-entry":_t(e)})},[n("td",K,[n("div",Q,x(e.user_name),1),e.is_impersonated?(f(),r("div",W,[n("span",Z,"impersonated by "+x(e.created_by_name),1)])):o("",!0)]),n("td",ee,x(e.billing_code),1),n("td",te,x(m(w)(e.start_date)),1),n("td",ae,[n("div",se,[n("div",le,[yt.value[e.entry_id]?(f(),r("div",re,[i(n("textarea",{"onUpdate:modelValue":t=>mt.value[e.entry_id]=t,class:"flex-1 px-2 py-1 text-xs border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-sage focus:border-sage",rows:"2"},null,8,ne),[[v,mt.value[e.entry_id]]]),n("div",oe,[n("button",{onClick:t=>(async e=>{try{const t=new FormData;t.append("notes",mt.value[e.entry_id]),await g.put(`/api/entries/${e.entry_id}`,t),e.notes=mt.value[e.entry_id],yt.value[e.entry_id]=!1,await ht()}catch(t){console.error("Error updating entry notes:",t),pt.value="Failed to save notes. Please try again."}})(e),class:"text-green-600 hover:text-green-800",title:"Save"},a[23]||(a[23]=[n("i",{class:"fas fa-check text-xs"},null,-1)]),8,ie),n("button",{onClick:t=>{return a=e.entry_id,yt.value[a]=!1,void delete mt.value[a];var a},class:"text-gray-500 hover:text-gray-700",title:"Cancel"},a[24]||(a[24]=[n("i",{class:"fas fa-times text-xs"},null,-1)]),8,ce)])])):(f(),r("div",ue,x(e.notes),1))]),yt.value[e.entry_id]||"ENTRY_STATE_DRAFT"!==e.state?o("",!0):(f(),r("button",{key:0,onClick:t=>(e=>{yt.value[e.entry_id]=!0,mt.value[e.entry_id]=e.notes})(e),class:"text-gray-400 hover:text-sky-700 transition-colors flex-shrink-0",title:"Edit"},a[25]||(a[25]=[n("i",{class:"fas fa-edit text-xs"},null,-1)]),8,de))])]),n("td",xe,x(e.duration_hours.toFixed(2)),1),n("td",pe,x(m(T)(e.fee)),1),n("td",ye,[n("span",{class:y([m(_)(e.state),"px-1.5 py-0.5 text-xs rounded-full inline-block"])},x(m(E)(e.state)),3)]),n("td",me,["ENTRY_STATE_DRAFT"===e.state?(f(),r("div",ve,[n("button",{onClick:t=>(async e=>{try{await g.post(`/api/entries/state/${e}/approve`),await ht()}catch(t){console.error("Error approving entry:",t),pt.value="Failed to approve entry. Please try again."}})(e.entry_id),class:"text-xs text-green-600 hover:text-green-800",title:"Approve"},a[26]||(a[26]=[n("i",{class:"fas fa-check-circle mr-1"},null,-1)]),8,ge),n("button",{onClick:t=>(async e=>{try{await g.post(`/api/entries/state/${e}/reject`),await ht()}catch(t){console.error("Error rejecting entry:",t),pt.value="Failed to reject entry. Please try again."}})(e.entry_id),class:"text-xs text-red-600 hover:text-red-800",title:"Reject"},a[27]||(a[27]=[n("i",{class:"fas fa-times-circle mr-1"},null,-1)]),8,fe)])):"ENTRY_STATE_APPROVED"===e.state?(f(),r("div",he,[n("button",{onClick:t=>(async e=>{try{await g.post(`/api/entries/state/${e}/exclude`),await ht()}catch(t){console.error("Error excluding entry:",t),pt.value="Failed to exclude entry. Please try again."}})(e.entry_id),class:"text-xs text-gray-600 hover:text-gray-800",title:"Exclude"},a[28]||(a[28]=[n("i",{class:"fas fa-eye-slash mr-1"},null,-1)]),8,be),n("button",{onClick:t=>(async e=>{try{await g.post(`/api/entries/state/${e}/void`),await ht()}catch(t){console.error("Error voiding entry:",t),pt.value="Failed to void entry. Please try again."}})(e.entry_id),class:"text-xs text-orange-600 hover:text-orange-800",title:"Void"},a[29]||(a[29]=[n("i",{class:"fas fa-ban mr-1"},null,-1)]),8,Te)])):"ENTRY_STATE_REJECTED"===e.state||"ENTRY_STATE_EXCLUDED"===e.state||"ENTRY_STATE_VOID"===e.state?(f(),r("button",{key:2,onClick:t=>(async e=>{try{await g.post(`/api/entries/state/${e}/draft`),await ht()}catch(t){console.error("Error unvoiding entry:",t),pt.value="Failed to restore entry. Please try again."}})(e.entry_id),class:"text-xs text-blue-600 hover:text-blue-800",title:"Reset"},a[30]||(a[30]=[n("i",{class:"fas fa-undo mr-1"},null,-1)]),8,we)):o("",!0)])],2))),128))])])])])):o("",!0),n("div",_e,[a[45]||(a[45]=n("h4",{class:"text-xs font-medium text-gray-700 mb-2"},"Adjustments",-1)),n("div",Ee,[n("table",ke,[a[44]||(a[44]=n("thead",null,[n("tr",{class:"bg-gray-50"},[n("th",{scope:"col",class:"px-3 py-1.5 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Type"),n("th",{scope:"col",class:"px-3 py-1.5 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Notes"),n("th",{scope:"col",class:"px-3 py-1.5 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Amount"),n("th",{scope:"col",class:"px-3 py-1.5 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),n("tbody",De,[(f(!0),r(u,null,d(ft.value.adjustments,e=>{return f(),r("tr",{key:e.ID,class:y({"voided-entry":kt(e)})},[n("td",{class:y(["px-3 py-1.5 whitespace-nowrap font-medium",wt(e)])},x((t=e.type,t.replace("ADJUSTMENT_TYPE_",""))),3),n("td",Ae,[n("div",Se,x(e.notes),1)]),n("td",{class:y(["px-3 py-1.5 whitespace-nowrap text-right font-medium",wt(e)])},x(m(T)(e.amount)),3),n("td",Ie,["ADJUSTMENT_STATE_DRAFT"===e.state?(f(),r(u,{key:0},[n("button",{onClick:t=>(async e=>{try{await g.post(`/api/adjustments/state/${e}/approve`),await ht()}catch(t){console.error("Error approving adjustment:",t),pt.value="Failed to approve adjustment. Please try again."}})(e.ID),class:"text-xs text-green-600 hover:text-green-800"},a[33]||(a[33]=[n("i",{class:"fas fa-check mr-1"},null,-1),p(" Approve ")]),8,Ce),n("button",{onClick:t=>(async e=>{try{await g.post(`/api/adjustments/state/${e}/void`),await ht()}catch(t){console.error("Error voiding adjustment:",t),pt.value="Failed to void adjustment. Please try again."}})(e.ID),class:"text-xs text-gray-500 hover:text-gray-700 ml-2"},a[34]||(a[34]=[n("i",{class:"fas fa-ban mr-1"},null,-1),p(" Void ")]),8,je)],64)):"ADJUSTMENT_STATE_APPROVED"===e.state?(f(),r("button",{key:1,onClick:t=>Et(e.ID),class:"text-xs text-orange-600 hover:text-orange-800"},a[35]||(a[35]=[n("i",{class:"fas fa-undo mr-1"},null,-1),p(" Unapprove ")]),8,Re)):"ADJUSTMENT_STATE_VOID"===e.state?(f(),r("button",{key:2,onClick:t=>Et(e.ID),class:"text-xs text-blue-600 hover:text-blue-800"},a[36]||(a[36]=[n("i",{class:"fas fa-undo mr-1"},null,-1),p(" Restore ")]),8,Ne)):o("",!0)])],2);var t}),128)),gt.value[ft.value.ID]?(f(),r("tr",Fe,[n("td",Pe,[i(n("select",{"onUpdate:modelValue":a[4]||(a[4]=e=>vt.value.type=e),class:"w-full px-2 py-1 text-xxs border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500"},a[37]||(a[37]=[n("option",{value:"ADJUSTMENT_TYPE_CREDIT",class:"text-xxs"},"Credit",-1),n("option",{value:"ADJUSTMENT_TYPE_FEE",class:"text-xxs"},"Fee",-1)]),512),[[c,vt.value.type]])]),n("td",Ue,[i(n("textarea",{"onUpdate:modelValue":a[5]||(a[5]=e=>vt.value.notes=e),rows:"2",placeholder:"Enter notes",class:"w-full px-2 py-1 text-xxs border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500"},null,512),[[v,vt.value.notes]])]),n("td",Ye,[i(n("input",{type:"number","onUpdate:modelValue":a[6]||(a[6]=e=>vt.value.amount=e),step:"0.01",min:"0",placeholder:"0.00",class:"w-full px-2 py-1 text-xxs border border-gray-300 rounded text-right focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500"},null,512),[[v,vt.value.amount]])]),n("td",Ve,[n("button",{onClick:Tt,class:"text-xs text-blue-600 hover:text-blue-800"},a[38]||(a[38]=[n("i",{class:"fas fa-save mr-1"},null,-1),p(" Save ")])),n("button",{onClick:a[7]||(a[7]=e=>{return t=ft.value.ID,void(gt.value[t]=!1);var t}),class:"text-xs text-gray-500 hover:text-gray-700 ml-2"},a[39]||(a[39]=[n("i",{class:"fas fa-times mr-1"},null,-1),p(" Cancel ")]))])])):o("",!0),!ft.value.adjustments||0===ft.value.adjustments.length&&!gt.value[ft.value.ID]?(f(),r("tr",Je,[n("td",$e,[a[41]||(a[41]=n("p",{class:"text-xs"},"No adjustments found",-1)),n("button",{onClick:a[8]||(a[8]=e=>bt(ft.value.ID)),class:"mt-2 inline-flex items-center px-2 py-1 text-xs text-blue-600 hover:text-blue-800"},a[40]||(a[40]=[n("i",{class:"fas fa-plus-circle mr-1"},null,-1),p(" Add Adjustment ")]))])])):o("",!0)]),ft.value.adjustments&&ft.value.adjustments.length>0||gt.value[ft.value.ID]?(f(),r("tfoot",Me,[n("tr",Oe,[a[43]||(a[43]=n("td",{colspan:"2",class:"px-3 py-1.5 text-right font-medium text-gray-700"},"Total Adjustments",-1)),n("td",He,x(m(T)(ft.value.total_adjustments)),1),n("td",Le,[gt.value[ft.value.ID]?o("",!0):(f(),r("button",{key:0,onClick:a[9]||(a[9]=e=>bt(ft.value.ID)),class:"text-xs text-blue-600 hover:text-blue-800"},a[42]||(a[42]=[n("i",{class:"fas fa-plus-circle mr-1"},null,-1),p(" Add ")])))])])])):o("",!0)])])]),ft.value.expenses&&ft.value.expenses.length>0?(f(),r("div",Be,[a[48]||(a[48]=n("h4",{class:"text-xs font-medium text-gray-700 mb-2"},"Pass-Through Expenses",-1)),n("div",qe,[n("table",ze,[a[47]||(a[47]=n("thead",null,[n("tr",{class:"bg-gray-50"},[n("th",{scope:"col",class:"px-3 py-1.5 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date"),n("th",{scope:"col",class:"px-3 py-1.5 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Description"),n("th",{scope:"col",class:"px-3 py-1.5 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Submitted By"),n("th",{scope:"col",class:"px-3 py-1.5 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Amount")])],-1)),n("tbody",Xe,[(f(!0),r(u,null,d(ft.value.expenses,e=>(f(),r("tr",{key:e.ID},[n("td",Ge,x(m(w)(e.date)),1),n("td",Ke,[n("div",Qe,x(e.description),1)]),n("td",We,x(e.submitter.first_name)+" "+x(e.submitter.last_name),1),n("td",Ze,x(m(T)(e.amount)),1)]))),128))]),n("tfoot",null,[n("tr",et,[a[46]||(a[46]=n("td",{colspan:"3",class:"px-3 py-1.5 text-right font-medium text-gray-700"},"Total Expenses",-1)),n("td",tt,x(m(T)(ft.value.total_expenses)),1)])])])])])):o("",!0),n("div",at,[n("div",st,[n("div",null,[a[49]||(a[49]=n("span",{class:"font-medium text-gray-500"},"Total Hours:",-1)),n("span",lt,x(ft.value.total_hours.toFixed(2)),1)]),n("div",rt,[a[50]||(a[50]=n("span",{class:"font-medium text-gray-500"},"Fees:",-1)),n("span",nt,x(m(T)(ft.value.total_fees)),1)]),ft.value.total_expenses>0?(f(),r("div",ot,[a[51]||(a[51]=n("span",{class:"font-medium text-gray-500"},"Expenses:",-1)),n("span",it,x(m(T)(ft.value.total_expenses)),1)])):o("",!0),n("div",{class:y(ft.value.total_expenses>0?"text-right":"")},[a[52]||(a[52]=n("span",{class:"font-medium text-gray-500"},"Adjustments:",-1)),n("span",ct,x(m(T)(ft.value.total_adjustments)),1)],2),n("div",ut,[a[53]||(a[53]=n("span",{class:"font-bold text-gray-700 text-base"},"Total Amount:",-1)),n("span",dt,x(m(T)(ft.value.total_amount)),1)])])])]))])])):o("",!0)]);var s}}}),[["__scopeId","data-v-8d892736"]]);export{xt as default};
